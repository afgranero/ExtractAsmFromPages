<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="TRS-80 Revived Site by Ira Goldklang's is an archive of everything related to the Tandy Radio Shack TRS-80 microcomputer lines. Site contains emulators, programs, manuals, books, patches, games, hints, discussions, and tons more.">
	<meta name="author" content="Ira Goldklang">
	<meta name="robots" content="index, follow">
	<link rel="icon" href="https://www.trs-80.com/icon.ico" type="image/x-icon">
	<link rel="canonical" href="https://www.trs-80.com/sub-disassem-rom-level-1.htm">
	<meta property="og:title" content="TRS-80 Revived Site - Ira Goldklang's TRS-80 Archive">
	<meta property="og:description" content="Complete archive of TRS-80 emulators, programs, manuals, books, and games for Tandy Radio Shack TRS-80 computers.">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://www.trs-80.com/sub-disassem-rom-level-1.htm">
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="TRS-80 Revived Site">
	<meta name="twitter:description" content="Complete archive of TRS-80 emulators, programs, and resources.">
	<title>TRS-80 - Level 1 ROM Disassembled</title>
	<!-- Load your existing CSS file -->
	<link rel="stylesheet" href="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/trs80-css.css">
	<link rel="stylesheet" href="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/trs80-hamburger.css">
	<!-- Fancybox CSS -->
	<link rel="stylesheet" href="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/fancybox.css">
	<!-- Load the component loader -->
	<script src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/trs80-loader.js"></script>
	<script src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/trs80-hamburger.js"></script>
</head>
<body class="trs80-loaded"><button id="hamburger-btn" class="hamburger-menu" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
	<div class="site-container">
		<!-- Header will be loaded here -->
		<div id="header"><style>
    .trs80-header-grid {
        display: grid;
        /* 'auto' lets the images take only needed space, '1fr' gives the rest to the text */
        grid-template-columns: auto 1fr auto;
        grid-template-rows: 1fr;
        grid-column-gap: 20px;
        grid-row-gap: 0;
        background-color: #003399;
        margin-top: 10px;
        padding: 10px;
        /* This ensures all items in the grid (images and text) are aligned to the top */
        align-items: start;
    }

    .trs80-header-left { grid-area: 1 / 1 / 2 / 2; display: flex; align-items: start; }
    .trs80-header-center { grid-area: 1 / 2 / 2 / 3; text-align: center; }
    .trs80-header-right { grid-area: 1 / 3 / 2 / 4; display: flex; align-items: start; justify-content: flex-end; }

    .trs80-title { color: white !important; font-size: 170%; text-align: center; margin: 0 0 10px 0; font-weight: bold; }

    .trs80-description {
        color: white !important;
        font-size: 120%;
        text-align: center;
        margin: 0 auto 15px auto;
        padding: 0 10px;
        line-height: 1.4;
    }

    .trs80-header-grid img { border: 0 !important; margin: 0 2px; }
    .trs80-img-60 { width: 60px; }
    .trs80-img-80 { width: 80px; }
    .trs80-img-90 { width: 90px; }
    .trs80-img-100 { width: 100px; }

    /* Search Button Styling */
    .header-search-container {
        margin-bottom: 10px;
    }

    .header-search-link {
        display: inline-block;
        background: #ffcc00; /* Retro TRS-80 Amber */
        color: #003399 !important;
        padding: 6px 15px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.9em;
        text-decoration: none;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        transition: transform 0.2s, background 0.2s;
    }

    .header-search-link:hover {
        background: #ffe066;
        transform: scale(1.05);
        text-decoration: none;
    }

    @media screen and (max-width: 768px) {
        .trs80-header-grid {
            grid-template-columns: 1fr;
            grid-template-rows: auto auto auto;
            text-align: center;
            justify-items: center;
        }
        .trs80-header-left { grid-area: 1 / 1 / 2 / 2; justify-content: center; }
        .trs80-header-center { grid-area: 2 / 1 / 3 / 2; }
        .trs80-header-right { grid-area: 3 / 1 / 4 / 2; justify-content: center; }
        .trs80-title { font-size: 130%; }
        .trs80-description { font-size: 100%; text-align: center; }
        .trs80-img-60 { width: 50px; }
        .trs80-img-80 { width: 65px; }
        .trs80-img-90 { width: 75px; }
        .trs80-img-100 { width: 80px; }
    }
</style>

<div class="trs80-header-grid">
    <div class="trs80-header-left">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-model1-keyboardandscreen-100.png" alt="[Model I]" class="trs80-img-60">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-model3-rsc05-blur-x100.png" alt="[Model III]" class="trs80-img-60">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-model4-rsc10-x100.png" alt="[Model 4]" class="trs80-img-90">
    </div>

    <div class="trs80-header-center">
        <p class="trs80-title">Welcome To Ira Goldklang's TRS-80 Revived Site</p>

        <p class="trs80-description">
            TRS-80 Revived Site is an archive of everything related to 
the Tandy Radio Shack TRS-80 home microcomputer lines. Site contains 
emulators, programs, manuals, books, patches, games, hints, discussions,
 and tons more.
        </p>

        <div class="header-search-container">
            <a href="https://www.trs-80.com/main-search-site.htm" class="header-search-link">
                <span class="search-icon">üîç</span> SEARCH THIS SITE
            </a>
        </div>
    </div>

    <div class="trs80-header-right">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-model-4p-sideways-view-x100.png" alt="[Model 4P]" class="trs80-img-90">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-model100-ccf836-x100.png" alt="[Model 100]" class="trs80-img-80">
        <img src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/computer-pc2-rsc07-x100.png" alt="[Pocket Computer]" class="trs80-img-100">
    </div>
</div>
</div>
		<!-- Content wrapper with sidebar and main content -->
		<div class="content-wrapper">
			<!-- Left Navigation will be loaded here -->
			<aside class="sidebar" id="navbar"><div class="navigationpanelv2">
	<div class="nav-entry-block">
		<h2>FIRST TIME VISITORS</h2>
		<p style="font-size:150%; margin-top:0; text-align:center; color:red;"><a href="https://www.trs-80.com/main-welcome.htm">Visit the WELCOME page</a></p>
	</div>

	<div class="nav-entry-block">
		<h2>Services</h2>
		<ul>
			<li><a href="https://www.trs-80.com/main-faq-reading-disks.htm" style="color:red !important;">Do you have TRS-80 Disks?  Send them in for Preservation and Conversion for use in an Emulator</a></li>
			<li><a href="https://www.trs-80.com/main-disketterequest.htm">Request Real DOS Disks</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>General</h2>
		<ul>
			<li><a href="https://www.trs-80.com/index.html">Site News</a></li>
			<li><a href="https://www.trs-80.com/main-introduction-to-emulators.htm">Intro to Emulation</a></li>
			<li>
				<span class="submenu-toggle"><a href="https://www.trs-80.com/main-interviews.htm">Interviews</a></span>
				<ul>
					<li><a href="https://americanhistory.si.edu/comphist/gates.htm">Bill Gates</a></li>
					<li><a href="http://www.trs-80.org/interview-bill-hogue/">Bill Hogue</a></li>
					<li><a href="http://www.trs-80.org/interview-dan-gookin/">Dan Gookin</a></li>
					<li><a href="https://www.trs-80.com/sub-interview-don-french.htm">Don French</a></li>
					<li><a href="https://bluebilby.com/dubois-mcnamara/">Dubouis &amp; McNamara</a></li>
					<li><a href="http://www.trs-80.org/interview-j-weaver/">J. Weaver Jr.</a></li>
					<li><a href="http://www.trs-80.org/interview-jack-crenshaw/">Jack Crenshaw</a></li>
					<li><a href="http://www.trs-80.org/interview-jim-stutsman/">Jim Stutsman</a></li>
					<li><a href="http://www.48k.ca/JoshLavinsky.html">Josh Lavinsky</a></li>
					<li><a href="http://www.trs-80.org/interview-kevin-tschudi/">Kevin Tschudi</a></li>
					<li><a href="http://www.trs-80.org/interview-paul-andreasen/">Paul Andreasen</a></li>
					<li><a href="https://www.trs-80.com/sub-interview-steve-leininger.htm">Steven W. Leininger</a></li>
					<li><a href="https://www.trs-80.com/sub-interview-bill-demas.htm">William Demas</a></li>
				</ul>
			</li>
			<li><a href="https://www.trs-80.com/main-shipping.htm">Shipping a TRS-80</a></li>
			<li><a href="https://www.trs-80.com/main-lore.htm">Radio Shack Lore</a></li>
			<li><a href="https://www.trs-80.com/main-fun-stuff.htm">Fun Stuff</a></li>
		</ul>
		<p class="donatev2"><a href="https://www.trs-80.com/main-donate.htm">Support the Site</a></p>
	</div>

	<div class="nav-entry-block">
		<h2>Help The Site!</h2>
		<ul>
			<li><a href="https://www.trs-80.com/main-missing-software.htm">Missing Software</a></li>
			<li><a href="https://www.trs-80.com/main-missing-magazines.htm">Missing Magazines</a></li>
			<li><a href="https://www.trs-80.com/main-faq-reading-disks.htm">Send in Your Disks for Archiving</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Searches</h2>
		<ul>
			<li><a href="https://www.trs-80.com/main-search-site.htm">Site-Wide Search</a></li>
			<li><a href="https://www.trs-80.com/main-search-software.htm">Software Search</a></li>
			<li><a href="https://www.trs-80.com/main-search-magazines.htm">Magazine Search</a></li>
			<li><a href="https://www.trs-80.com/main-search-rs-catalogs.htm">Catalog Search</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Emulation and Virtual Media</h2>
		<span>Info and Downloads:</span>
		<ul>
			<li><a href="https://www.trs-80.com/main-emulators.htm">Emulators</a></li>
			<li><a href="https://www.trs-80.com/main-emulation-tape-utilities.htm">Virtual Tape Utilities</a></li>
			<li><a href="https://www.trs-80.com/main-emulation-disk-utilities.htm">Virtual Disk Utilities</a></li>
			<li><a href="https://www.trs-80.com/main-emulation-misc-utilities.htm">Misc TRS-80 Utilities</a></li>
		</ul>
		<span>How To Convert:</span>
		<ul>
			<li><a href="https://www.trs-80.com/main-emulation-conversion-tapes.htm">Tapes to Virtual</a></li>
			<li><a href="https://www.trs-80.com/main-emulation-conversion-disks.htm">Disks to Virtual</a></li>
			<li><a href="https://www.classic-computers.org.nz/system-80/software_esf_archive-imaging.htm">Stringy Floppy to Virtual</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Advanced</h2>
		<span>Internal Operations</span>
		<ul>
			<li>
				<span class="submenu-toggle">ROM/Z-80 Info</span>
				<ul>
					<li><a href="https://www.trs-80.com/main-internal-rom-related.htm#compared">ROMs Compared</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-level-1.htm">Model I Level 1 ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m1-part-1.htm">Model I Level II ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m3-part-1.htm">Model III Level II ROM</a></li>
					<li><a href="https://github.com/kiwisincebirth/TRS-80">Model III Level II Compilable Source</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4.htm">Model 4 ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4-xdrom-main.htm">Model 4 XDROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4p.htm">Model 4P Boot ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-network-4.htm">Network 4 ROM</a></li>
					<li><a href="https://www.gatesnotes.com/microsoft-original-source-code">Orig Source Code</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-bugs.htm">Bugs</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-rom-addresses.htm">Memory map and address reference</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-entry-points.htm">Entry Points to routines</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-io-and-misc-routines.htm">I/O and Misc ROM routines</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-math-calls.htm">Math Routines</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-rst-vectors.htm">RST vectors and Disk BASIC entry points</a></li>
					<li><a href="https://www.trs-80.com/sub-rom-z80-info.htm">Reference for Z-80 opcodes and undocumented command</a></li>
				</ul>
			</li>
			<li><a href="https://www.trs-80.com/main-internal-ram-addresses-and-routines.htm">RAM Addresses/Routines</a></li>
			<li><a href="https://www.trs-80.com/main-internal-ports-and-i-o.htm">Ports and I/O Devices</a></li>
			<li><a href="https://www.trs-80.com/sub-rom-dcbs.htm">Device Control Blocks (DCB's)</a></li>
			<li><a href="https://www.trs-80.com/main-internal-keyboard-map.htm">Keyboard Map</a></li>
		</ul>

		<span>Disassemblies</span>
		<ul>
			<li>
				<span class="submenu-toggle"><a href="https://www.trs-80.com/main-disassemblies.htm">Disassemblies</a></span>
				<ul>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-level-1.htm">Level I ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m1-part-1.htm">Level II ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m3-part-1.htm">Model III ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m3-part-4-durda.htm">Frank Durda Modified C-ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4.htm">Model 4 ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4p.htm">Model 4P Bootstrap ROM</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-m4-xdrom-main.htm">XDROM - Frank Durda's Model 4 ROM C replacement</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-dos-nd80-m1-main.htm">NEWDOS/80 v2.0</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-dos-td13-main.htm">TRSDOS v1.3</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-dos-td23-main.htm">TRSDOS v2.3</a></li>
					<li><a href="https://www.trs-80.com/sub-disassem-rom-network-4.htm">Network 4 Transporter ROM code analysis</a></li>
				</ul>
			</li>
		</ul>

		<span>Zaps/Patches/Fixes</span>
		<ul>
			<li>
				<span class="submenu-toggle"><a href="https://www.trs-80.com/main-zaps-and-patches.htm">Zaps and Patches</a></span>
				<ul>
					<li><a href="https://www.trs-80.com/main-zaps-and-patches.htm#dos">DOS</a></li>
					<li><a href="https://www.trs-80.com/sub-zaps-sw-electric-pencil.htm">Electric Pencil</a></li>
					<li><a href="https://www.trs-80.com/sub-zaps-sw-general.htm">Other Software</a></li>
					<li><a href="https://www.trs-80.com/main-zaps-and-patches.htm#software-zaps-and">ZIPs of Patches</a></li>
				</ul>
			</li>
			<li>
				<span class="submenu-toggle"><a href="https://www.trs-80.com/main-tips-and-tricks.htm">Tips and Tricks</a></span>
				<ul>
					<li><a href="https://www.trs-80.com/sub-tips-hard-drive.htm">Hard Drive Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-packing.htm">String Packing and USR Routines</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-level2.htm">Level II Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-reference-dos-newdos80-main.htm#tips">NEWDOS/80 Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-dos.htm">Other DOS Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-graphics.htm">TRS-80 Graphics</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-file-formats.htm">Tape and File Formats/Structures</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-easter-eggs.htm">Bugs and Easter Eggs</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-misc.htm">Misc Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-model-3.htm">Model III Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-model-4.htm">Model 4 Tips and Tricks</a></li>
					<li><a href="https://www.trs-80.com/sub-tips-model-4p.htm">Model 4P Tips and Tricks</a></li>
				</ul>
			</li>
		</ul>
		<p class="donatev2"><a href="https://www.trs-80.com/main-donate.htm">Support the Site</a></p>
	</div>

	<div class="nav-entry-block">
		<h2>TRS-80 Models</h2>
		<ul>
			<li><a href="https://www.trs-80.com/main-models.htm">Timeline</a></li>
			<li><a href="https://www.trs-80.com/sub-models-model1.htm">Model I</a></li>
			<li><a href="https://www.trs-80.com/sub-models-model2.htm">Model II</a></li>
			<li><a href="https://www.trs-80.com/sub-models-model3.htm">Model III</a></li>
			<li><a href="https://www.trs-80.com/sub-models-model4.htm">Model 4/4P/4D</a></li>
			<li><a href="https://www.trs-80.com/sub-models-coco.htm">Color (Coco 1-3, MC-10)</a></li>
			<li><a href="https://www.trs-80.com/sub-models-laptops.htm">Laptops (100/200/600)</a></li>
			<li><a href="https://www.trs-80.com/sub-models-pocket.htm">Pocket (PC-1 to PC-8)</a></li>
			<li><a href="https://www.trs-80.com/sub-models-clones.htm">Clones</a></li>
			<li><a href="https://www.trs-80.com/sub-models-printers.htm">Printers</a></li>
		</ul>
		<p class="donatev2"><a href="https://www.trs-80.com/main-donate.htm">Support the Site</a></p>
	</div>

	<div class="nav-entry-block">
		<h2>Reference</h2>
		<ul>
			<li><a href="https://www.trs-80.com/sub-reference-dos-trsdos-main.htm">TRSDOS</a></li>
			<li><a href="https://www.trs-80.com/sub-reference-dos-dosplus.htm">DOSPlus</a></li>
			<li><a href="https://www.trs-80.com/sub-reference-dos-newdos80-main.htm">NEWDOS/80</a></li>
			<li><a href="https://www.trs-80.com/sub-reference-multidos.htm">MULTIDOS</a></li>
			<li><a href="https://www.trs-80.com/sub-reference-dos-cpm.htm">CP/M</a></li>
			<li><a href="https://www.trs-80.com/sub-reference-level-2-basic.htm">Level II BASIC Ref</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Detailed Products</h2>
		<ul>
			<li><a href="https://www.trs-80.com/sub-details-orchestra.htm">ORCH-80/85/90</a></li>
			<li><a href="https://www.trs-80.com/sub-details-speed-up-boards.htm">Speed-Up Boards</a></li>
			<li><a href="https://www.trs-80.com/sub-details-scott-adams.htm">Scott Adams Adventures</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Tandy Publications</h2>
		<ul>
			<li><a href="https://www.trs-80.com/sub-publications-rs-csbs.htm">Customer Service Bulletins</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-memos.htm">Memos / Bulletins / Releases</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-cc-answers.htm">Comp Center Answers</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-catalogs.htm">Catalogs</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-comics.htm">Comic Books</a></li>
		</ul>
		<span>Microcomputer News</span>
		<ul>
			<li><a href="https://www.trs-80.com/sub-publications-rs-micronewsletter-usa.htm">USA Edition</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-micronewsletter-aus.htm">Australian Edition</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-rs-micronewsletter-other.htm">Other Editions</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Publications</h2>
		<ul>
			<li><a href="https://www.trs-80.com/sub-publications-books.htm">Books</a></li>
			<li>
				<span class="submenu-toggle"><a href="https://www.trs-80.com/main-magazine-main-menu.htm">Magazines (Non-Tandy)</a></span>
				<ul>
					<li><a href="https://www.trs-80.com/sub-mag-80micro-main.htm">80 Microcomputing</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-80-notebook.htm">80 Notebook</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-80us-detail.htm">80 U.S. Journal</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-alternatesource-detail.htm">The Alternate Source</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-baron.htm">Baron's Microcomputing</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-cie.htm">C.I.E.</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-cload.htm">CLOAD</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-codeworks.htm">CodeWorks</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-computernews80.htm">Computer News 80</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-computer-user.htm">Computer User</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-creative.htm">Creative Computing</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-hecomputronics-detail.htm">H&amp;E Computronics</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-lsi-journal.htm">LDOS / LSI</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-micro80.htm">Micro-80</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-misosys-notes.htm">Misosys Notes</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-misosys-quarterly.htm">Misosys Quarterly</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-softside-detail.htm">Softside</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-the8ighty.htm">The 8ighty</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-trace.htm">Trace</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-trs8bit.htm">TRS8Bit</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-trstimes.htm">TRSTimes</a></li>
					<li><a href="https://www.trs-80.com/sub-mag-other.htm">Other Magazines</a></li>
				</ul>
			</li>
			<li><a href="https://www.trs-80.com/sub-publications-manuals-software-1.htm">Software Manuals</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-user-groups-1.htm">User's Group Newsletters</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-catalogs.htm">Catalogs (Non-Tandy)</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-flyers.htm">Product Flyers</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-company-news.htm">Company Newsletters</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>This Section for TRS-80 Hardware Owners</h2>
		<span>TRS-80 Upgrades/Parts:</span>
		<ul>
			<li><a href="https://www.trs-80.com/main-upgrades.htm">Upgrades and Parts</a></li>
			<li><a href="https://www.trs-80.com/sub-repairs-parts-thingverse.htm">Schematics/3-D Printable Parts</a></li>
		</ul>
		<span>TRS-80 Repairs:</span>
		<ul>
			<li class="navbumpv2"><a href="https://www.trs-80.com/main-repairs.htm">Main Repair Page</a></li>
			<li><a href="https://www.trs-80.com/sub-repairs-repair-people.htm">Repair People</a></li>
			<li><a href="https://www.trs-80.com/sub-repairs-how-to-open.htm">Opening a TRS-80</a></li>
			<li><a href="https://www.trs-80.com/sub-repairs-eprom.htm">Using an EPROM</a></li>
		</ul>
		<span>Hardware Mods and Hacks:</span>
		<ul>
			<li><a href="https://www.trs-80.com/sub-tips-modifications-model-1.htm">Model I</a></li>
			<li><a href="https://www.trs-80.com/sub-tips-modifications-model-3.htm">Model III</a></li>
			<li><a href="https://www.trs-80.com/sub-tips-modifications-model-4.htm">Model 4</a></li>
		</ul>
		<span>Other Items ...</span>
		<ul>
			<li><a href="https://www.trs-80.com/sub-publications-manuals-hardware-1.htm">Hardware Manuals</a></li>
			<li><a href="https://www.trs-80.com/sub-publications-manuals-service.htm">Service Manuals</a></li>
			<li><a href="https://voidstar.blog/tandy-radio-shack-computer-cassette-recorder-trs-ccr-usage/">Using a Computer / Tablet / Smartphone for Cassette I/O</a></li>
		</ul>
	</div>

	<div class="nav-entry-block">
		<h2>Misc</h2>
		<ul>
			<li><a href="https://www.trs-80.com/main-emailme.htm">Send Me Email</a></li>
			<li><a href="https://www.trs-80.com/main-old-news.htm">Archived News and Guestbook</a></li>
			<li><a href="https://www.trs-80.com/main-personalstories.htm">Personal Stories Submitted</a></li>
			<li><a href="https://www.trs-80.com/main-emaillinks.htm">Email and other TRS-80 Sites</a></li>
			<li><a href="https://www.trs-80.com/main-copyrights.htm">Copyrights</a></li>
		</ul>
		<p class="donatev2"><a href="https://www.trs-80.com/main-donate.htm">Support the Site</a></p>
	</div>
</div></aside>
			<!-- Main Content -->
			<main class="main-content">
				<div class="main-page-container">
					<h1>TRS-80 - Level 1 ROM Disassembled</h1>

					<div class="section-wrapper">
						<h2 id="system-variable">System Variable Storage Chart - All offset from 4000H<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
						<div class="section-content">
							<div class="info-row"><div>+$68-$69</div><div>Current cursor location</div></div>
							<div class="info-row"><div>+$6A-$6B</div><div>Physical top of internal ram</div></div>
							<div class="info-row"><div>+$6C-$6D</div><div>Pointer to variable storage space</div></div>
							<div class="info-row"><div>+$70-$7F</div><div>A$ storage space</div></div>
							<div class="info-row"><div>+$80-$8F</div><div>B$ storage space</div></div>
							<div class="info-row"><div>+$90</div><div>Cassette Out Byte</div></div>
							<div class="info-row"><div>+$91-$92</div><div>STEP value</div></div>
							<div class="info-row"><div>+$9B-$9C</div><div>Used to store SP</div></div>
							<div class="info-row"><div>+$9D-$9E</div><div>Current line being executed</div></div>
							<div class="info-row"><div>+$9F-$A0</div><div>Next line to execute for CONT, error</div></div>
							<div class="info-row"><div>+$A3-$A4</div><div>GOSUB, RETURN to line number</div></div>
							<div class="info-row"><div>+$A5-$A6</div><div>Number to return to for FOR-NEXT</div></div>
							<div class="info-row"><div>+$AC</div><div>Keyboard input buffer</div></div>
							<div class="info-row"><div>+$F4</div><div>IX is initialized here</div></div>
							<div class="info-row"><div>+$200</div><div>Where SP is initialized to start, downward</div></div>
						</div>
					</div>


					<div class="section-wrapper">
						<h2 id="floating-point">Floating Point Number Storage<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
						<div class="section-content">
							<div class="info-row"><div>IX + F6</div><div>L - LSB of NUMBER 2</div></div>
							<div class="info-row"><div>IX + F7</div><div>H - NMSB of NUMBER 2</div></div>
							<div class="info-row"><div>IX + F8</div><div>C - MSB of NUMBER 2</div></div>
							<div class="info-row"><div>IX + F9</div><div>L' - Exponent of NUMBER 2</div></div>
							<div class="info-row"><div>IX + FA</div><div>H' - Sign of NUMBER 2</div></div>
							<div class="info-row"><div>IX + FB</div><div>E - LSB of NUMBER 1</div></div>
							<div class="info-row"><div>IX + FC</div><div>D - NMSB of NUMBER 1</div></div>
							<div class="info-row"><div>IX + FD</div><div>B - MSB of NUMBER 1</div></div>
							<div class="info-row"><div>IX + FE</div><div>E' - Exponent of NUMBER 1</div></div>
							<div class="info-row"><div>IX + FF</div><div>D' - Sign of NUMBER 1</div></div>
						</div>
					</div>


					<div class="section-wrapper">
						<br><h2 class="assembly-section-title" id="disassembly">Disassembly<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
						<div class="section-content">
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0000H</div><div>DI</div><div>Disable Interrupts.</div></div>
									<div class="assembly-row-combined"><div>0001H</div><div>LD HL,00FFH</div><div>Let Register Pair HL equal 00FFH, which, when the very next instruction hits, will turn HL into FFFFH.</div></div>
									<div class="assembly-row-combined"><div>0004H</div><div><a href="#018EH" class="memory-link">JP 018EH</a></div><div>JUMP to 018EH to determine How Much RAM is in the System and then continue with startup.</div></div>
									<div class="assembly-row-combined"><div>0007H</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
								</div>
							</div>

							<br><h2 id="0007H" class="assembly-section-title">0008H - RST 08H
 Routine - This routine requires TWO parameters ... a value as the next 
bit and a byte offset.  DE is advanced to the next non-space and tests 
it against the value.  If there is no match, jumps to the return value 
PLUS the offset.  If there is match, jumps to the byte after the offset.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0008H</div><div>EX (SP),HL</div><div>Since
 this routine ultimately changes the place to which it returns, we need 
to get that address so EXchange the value stored in Register Pair HL 
with the value stored in Register Pair SP.</div></div>
									<div class="assembly-row-combined"><div>0009H</div><div>RST 28H</div><div>Call RST 28H to move DE to point to the next non-space character, with Register A holding that character.</div></div>
									<div class="assembly-row-combined"><div>000AH</div><div>CP (HL)</div><div>Compare
 the next non-space character (held in Register A) against the value 
held at the top of the stack (i..e, in the memory location pointed to by
 the value held in Register Pair HL).  Results: <ul><li>If Register A equals the value held in Register (HL), the Z FLAG is set.</li><li>If A &lt; (HL), the CARRY FLAG will be set.</li><li>if A &gt;= (HL), the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>000BH</div><div><a href="#0098H" class="memory-link">JP 0098H</a></div><div>Continue on with a JUMP to 0098H.</div></div>
								</div>
							</div>

							<br><h2 id="000EH" class="assembly-section-title">000EH - Display a CARRIAGE RETURN.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>000EH</div><div>LD A,0DH</div><div>Let Register A equal 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Routine then falls through to RST 10H which displays the character.</div></div>
								</div>
							</div>

							<br><h2 id="0010H" class="assembly-section-title">0010H - RST 10H Routine - This routine will send a character to the screen or to the cassette.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0010H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0011H</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0012H</div><div><a href="#0FF0H" class="memory-link">CALL 0FF0H</a></div><div>GOSUB to 0FF0H to check to see if the cassette motor is running.</div></div>
									<div class="assembly-row-combined"><div>0015H</div><div><a href="#0ACBH" class="memory-link">JP 0ACBH</a></div><div>JUMP to 0ACBH to send the byte held in Register A either to the screen or the cassette.</div></div>
								</div>
							</div>

							<br><h2 id="0018H" class="assembly-section-title">0018H - RST 18H Routine - This routine will parse an expression.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0018H</div><div><a href="#07ADH" class="memory-link">CALL 07ADH</a></div><div>GOSUB to 07ADH to parse an expressions.</div></div>
									<div class="assembly-row-combined"><div>001BH</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
									<div class="assembly-row-combined"><div>001CH</div><div><a href="#075DH" class="memory-link">JP 075DH</a></div><div>JUMP to 075DH to parse an optional relational expression ("<span class="code">&gt;</span>" "<span class="code">&lt;</span>" or "<span class="code">=</span>").</div></div>
									<div class="assembly-row-combined"><div>001FH</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0020H">0020H - RST 20H Routine - This routine will compare HL and DE.  NZ means no match, Z means match.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0020H - RST 20H Routine - This routine will compare HL and DE.  NZ means no match, Z means match.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0020H</div><div>LD A,H</div><div>Copy the contents of Register H into Register A.</div></div>
									<div class="assembly-row-combined"><div>0021H</div><div>CP D</div><div>Compare Register H (held in Register A) against Register D.  Results:<ul><li>If Register A equals the value held in Register D, the Z FLAG is set.</li><li>If A &lt; D, the CARRY FLAG will be set.</li><li>If A &gt;= D, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>0022H</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set, RETurn to the caller.</div></div>
									<div class="assembly-row-combined"><div>0023H</div><div>LD A,L</div><div>If we're here, then H matched D so let's keep going.  Copy the contents of Register L into Register A.</div></div>
									<div class="assembly-row-combined"><div>0024H</div><div>CP E</div><div>Compare Register L (held in Register A) against Register E.  Results:<ul><li>If Register A equals the value held in Register E, the Z FLAG is set.</li><li>If A &lt; E, the CARRY FLAG will be set.</li><li>If A &gt;= E, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>0025H</div><div>RET</div><div>Return to the caller.</div></div>
									<div class="assembly-row-combined"><div>0026H</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
									<div class="assembly-row-combined"><div>0027H</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0028H">0028H - RST 28H Routine<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>This routine will skip forward from DE until the first non-space character, with Register A holding that character.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0028H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
									<div class="assembly-row-combined"><div>0029H</div><div>CP 20H</div><div>Since the purpose of this routine is to skip over <span class="code">SPACE</span>, we compare the value held in Register A against 20H (ASCII: <span class="code">SPACE</span>). Results: If Register A equals <span class="code">SPACE</span>, the Z FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>002BH</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set, then we have a non-space held in A, so return to the caller.</div></div>
									<div class="assembly-row-combined"><div>002CH</div><div>INC DE</div><div>Otherwise, we still have a space so increment the value stored in Register Pair DE by 1.</div></div>
									<div class="assembly-row-combined"><div>002DH</div><div><a href="#0028H" class="memory-link">JP 0028H</a></div><div>Jump to 0028H to test that character.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0030H">0030H - RST 30H Routine<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>This routine will continue execution.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0030H</div><div>POP AF</div><div>Put the return address (which should be held at the top of the STACK) into Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0031H</div><div><a href="#08B3H" class="memory-link">CALL 08B3H</a></div><div>GOSUB to 08B3H to check if the next character is a ":" and if yes, jump to 08BAH to check for a <span class="code">CARRIAGE RETURN</span> and if not then jump to the middle of the execute next line routine.</div></div>
									<div class="assembly-row-combined"><div>0034H</div><div><a href="#08C9H" class="memory-link">JP 08C9H</a></div><div>Jump to 08C9H to display the "WHAT" error (Level 1 equivalent of a SYNTAX ERROR).</div></div>
									<div class="assembly-row-combined"><div>0037H</div><div>NOP</div><div>No Operation (Do Nothing).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0038H">0038H - RST 38H Routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>This routine will check a variable to make sure it exists.  If
 it doesn't, CARRY will be set.  If it does, HL will point to the 
variable and NC will be set.  Note that only variables A-Z and A(n) are 
valid in Level 1.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0038H</div><div>RST 28H</div><div>First,
 move to where the variable should be via a call to RST 28H to search DE
 until a non-space character is found, with Register A holding that 
character.</div></div>
									<div class="assembly-row-combined"><div>0039H</div><div>SUB 41H</div><div>Subtract the value 41H (ASCII: <span class="code">A</span>) from Register A to test to see if the character is less than a capital "A".</div></div>
									<div class="assembly-row-combined"><div>003BH</div><div>RET C</div><div>If
 the CARRY FLAG has been set then the variable (i.e., the non-space 
character) was less than A, meaning an invalid variable.  Return to the 
caller with the CARRY FLAG set.</div></div>
									<div class="assembly-row-combined"><div>003CH</div><div>CP 1AH</div><div>Compare
 the value held in Register A against 1AH (Decimal: 26) to see if the 
character is greater than a Control Character.  Results:<ul><li>If Register A equals 26, the Z FLAG is set.</li><li>If A &lt; 26, the CARRY FLAG will be set.</li><li>If A &gt;= 26, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>003EH</div><div>CCF</div><div>So
 at this point, a good variable will be less than 26 (with the CARRY 
FLAG set) and a bad variable will be greater than or equal to 26 (with 
the NC set).  This is backwards from an error, so invert the state of 
the CARRY FLAG, so that a bad variable has the CARRY set and a good 
variable has the NC set.</div></div>
									<div class="assembly-row-combined"><div>003FH</div><div>RET C</div><div>If the CARRY FLAG has been set, meaning we have a bad variable, return to the caller.</div></div>
									<div class="assembly-row-combined"><div>0040H</div><div>INC DE</div><div>If we're here then we have a good variable at DE.  Increment the value stored in Register Pair DE by 1.</div></div>
									<div class="assembly-row-combined"><div>0041H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).  This tests to see
 if the variable at DE is an "A" or not, as "A" is the only variable 
that can be an array in Level 1.</div></div>
									<div class="assembly-row-combined"><div>0042H</div><div><a href="#0082H" class="memory-link">JR NZ,0082H</a></div><div>If
 the NZ FLAG (Not Zero) has been set (meaning that the variable is not 
"A"), jump to 0082H to continue processing the single valid non-array 
variable.</div></div>
									<div class="assembly-row-combined"><div>0044H</div><div>RST 08H<br>28H<br><a href="#0081H" class="memory-link">3AH</a></div><div>Next
 we need to check for the array, which means a parenthesis.  We do this a
 call to RST 08H with parameters of "(" and an offset of 3AH.  RST 08H 
will move to the next non-space character and check it against 28H 
(which is a "(").  If there is no match, jump to the return (of the next
 instruction, i.e. 0047H) + 3AH instructions (which would be 0081H).</div></div>
									<div class="assembly-row-combined"><div>0047H</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>If
 we are here then the next character pointed to by DE is the subscript 
of an A() variable.  GOSUB to 080BH to determine that subscript as a 
non-negative integer.</div></div>
									<div class="assembly-row-combined"><div>004AH</div><div>INC HL</div><div>Now we need to position HL to point to the variable.  Increment the value stored in Register Pair HL by 1.</div></div>
									<div class="assembly-row-combined"><div>004BH</div><div>ADD HL,HL</div><div>Double HL.</div></div>
									<div class="assembly-row-combined"><div>004CH</div><div>ADD HL,HL</div><div>Double HL again!</div></div>
									<div class="assembly-row-combined"><div>004DH</div><div><a href="#01A2H" class="memory-link">JP C,01A2H</a></div><div>If
 the C FLAG (Carry) has been set because of all that math, then HL 
doesn't have a valid value anymore so display the "HOW?" error via a 
jump to 01A2H.</div></div>
									<div class="assembly-row-combined"><div>0050H</div><div>PUSH HL</div><div>If the CARRY FLAG didn't trip, then we have a valid pointer value in HL so save it to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0051H</div><div>RST 08H<br>29H<br><a href="#0089H" class="memory-link">35H</a></div><div>Next
 we need to check for close parenthesis.  We do this a call to RST 08H 
with parameters of ")" and an offset of 35H.  RST 08H will move to the 
next non-space character and check it against 29H (which is a ")").  If 
there is no match, jump to the return (of the next instruction, i.e. 
0054H) + 35H instructions (which would be 0089H).</div></div>
									<div class="assembly-row-combined"><div>0054H</div><div>POP HL</div><div>Restore HL from the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0055H</div><div>PUSH DE</div><div>Save the current pointer on the line being analyzed (held in Register Pair DE) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0056H</div><div>PUSH HL</div><div>Save the pointer to the variable (held in Register Pair HL) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0057H</div><div>LD HL,(406AH)</div><div>Fetch the value of the top of physical memory (held in memory location 406AH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>005AH</div><div>LD DE,(406CH)</div><div>Fetch the pointer to the top of user RAM (held in memory location 406CH) and store it into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>005EH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>005FH</div><div>SBC HL,DE</div><div>Subtract the top of user RAM and the CARRY FLAG from the top of physical memory, with the results into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0061H</div><div>POP DE</div><div>Restore the pointer to the variable (formerly held in Register Pair HL) from the top of the stack into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0062H</div><div>RST 20H</div><div>Compare HL and DE via a call to RST 20H - NZ means no match, Z means match.  If H=D but L &lt; E, then the C flag will be set.</div></div>
									<div class="assembly-row-combined"><div>0063H</div><div><a href="#0076H" class="memory-link">JP 0076H</a></div><div>Skip over the NMI handler routine and continue on via a jump to 0076H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0066H">0066H - Non-Maskable Interrupt Routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>This would be triggered on hitting the RESET BUTTON.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0066H</div><div>DI</div><div>Disable Interrupts.</div></div>
									<div class="assembly-row-combined"><div>0067H</div><div>LD SP,4200H</div><div>Set the Stack Pointer to 4200H.</div></div>
									<div class="assembly-row-combined"><div>006AH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>006BH</div><div>LD (4090H),A</div><div>Store the ZERO held in Register A into the cassette port status cache (held in memory location 4090H).</div></div>
									<div class="assembly-row-combined"><div>006EH</div><div>OUT (FFH),A</div><div>Send the ZERO held in Register A into the cassette port.</div></div>
									<div class="assembly-row-combined"><div>0070H</div><div>LD A,0CH</div><div>Let Register A equal 0CH (ASCII: Form Feed), which is essentially a CLS.</div></div>
									<div class="assembly-row-combined"><div>0072H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 0CH) to the cassette or screen via a RST 10 call.</div></div>
									<div class="assembly-row-combined"><div>0073H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Show the READY prompt via a JUMP to 01C9H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0076H">0076H - Continuation point for the RST 38H routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>At this point, HL has the current pointer to the line being 
examined is at the top of the stack, DE has the pointer to the variable,
 Z/NZ is set based on whether the location of the array variable is in 
or out of bounds, and if Register A is greater than Register E, the 
CARRY FLAG is set.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0076H</div><div><a href="#08F5H" class="memory-link">JP C,08F5H</a></div><div>If
 the C FLAG (Carry) has been set (meaning that DE &gt; HL) then we have a
 problem, so JUMP to 08F5H to display the "SORRY" error.</div></div>
									<div class="assembly-row-combined"><div>0079H</div><div>LD HL,(406AH)</div><div>Fetch the value of the top of physical memory (held in memory location 406AH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>007CH</div><div>SBC HL,DE</div><div>Subtracts
 the value stored in Register Pair DE (the pointer to the variable) and 
the carry flag from the value stored in Register Pair HL (the top of 
physical memory).</div></div>
									<div class="assembly-row-combined"><div>007EH</div><div>POP DE</div><div>Put the current pointer to the line being examined (held at the top of the STACK) back into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>007FH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>0080H</div><div>RET</div><div>Return to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0081H">0081H - Continuation point for the RST 38H routine"<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Jumped to if the variable is "A" and no "(" was found after 
it.  This routine will set HL to point to the RAM address which holds 
the variables "A" - "Z"</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0081H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0082H">0082H - Continuation point for the RST 38H routine".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Register A will contain 0-25, representing variables "A"-"Z".</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0082H</div><div>LD H,40H</div><div>Let Register H equal 40H to set the MSB to the variable list of 4000H (Variable A) through 4064H (Variable Z)</div></div>
									<div class="assembly-row-combined"><div>0084H<br>0085H</div><div>RLA<br>RLA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) two bit 
positions so that A will correspond to 00H (Variable A) to 64H (Variable
 Z)</div></div>
									<div class="assembly-row-combined"><div>0086H</div><div>LD L,A</div><div>Set the LSB of the Register Pair HL variable pointer to the offset calculated and held in Register A.</div></div>
									<div class="assembly-row-combined"><div>0087H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>0088H</div><div>RET</div><div>Return to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0089H">0089H - Jump to the routine to Display the "WHAT" error.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0089H</div><div><a href="#08C9H" class="memory-link">JP 08C9H</a></div><div>Jump to 08C9H to display the "WHAT" error.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="008CH">008CH - Subroutine to check to see if the character pointed to by Register Pair DE is, or is not, a digit (i.e., 0-9).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>If a digit is found, will return with Register A containing the digit and NC set, or the CARRY FLAG set otherwise.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>008CH</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
									<div class="assembly-row-combined"><div>008DH</div><div>CP 30H</div><div>Compare the value held in Register A against 30H (ASCII: <span class="code">0</span>). Results:<ul><li>If Register A equals <span class="code">0</span>, the Z FLAG is set.</li><li>If A &lt; <span class="code">0</span>, the CARRY FLAG will be set.</li><li>If A &gt;= <span class="code">0</span>, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>008FH</div><div>RET C</div><div>If the C FLAG (Carry) has been set then it's not a digit because it's below <span class="code">0</span>, so return to the caller with the CARRY FLAG set.</div></div>
									<div class="assembly-row-combined"><div>0090H</div><div>CP 3AH</div><div>Compare the value held in Register A against 3AH (ASCII: <span class="code">:</span>), which is 1 character higher than a <span class="code">9</span>. Results:<ul><li>If Register A equals <span class="code">:</span>, the Z FLAG is set.</li><li>If A &lt; <span class="code">:</span>, the CARRY FLAG will be set.</li><li>If A &gt;= <span class="code">:</span>, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>0092H</div><div>CCF</div><div>If
 we have a good character, the CARRY FLAG will have been set by the CP 
instruction. Since the CARRY FLAG being set is supposed to signal a bad 
character, we need to invert the state of the CARRY FLAG.</div></div>
									<div class="assembly-row-combined"><div>0093H</div><div>RET C</div><div>If the C FLAG (Carry) has been set then it's not a digit because it's above<span class="code">9</span>, so return to the caller with the CARRY FLAG set.</div></div>
									<div class="assembly-row-combined"><div>0094H</div><div>INC DE</div><div>If
 we are here then we have a good digit stored in Register A. Now a bit 
of cleanup. First advance the pointer on the line being examined (held 
in Register Pair DE) by 1 to point to the next character instead of the 
one we just examined.</div></div>
									<div class="assembly-row-combined"><div>0095H</div><div>AND 0FH</div><div>Cap
 the number at 15 by masking the value of Register A against 0FH 
(00001111). This has the effect of turning off bits 7,6,5,4, leaving 
only bits 3,2,1,0 active.</div></div>
									<div class="assembly-row-combined"><div>0097H</div><div>RET</div><div>Return to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="010AH">010AH - Continuation of the FLOATING POINT CONSTANT routine at 00A6H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Jumped here if we have a non-digit that isn't a ".", "E", or <span class="code">+</span>, or <span class="code">-</span>.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>010AH</div><div><a href="#0157H" class="memory-link">CALL 0157H</a></div><div>GOSUB to 0157H to zero out the integer accumulator.</div></div>
									<div class="assembly-row-combined"><div>010DH</div><div><a href="#008CH" class="memory-link">CALL 008CH</a></div><div>We
 need to verify that the character is a digit, so GOSUB to 008CH to 
check to see if the character pointed to by Register Pair DE is, or is 
not, a digit. Returns Register A containing the digit, or the CARRY FLAG
 set otherwise.</div></div>
									<div class="assembly-row-combined"><div>0110H</div><div><a href="#0120H" class="memory-link">JR C,0120H</a></div><div>If the CARRY FLAG has been set, and we do not have a digit, JUMP to 0120H.</div></div>
									<div class="assembly-row-combined"><div>0112H</div><div>SET 5,B</div><div>SET (i.e., set as 1) BIT 5 of Register B to indicate that we have found a digit in an exponent position.</div></div>
									<div class="assembly-row-combined"><div>0114H</div><div><a href="#015EH" class="memory-link">CALL 015EH</a></div><div>GOSUB
 to 015EH to accumulate the exponent's digit by multiplying the 
accumulator by 10 and then adding in A to the newly vacant one's spot. 
Routine will return a NZ SET if an overflow occurs from the 
accumulation.</div></div>
									<div class="assembly-row-combined"><div>0117H</div><div><a href="#01A2H" class="memory-link">JP NZ,01A2H</a></div><div>If the NZ FLAG (Not Zero) has been set, meaning we have an overflow, display the "HOW?" error via a JUMP to 01A2H.</div></div>
									<div class="assembly-row-combined"><div>011AH</div><div><a href="#010DH" class="memory-link">JR 010DH</a></div><div>JUMP to 010DH to parse the next character.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="011CH">011CH - Continuation of the FLOATING POINT CONSTANT routine at 00A6H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Jumped here if we have a non-digit that isn't a "." or an "E".</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>011CH</div><div>POP DE</div><div>Restore the current position on the line being evaluated from the top of the stack into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>011DH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>011EH</div><div><a href="#0137H" class="memory-link">JR 0137H</a></div><div>JUMP to 0137H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0120H">0120H - Continuation of the FLOATING POINT CONSTANT routine at 00A6H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Jumped here if we have started processing an exponent and then hit a non-digit.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0120H</div><div>BIT 5,B</div><div>Test
 Bit Number 5 of Register B to determine if we already have exponent 
digits.  Z FLAG will be set if that bit is 0, and NZ FLAG will be set if
 that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>0122H</div><div><a href="#011CH" class="memory-link">JR Z,011CH</a></div><div>If the Z FLAG (Zero) has been set and we have no exponent digits, JUMP to 011CH.</div></div>
									<div class="assembly-row-combined"><div>0124H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0125H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0126H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
									<div class="assembly-row-combined"><div>0127H</div><div>OR H</div><div>OR Register H against Register A.  The results are stored in Register A.</div></div>
									<div class="assembly-row-combined"><div>0128H</div><div><a href="#0151H" class="memory-link">JR NZ,0151H</a></div><div>The
 NZ will be set if either Register C or Register H is not zero.  If 
that's the case, then we have a problem (most likely an overflow) and 
the NZ FLAG (Not Zero) will have been set, JUMP to 0151H to swap the 
registers back and give a "HOW" error.</div></div>
									<div class="assembly-row-combined"><div>012AH</div><div>LD A,L</div><div>Copy the exponent (held in Register L) into Register A.</div></div>
									<div class="assembly-row-combined"><div>012BH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>012CH</div><div>BIT 7,A</div><div>Test
 Bit Number 7 of Register A to see if we have a large number of digits 
(meaning, over 128).  Z FLAG will be set if that bit is 0, and NZ FLAG 
will be set if that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>012EH</div><div><a href="#01A2H" class="memory-link">JP NZ,01A2H</a></div><div>If the NZ FLAG (Not Zero) has been set, display the "HOW?" error via a JUMP to 01A2H.</div></div>
									<div class="assembly-row-combined"><div>0131H</div><div>BIT 1,B</div><div>Test
 Bit Number 1 of Register B to see if we have found a exponent minus 
sign.  Z FLAG will be set if that bit is 0, and NZ FLAG will be set if 
that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>0133H</div><div><a href="#0137H" class="memory-link">JR Z,0137H</a></div><div>If the Z FLAG (Zero) has been set, JUMP to 0137H.</div></div>
									<div class="assembly-row-combined"><div>0135H</div><div>NEG</div><div>At this point, we have a valid exponent ... but its sign is wrong.  Negate the contents of Register A (which is the same as -A).</div></div>
									<div class="assembly-row-combined"><div>0137H</div><div>ADD A,C</div><div>LET Register A = Register A + Register C.</div></div>
									<div class="assembly-row-combined"><div>0138H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
									<div class="assembly-row-combined"><div>0139H</div><div><a href="#014EH" class="memory-link">JR Z,014EH</a></div><div>If
 the Z FLAG (Zero) has been set, then Register A, after all that, is 
still zero -- so we were given an E00.  Since that's not relevant, JUMP 
away to 014EH to exit the routine.</div></div>
									<div class="assembly-row-combined"><div>013BH</div><div>BIT 7,A</div><div>Test
 Bit Number 7 of Register A to see if we have a large number of digits 
(meaning, over 128).  Z FLAG will be set if that bit is 0, and NZ FLAG 
will be set if that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>013DH</div><div><a href="#0146H" class="memory-link">JR Z,0146H</a></div><div>If the Z FLAG (Zero) has been set then we have a POSITIVE exponent to process ... JUMP to 0146H.</div></div>
									<div class="assembly-row-combined"><div>013FH</div><div>INC A</div><div>INCrement the value stored in Register A by 1.</div></div>
									<div class="assembly-row-combined"><div>0140H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0141H</div><div><a href="#0C95H" class="memory-link">CALL 0C95H</a></div><div>GOSUB to 0C95H to divide the floating point stack by 10.</div></div>
									<div class="assembly-row-combined"><div>0144H</div><div><a href="#014BH" class="memory-link">JR 014BH</a></div><div>JUMP to 014BH.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0146H">0146H - Continuation of the FLOATING POINT CONSTANT routine at 00A6H; jumped here if to process a POSITIVE exponent.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0146H</div><div>DEC A</div><div>DECrement the value stored in Register A by 1.</div></div>
									<div class="assembly-row-combined"><div>0147H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0148H</div><div><a href="#0C84H" class="memory-link">CALL 0C84H</a></div><div>GOSUB to 0C84H to multiply the floating point stack by 10.</div></div>
									<div class="assembly-row-combined"><div>014BH</div><div>POP AF</div><div>Put the value held at the top of the stack into Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>014CH</div><div><a href="#0138H" class="memory-link">JR 0138H</a></div><div>JUMP to 0138H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="014EH">014EH - Continuation of the FLOATING POINT ROUTINE at 00A6H; exit the floating point routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>014EH</div><div>BIT 6,B</div><div>Test
 Bit Number 6 of Register B to see if we had found any digits.  Z FLAG 
will be set if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>0150H</div><div>RET</div><div>RETurn to the caller - If Z is set, then we had a bad value.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0151H">0151H - Exit routine with HOW error.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0151H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0152H</div><div><a href="#01A2H" class="memory-link">JP 01A2H</a></div><div>Display the "HOW?" error via a JUMP to 01A2H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0155H">0155H - Routine to clear parse flags and prepare for next parsing.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0155H</div><div>RES 6,B</div><div>RESet (i.e., set as 0) BIT 6 of Register B to zero out the flag as to whether we have found a digit yet or not.</div></div>
									<div class="assembly-row-combined"><div>0157H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0158H</div><div>LD L,00H</div><div>Let Register L equal 00H.</div></div>
									<div class="assembly-row-combined"><div>015AH</div><div>LD H,L</div><div>Copy a 0 (i.e., the contents of Register L) into Register H.</div></div>
									<div class="assembly-row-combined"><div>015BH</div><div>LD C,L</div><div>Copy a 0 (i.e., the contents of Register L) into Register C.</div></div>
									<div class="assembly-row-combined"><div>015CH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>015DH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0155H">0155H - Continuation of the FLOATING POINT CONSTANT routine at 00A6H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>Clear out H', L', C', and Bit 6 of Register B' in anticipation of starting to parse.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0155H</div><div>RES 6,B</div><div>RESet (i.e., set as 0) BIT 6 of Register B to zero out the flag as to whether we have found a digit yet or not.</div></div>
									<div class="assembly-row-combined"><div>0157H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0158H</div><div>LD L,00H</div><div>Let Register L equal 00H.</div></div>
									<div class="assembly-row-combined"><div>015AH</div><div>LD H,L</div><div>Copy a 0 (i.e., the contents of Register L) into Register H.</div></div>
									<div class="assembly-row-combined"><div>015BH</div><div>LD C,L</div><div>Copy a 0 (i.e., the contents of Register L) into Register C.</div></div>
									<div class="assembly-row-combined"><div>015CH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>015DH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="015EH">015EH - Continuation of the FLOATING POINT CONSTANT routine at 00A6H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p> This basically multiplies the 24 bit digit represented by 
C'H'L' by 10 and then adds in A' with overflow going to B' thus leaving a
 32 bit result of B'C'H'L'..  Specifically it accumulates the digit by 
multiplying the accumulator by 10 and then adding in A to the newly 
vacant one's spot. Routine will return a NZ SET if an overflow occurs 
from the accumulation. On entry, the REGULAR REGISTER SET is active.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>015EH</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>015FH</div><div>EXX</div><div>Set the ALTERNATE REGISTER SET as active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0160H<br>0161H</div><div>LD D,H<br>LD E,L</div><div>Let Register Pair DE' = Register Pair HL'.</div></div>
									<div class="assembly-row-combined"><div>0162H</div><div>LD A,C</div><div>Copy the contents of Register C' into Register A'.</div></div>
									<div class="assembly-row-combined"><div>0163H</div><div>LD B,00H</div><div>Let
 Register B' equal 00H.  Register B' tracks a whole lot of status bits 
for the floating point routine.  Bit 0=Decimal point has been found, Bit
 1 = Exponent with a Minus Sign has been Found, Bit 5 = Digits in an 
exponent have been found, Bit 6 = A digit has been found, and Bit 7 = A 
large number of digits (more than 127) have been found.</div></div>
									<div class="assembly-row-combined"><div>0165H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0166H</div><div>ADD HL,HL</div><div>LET Register Pair HL = Register Pair HL + Register HL.</div></div>
									<div class="assembly-row-combined"><div>0167H</div><div>RL C</div><div>Rotate
 the bits of Register C left 1 position, with bit 7 going to CARRY and 
CARRY going to bit 0. This effectively multiplies Register C by 2.</div></div>
									<div class="assembly-row-combined"><div>0169H</div><div>RL B</div><div>Rotate
 the bits of Register B left 1 position, with bit 7 going to CARRY and 
CARRY going to bit 0. This effectively multiplies Register B by 2.</div></div>
									<p class="debug-note">So at this point HL, C, and B have all been multiplied by 2.</p>
									<div class="assembly-row-combined"><div>016BH</div><div>ADD HL,HL</div><div>LET Register Pair HL = Register Pair HL + Register HL.</div></div>
									<div class="assembly-row-combined"><div>016CH</div><div>RL C</div><div>Rotate the bits of Register C left 1 position similar to above multiplication.</div></div>
									<div class="assembly-row-combined"><div>016EH</div><div>RL B</div><div>Rotate the bits of Register B left 1 position similar to above multiplication.</div></div>
									<p class="debug-note">So at this point HL, C, and B have all been multiplied by 4 total.</p>
									<div class="assembly-row-combined"><div>0170H</div><div>ADD HL,DE</div><div>LET Register Pair HL = Register Pair HL + Register DE.</div></div>
									<div class="assembly-row-combined"><div>0171H</div><div>ADC A,C</div><div>LET Register A = Register A + Register C with carry. Now Register A = Register C * 5.</div></div>
									<div class="assembly-row-combined"><div>0172H</div><div>LD C,A</div><div>Save Register C * 5 to Register C.</div></div>
									<div class="assembly-row-combined"><div>0173H</div><div>LD A,00H</div><div>Set Register A to 00H.</div></div>
									<div class="assembly-row-combined"><div>0175H</div><div>ADC A,B</div><div>LET Register A = Register A + Register B with carry. Now Register A = Register B * 5.</div></div>
									<div class="assembly-row-combined"><div>0176H</div><div>LD B,A</div><div>Save Register B * 5 to Register B.</div></div>
									<p class="debug-note">So at this point HL, C, and B have all been multiplied by 5 total.</p>
									<div class="assembly-row-combined"><div>0177H</div><div>POP AF</div><div>Restore the original value of C into A from the stack.</div></div>
									<div class="assembly-row-combined"><div>0178H</div><div>ADD HL,HL</div><div>Double Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0179H</div><div>RL C</div><div>Rotate bits of Register C left once more.</div></div>
									<div class="assembly-row-combined"><div>017BH</div><div>RL B</div><div>Rotate bits of Register B left once more.</div></div>
									<p class="debug-note">So at this point HL, C, and B have all been multiplied by 10 total.</p>
									<div class="assembly-row-combined"><div>017DH</div><div>EX AF,AF'</div><div>Exchange value stored in Register Pair AF' with AF.</div></div>
									<p class="debug-note">The rest of the routine adds Register A to Register Pairs HL and BC.</p>
									<div class="assembly-row-combined"><div>017EH</div><div>ADD A,L</div><div>LET Register A = Register A + Register L.</div></div>
									<div class="assembly-row-combined"><div>017FH</div><div>LD L,A</div><div>Copy result to Register L.</div></div>
									<div class="assembly-row-combined"><div>0180H</div><div>LD A,00H</div><div>Set Register A to 00H.</div></div>
									<div class="assembly-row-combined"><div>0182H</div><div>ADC A,H</div><div>LET Register A = Register A + Register H with carry.</div></div>
									<div class="assembly-row-combined"><div>0183H</div><div>LD H,A</div><div>Copy result to Register H.</div></div>
									<div class="assembly-row-combined"><div>0184H</div><div>LD A,00H</div><div>Set Register A to 00H.</div></div>
									<div class="assembly-row-combined"><div>0186H</div><div>ADC A,C</div><div>LET Register A = Register A + Register C with carry.</div></div>
									<div class="assembly-row-combined"><div>0187H</div><div>LD C,A</div><div>Copy result to Register C.</div></div>
									<div class="assembly-row-combined"><div>0188H</div><div>LD A,00H</div><div>Set Register A to 00H.</div></div>
									<div class="assembly-row-combined"><div>018AH</div><div>ADC A,B</div><div>LET Register A = Register A + Register B with carry.</div></div>
									<div class="assembly-row-combined"><div>018BH</div><div>LD B,A</div><div>Copy result to Register B.</div></div>
									<div class="assembly-row-combined"><div>018CH</div><div>EXX</div><div>Exchange BC, DE, HL with BC', DE', HL'. AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>018DH</div><div>RET</div><div>Return to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="018EH">018EH - 
Determine How Much RAM is in the System by fetching, complementing, 
storing, and testing each byte from FFFFH downwards.  HL = 00FFH on 
entry.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>018EH - Determine How Much RAM is in the System by fetching, 
complementing, storing, and testing each byte from FFFFH downwards.  HL =
 00FFH on entry.</p>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>018EH</div><div>DEC H</div><div>DECrement the value stored in Register H by 1.  On the first run this turns HL's 00FFH into FFFFH.</div></div>
									<div class="assembly-row-combined"><div>018FH</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>0190H</div><div>CPL</div><div>Reverse each bit in Register A (which is the same as NOT).</div></div>
									<div class="assembly-row-combined"><div>0191H</div><div>LD (HL),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0192H</div><div>XOR (HL)</div><div>eXclusive
 OR the value stored at (HL) against Register A.  Why XOR the value 
against itself (since the value at HL was just set as A) when XORing a 
value against itself produces a Zero?  Well, the RAM location might not 
exist, which is the only way that XOR would produce a NZ result.</div></div>
									<div class="assembly-row-combined"><div>0193H</div><div><a href="#018EH" class="memory-link">JR NZ,018EH</a></div><div>If
 the NZ FLAG (Not Zero) has been set then the RAM location pointed to by
 HL didn't accept the value, so LOOP back to 018EH to keep reducing the 
page of RAM to test (so FFFF to FEFF to FDFF ...).</div></div>
									<div class="assembly-row-combined"><div>0195H</div><div>LD (406AH),HL</div><div>If
 we are here, then we hit the first tested address that stored a value. 
 Store THAT address (held in Register Pair HL) into memory location 
406AH (which is the top of physical memory).</div></div>
									<div class="assembly-row-combined"><div>0198H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>0199H</div><div>LD (4090H),A</div><div>Store a 0 (held in Register A) into the cassette port status cache (held at memory location 4090H).</div></div>
									<div class="assembly-row-combined"><div>019CH</div><div>LD SP,4200H</div><div>Set the stack pointer to 4200H / (Decimal: 16896).</div></div>
									<div class="assembly-row-combined"><div>019FH</div><div><a href="#037BH" class="memory-link">JP 037BH</a></div><div>JUMP to 037BH to clear the screen and continue with the startup process.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="01A2H">01A2H - Display the "HOW?" error.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>01A2H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>01A3H</div><div>LD DE,01A9H</div><div>Let Register Pair DE equal 01A9H to point to the HOW? message.</div></div>
									<div class="assembly-row-combined"><div>01A6H</div><div><a href="#08CDH" class="memory-link">JP 08CDH</a></div><div>JUMP to 08CDH.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="01A9H">01A9H - MESSAGE STORAGE AREA.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>01A9H</div><div>"HOW?" + 0DH</div><div></div></div>
									<div class="assembly-row-combined"><div>01AEH</div><div>"READY" + 0DH</div><div></div></div>
									<div class="assembly-row-combined"><div>01B4H</div><div>"WHAT?" + 0DH</div><div></div></div>
									<div class="assembly-row-combined"><div>01BAH</div><div>"SORRY" + 0DH</div><div></div></div>
									<div class="assembly-row-combined"><div>01C0H</div><div>"BREAK AT"</div><div></div></div>
									<div class="assembly-row-combined"><div>01C8H</div><div>DEFB 00H</div><div></div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="01C9H">01C9H - BASIC's READY Entry Point.  If JUMPed here, the BASIC RUN STATE is cleared.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>01C9H</div><div>LD SP,4200H</div><div>Set the stack pointer to 4200H.</div></div>
									<div class="assembly-row-combined"><div>01CCH</div><div><a href="#0FE4H" class="memory-link">CALL 0FE4H</a></div><div>GOSUB to 0FE4H to turn off the cassette motor.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="01CFH">01CFH - BASIC's READY Alternate Entry Point.  If JUMPed here, the BASIC RUN STATE is not affected.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>01CFH</div><div><a href="#000EH" class="memory-link">CALL 000EH</a></div><div>GOSUB to 000EH to display a CARRIAGE RETURN.</div></div>
									<div class="assembly-row-combined"><div>01D2H</div><div>LD DE,01AEH</div><div>Let Register Pair DE equal 01AEH, which is the message storage area for the READY prompt.</div></div>
									<div class="assembly-row-combined"><div>01D5H</div><div><a href="#094FH" class="memory-link">CALL 094FH</a></div><div>GOSUB to 094FH to display the message pointed to by Register Pair DE, returning once a 00H is found.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="01D8H">01D8H - Process a line of code in a READY loop<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>01D8H</div><div>LD SP,4200H</div><div>Set the stack pointer to 4200H.</div></div>
									<div class="assembly-row-combined"><div>01DBH</div><div><a href="#0239H" class="memory-link">CALL 0239H</a></div><div>GOSUB
 to 0239H to clear the 10 bytes starting at 409DH and set Register Pair 
DE to 4200.  409D is the pointer to the line where a STOP statement was 
activated, 409F is the pointer to the current line being executed, 40A1 
is the pointer for the READ statement, 40A3 is the BASIC Stack Pointer 
location, and 40A5 is the pointer for the current FOR variable.</div></div>
									<div class="assembly-row-combined"><div>01DEH</div><div>LD IX,40F4H</div><div>Let
 Special Index Register Pair IX, which is used in the floating point 
math routines, equal 40F4H, which is the bottom of floating point stack.
  Each entry is 5 bytes consisting of LSB, Middle, MSB (with Bit 7 set),
 Exponent and Sign (in Bit 7)</div></div>
									<div class="assembly-row-combined"><div>01E2H</div><div><a href="#08FAH" class="memory-link">CALL 08FAH</a></div><div>GOSUB to 08FAH to fetch a line of input.</div></div>
									<div class="assembly-row-combined"><div>01E5H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>01E6H</div><div>LD DE,40ACH</div><div>Let Register Pair DE equal 40ACH.<br><b>NOTE:</b> 40ACH is the storage location for buffer for command input AND the print output to cassette.</div></div>
									<div class="assembly-row-combined"><div>01E9H</div><div><a href="#0EC4H" class="memory-link">CALL 0EC4H</a></div><div>The
 first thing we should find is a line number, so GOSUB to 0EC4H to parse
 an integer into Register Pair HL.  Note, this moves DE forward to point
 to the first non-blank character.</div></div>
									<div class="assembly-row-combined"><div>01ECH</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L.  Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
									<div class="assembly-row-combined"><div>01EEH</div><div>POP BC</div><div>Restore the prior contents of Register Pair DE into Register Pair BC.</div></div>
									<div class="assembly-row-combined"><div>01EFH</div><div><a href="#0340H" class="memory-link">JP Z,0340H</a></div><div>The
 flag is currently set by the OR above.  If the value is 0, then we are 
on the command line instead of being inside a program.  So ... if the Z 
FLAG (Zero) has been set, JUMP to 0340H.</div></div>
									<div class="assembly-row-combined"><div>01F2H</div><div>DEC DE</div><div>If
 we are here, then we are parsing a line in a program.  DECrement the 
value stored in Register Pair DE by 1 to go back to the second number in
 the 2 byte line number (as DE was moved forward in the call to 0EC4H).</div></div>
									<div class="assembly-row-combined"><div>01F3H</div><div>LD A,H</div><div>Copy the second byte of the line number (held in Register H) into Register A.</div></div>
									<div class="assembly-row-combined"><div>01F4H</div><div>LD (DE),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>01F5H</div><div>DEC DE</div><div>DECrement the value stored in Register Pair DE by 1 to point DE to the first number in the 2 byte line number.</div></div>
									<div class="assembly-row-combined"><div>01F6H</div><div>LD A,L</div><div>Copy the first byte of the line number (held in Register L) into Register A.</div></div>
									<div class="assembly-row-combined"><div>01F7H</div><div>LD (DE),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>01F8H</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>01F9H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (currently pointing to the line number of the line to be parsed) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>01FAH</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
									<div class="assembly-row-combined"><div>01FBH</div><div>SUB E</div><div>LET Register A = Register C - Register E.</div></div>
									<div class="assembly-row-combined"><div>01FCH</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>01FDH</div><div><a href="#092AH" class="memory-link">CALL 092AH</a></div><div>GOSUB
 to 092AH to find the line in RAM which matches the line number pointed 
to by Register Pair HL.  Note: A jump to 092AH resets DE.  To do the 
routine while preserving DE, jump instead to 092DH.</div></div>
									<p class="debug-note">The line number has been found, so we will overwrite/delete the old line.</p>
									<div class="assembly-row-combined"><div>0200H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0201H</div><div><a href="#0213H" class="memory-link">JR NZ,0213H</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0213H.</div></div>
									<div class="assembly-row-combined"><div>0203H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0204H</div><div><a href="#0945H" class="memory-link">CALL 0945H</a></div><div>GOSUB to 0945H to scan the entire line.</div></div>
									<div class="assembly-row-combined"><div>0207H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
									<div class="assembly-row-combined"><div>0208H</div><div>LD HL,(406CH)</div><div>Fetch the pointer to the top of used RAM (held in memory location 406CH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>020BH</div><div><a href="#0A6FH" class="memory-link">CALL 0A6FH</a></div><div>GOSUB to 0A6FH to copy the bytes held at (DE) to (BC), backwards, until DE = HL.</div></div>
									<div class="assembly-row-combined"><div>020EH</div><div>LD H,B<br>LD L,C</div><div>Copy the contents of Register Pair BC into Register Pair HL because there is no LD (xxxx),BC command in the Z-80!</div></div>
									<div class="assembly-row-combined"><div>0210H</div><div>LD (406CH),HL</div><div>Now that we used up some RAM, set the NEW top of used RAM to HL by putting HL into 406CH (which points to the top of used RAM).</div></div>
									<p class="debug-note">If we are here we will add a new line to the program UNLESS it was just a line number, in which case we delete the line.</p>
									<div class="assembly-row-combined" id="0213H"><div>0213H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
									<div class="assembly-row-combined"><div>0214H</div><div>LD HL,(406CH)</div><div>Fetch the pointer to the top of used RAM (held in memory location 406CH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0217H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0218H</div><div>PUSH HL</div><div>Save
 the contents of Register Pair HL (which should be holding the pointer 
to the end of the line to be moved) to the top of the stack.  This will 
be POPed into DE at 022EH.</div></div>
									<div class="assembly-row-combined"><div>0219H</div><div>CP 03H</div><div>Compare
 the value held in Register A against the end-of-line terminator 03H.  
Results:  If Register A equals 03H, the Z FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>021BH</div><div><a href="#01D8H" class="memory-link">JR Z,01D8H</a></div><div>If
 the Z FLAG (Zero) has been set then we are at EOL delimiter, so JUMP to
 the top of the READY LOOP (minus the READY prompt) at 01D8H to 
infinitely process another line of code.</div></div>
									<p class="debug-note">If we are here then we did not hit the 
EOL delimiter. The next bunch of calls and math is first designed to 
make sure there is enough RAM to store the whole line, so HL is set up 
to be the highest RAM location needed to store the line.</p>
									<div class="assembly-row-combined"><div>021DH</div><div>ADD A,L</div><div>LET Register A = Register A + Register L.</div></div>
									<div class="assembly-row-combined"><div>021EH</div><div>LD L,A</div><div>Copy the contents of Register A into Register L.  These 2 commands are basically HL = HL + A.</div></div>
									<div class="assembly-row-combined"><div>021FH</div><div>LD A,00H</div><div>Let Register A equal 00H.</div></div>
									<div class="assembly-row-combined"><div>0221H</div><div>ADC A,H</div><div>LET Register A = Register A + Register H.</div></div>
									<div class="assembly-row-combined"><div>0222H</div><div>LD H,A</div><div>Copy the contents of Register A into Register H.</div></div>
									<div class="assembly-row-combined"><div>0223H</div><div>LD DE,(406AH)</div><div>Fetch the value of the top of physical memory (held in memory location 406AH) and store it into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0227H</div><div>RST 20H</div><div>Call
 the routine at RST 20H to compare HL (the highest RAM address needed to
 store the line) and DE (the highest possible RAM location). Results: NZ
 means no match, Z means match. If H=D but L &lt; E, then the C flag 
will be set.</div></div>
									<div class="assembly-row-combined"><div>0228H</div><div><a href="#08F4H" class="memory-link">JP NC,08F4H</a></div><div>Since
 the RST 20H in the prior instruction was testing to see if the byte we 
need to store in RAM exceeds the amount of free RAM or not, a NC means 
we are out of RAM. If the NC FLAG (No Carry) has been set, JUMP to 08F4H
 to display the "WHAT" error.</div></div>
									<div class="assembly-row-combined"><div>022BH</div><div>LD (406CH),HL</div><div>If
 we are here, then we still had enough RAM left and BC remains untouched
 so that it still points to the starting location of the text to move 
via the call at 0A77H. We still need to set up DE and HL for that call, 
so store the value held in Register Pair HL into memory location 406CH 
(which points to the top of used RAM), as HL is where the bytes from 
(BC) to (DE) will be moved to.</div></div>
									<div class="assembly-row-combined"><div>022EH</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>022FH</div><div><a href="#0A77H" class="memory-link">CALL 0A77H</a></div><div>GOSUB to 0A77H to copy the bytes, backwards, from BC through DE to HL.</div></div>
									<div class="assembly-row-combined"><div>0232H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0233H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0234H</div><div><a href="#0A6FH" class="memory-link">CALL 0A6FH</a></div><div>GOSUB to 0A6FH to copy the bytes held at (DE) to (BC), backwards, until DE = HL.</div></div>
									<div class="assembly-row-combined"><div>0237H</div><div><a href="#01D8H" class="memory-link">JR 01D8H</a></div><div>Jump to the top of the READY LOOP (minus the READY prompt) at 01D8H to infinitely process another line of code.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0239H">0239H - Clear the 10 bytes from 409DH to 40A6H and set Register Pair DE to 4200H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0239H</div><div>LD B,0AH</div><div>Let Register B equal 0AH (Decimal: 10) for a DJNZ loop of 10 iterations.</div></div>
									<div class="assembly-row-combined"><div>023BH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>023CH</div><div>LD HL,409DH</div><div>Let
 Register Pair HL equal 409DH, which is the parse pointer saved when a 
STOP command is executed (current line being executed).</div></div>
									<div class="assembly-row-combined" id="023FH"><div>023FH</div><div>LD (HL),00H</div><div>Store 00H at the memory location pointed to by HL, setting current line number to 0000.</div></div>
									<div class="assembly-row-combined"><div>0241H</div><div>INC HL</div><div>Increment Register Pair HL by 1.</div></div>
									<div class="assembly-row-combined"><div>0242H</div><div><a href="#023FH" class="memory-link">DJNZ 023FH</a></div><div>Loop back to 023FH, decrementing B each time, until B reaches zero.</div></div>
									<div class="assembly-row-combined"><div>0244H</div><div>LD DE,4200H</div><div>Set Register Pair DE to 4200H.</div></div>
									<div class="assembly-row-combined"><div>0247H</div><div>POP HL</div><div>Restore previous value of Register Pair HL from the stack.</div></div>
									<div class="assembly-row-combined"><div>0248H</div><div>RET</div><div>Return to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0249H">0249H - RESERVED WORD LOOKUP/VECTOR TABLE.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0249H</div><div>DEFM "LIST"</div><div></div></div>
									<div class="assembly-row-combined"><div>024DH</div><div>DEFW 8401H</div><div>The entry point for the <span class="code">LIST</span> command is <a href="#0401H" class="memory-link">0401H</a>.</div></div>
									<div class="assembly-row-combined"><div>024FH</div><div>DEFM "RUN"</div><div></div></div>
									<div class="assembly-row-combined"><div>0251H</div><div>DEFW 838CH</div><div>The entry point for the <span class="code">RUN</span> command is <a href="#038CH" class="memory-link">038CH</a>.</div></div>
									<div class="assembly-row-combined"><div>0249H</div><div>DEFM "NEW"</div><div></div></div>
									<div class="assembly-row-combined"><div>0257H</div><div>DEFW 8378H</div><div>The entry point for the <span class="code">NEW</span> command is <a href="#0378H" class="memory-link">0378H</a>.</div></div>
									<div class="assembly-row-combined"><div>0259H</div><div>DEFM "CONT"</div><div></div></div>
									<div class="assembly-row-combined"><div>025DH</div><div>DEFW 83EBH</div><div>The entry point for the <span class="code">CONT</span> command is <a href="#03EBH" class="memory-link">03EBH</a>.</div></div>
									<div class="assembly-row-combined"><div>025FH</div><div>DEFM "CLOAD"</div><div></div></div>
									<div class="assembly-row-combined"><div>0264H</div><div>DEFW 8EE9H</div><div>The entry point for the <span class="code">CLOAD</span> command is <a href="#0EE9H" class="memory-link">0EE9H</a>.</div></div>
									<div class="assembly-row-combined"><div>0266H</div><div>DEFM "CSAVE"</div><div></div></div>
									<div class="assembly-row-combined"><div>026BH</div><div>DEFW 8F3BH</div><div>The entry point for the <span class="code">CSAVE</span> command is <a href="#0F3BH" class="memory-link">0F3BH</a>.</div></div>
									<div class="assembly-row-combined"><div>026DH</div><div>DEFM "NEXT"</div><div></div></div>
									<div class="assembly-row-combined"><div>0271H</div><div>DEFW 85A3H</div><div>The entry point for the <span class="code">NEXT</span> command is <a href="#05A3H" class="memory-link">05A3H</a>.</div></div>
									<div class="assembly-row-combined"><div>0273H</div><div>DEFM "LET"</div><div></div></div>
									<div class="assembly-row-combined"><div>0276H</div><div>DEFW 86B8H</div><div>The entry point for the <span class="code">LET</span> command is <a href="#06B8H" class="memory-link">06B8H</a>.</div></div>
									<div class="assembly-row-combined"><div>0278H</div><div>DEFM "INPUT"</div><div></div></div>
									<div class="assembly-row-combined"><div>027DH</div><div>DEFW 8623H</div><div>The entry point for the <span class="code">INPUT</span> command is <a href="#0623H" class="memory-link">0623H</a>.</div></div>
									<div class="assembly-row-combined"><div>027FH</div><div>DEFM "IF"</div><div></div></div>
									<div class="assembly-row-combined"><div>0281H</div><div>DEFW 85FBH</div><div>The entry point for the <span class="code">IF</span> command is <a href="#05FBH" class="memory-link">05FBH</a>.</div></div>
									<div class="assembly-row-combined"><div>0283H</div><div>DEFM "ON"</div><div></div></div>
									<div class="assembly-row-combined"><div>0285H</div><div>DEFW 84FEH</div><div>The entry point for the <span class="code">ON</span> command is <a href="#04FEH" class="memory-link">04FEH</a>.</div></div>
									<div class="assembly-row-combined"><div>0287H</div><div>DEFM "GOTO"</div><div></div></div>
									<div class="assembly-row-combined"><div>028BH</div><div>DEFW 83B5H</div><div>The entry point for the <span class="code">GOTO</span> command is <a href="#03B5H" class="memory-link">03B5H</a>.</div></div>
									<div class="assembly-row-combined"><div>028DH</div><div>DEFM "GOSUB"</div><div></div></div>
									<div class="assembly-row-combined"><div>0292H</div><div>DEFB 84C4H</div><div>The entry point for the <span class="code">GOSUB</span> command is <a href="#04C4H" class="memory-link">04C4H</a>.</div></div>
									<div class="assembly-row-combined"><div>0294H</div><div>DEFM "RESET"</div><div></div></div>
									<div class="assembly-row-combined"><div>0299H</div><div>DEFB 8838H</div><div>The entry point for the <span class="code">RESET</span> command is <a href="#0838H" class="memory-link">0838H</a>.</div></div>
									<div class="assembly-row-combined"><div>029BH</div><div>DEFM "RETURN"</div><div></div></div>
									<div class="assembly-row-combined"><div>02A1H</div><div>DEFB 84E6H</div><div>The entry point for the <span class="code">RETURN</span> command is <a href="#04E6H" class="memory-link">04E6H</a>.</div></div>
									<div class="assembly-row-combined"><div>02A3H</div><div>DEFM "READ"</div><div></div></div>
									<div class="assembly-row-combined"><div>02A7H</div><div>DEFB 86F9H</div><div>The entry point for the <span class="code">READ</span> command is <a href="#06F9H" class="memory-link">06F9H</a>.</div></div>
									<div class="assembly-row-combined"><div>02A9H</div><div>DEFM "RESTORE"</div><div></div></div>
									<div class="assembly-row-combined"><div>02B0H</div><div>DEFB 86CDH</div><div>The entry point for the <span class="code">RESTORE</span> command is <a href="#06CDH" class="memory-link">06CDH</a>.</div></div>
									<div class="assembly-row-combined"><div>02B2H</div><div>DEFM "REM"</div><div></div></div>
									<div class="assembly-row-combined"><div>02B5H</div><div>DEFB 85F6H</div><div>The entry point for the <span class="code">REM</span> command is <a href="#05F6H" class="memory-link">05F6H</a>.</div></div>
									<div class="assembly-row-combined"><div>0287H</div><div>DEFM "DATA"</div><div></div></div>
									<div class="assembly-row-combined"><div>02BBH</div><div>DEFB 85F6H</div><div>The entry point for the <span class="code">DATA</span> command is <a href="#05F6H" class="memory-link">05F6H</a>.</div></div>
									<div class="assembly-row-combined"><div>02BDH</div><div>DEFM "FOR"</div><div></div></div>
									<div class="assembly-row-combined"><div>02C0H</div><div>DEFB 8546H</div><div>The entry point for the <span class="code">FOR</span> command is <a href="#0546H" class="memory-link">0546H</a>.</div></div>
									<div class="assembly-row-combined"><div>02C2H</div><div>DEFM "PRINT"</div><div></div></div>
									<div class="assembly-row-combined"><div>02C7H</div><div>DEFB 842FH</div><div>The entry point for the <span class="code">PRINT</span> command is <a href="#042FH" class="memory-link">042FH</a>.</div></div>
									<div class="assembly-row-combined"><div>02C9H</div><div>DEFM "SET"</div><div></div></div>
									<div class="assembly-row-combined"><div>02CCH</div><div>DEFB 883CH</div><div>The entry point for the <span class="code">SET</span> command is <a href="#083CH" class="memory-link">083CH</a>.</div></div>
									<div class="assembly-row-combined"><div>02CEH</div><div>DEFM "STOP"</div><div></div></div>
									<div class="assembly-row-combined"><div>02D2H</div><div>DEFB 83C5H</div><div>The entry point for the <span class="code">STOP</span> command is <a href="#03C5H" class="memory-link">03C5H</a>.</div></div>
									<div class="assembly-row-combined"><div>02D4H</div><div>DEFM "END"</div><div></div></div>
									<div class="assembly-row-combined"><div>02D7H</div><div>DEFB 8387H</div><div>The entry point for the <span class="code">END</span> command is <a href="#0387H" class="memory-link">0387H</a>.</div></div>
									<div class="assembly-row-combined"><div>02D9H</div><div>DEFM "CLS"</div><div></div></div>
									<div class="assembly-row-combined"><div>02DCH</div><div>DEFB 84B5H</div><div>The entry point for the <span class="code">CLS</span> command is <a href="#04B5H" class="memory-link">04B5H</a>.</div></div>
									<div class="assembly-row-combined"><div>02DEH</div><div>DEFB 86B3H</div><div>That's
 the end of the single command reserved words.  If none of the above 
reserved words were found, JUMP to 06B3H, which will process a variable 
assignment.</div></div>
									<div class="assembly-row-combined"><div>02E0H</div><div>"GOTO"</div><div></div></div>
									<div class="assembly-row-combined"><div>02E4H</div><div>DEFW 850FH</div><div>The entry point for the <span class="code">ON x GOTO</span> command is <a href="#050FH" class="memory-link">050FH</a>.</div></div>
									<div class="assembly-row-combined"><div>02E6H</div><div>"GOSUB"</div><div></div></div>
									<div class="assembly-row-combined"><div>02EBH</div><div>DEFW 8517H</div><div>The entry point for the <span class="code">ON x GOSUB</span> command is <a href="#0517H" class="memory-link">0517H</a>.</div></div>
									<div class="assembly-row-combined"><div>02EDH</div><div>DEFW 88C9H</div><div>If we were looking for a GOTO or GOSUB, and they weren't found, the JUMP here to 08C9H will display the "WHAT" error.</div></div>
									<div class="assembly-row-combined"><div>02EFH</div><div>"RND"</div><div></div></div>
									<div class="assembly-row-combined"><div>02F2H</div><div>DEFW 8E47H</div><div>The entry point for the <span class="code">RND</span> command is <a href="#0E47H" class="memory-link">0E47H</a>.</div></div>
									<div class="assembly-row-combined"><div>02F4H</div><div>"ABS"</div><div></div></div>
									<div class="assembly-row-combined"><div>02F7H</div><div>DEFW 8819H</div><div>The entry point for the <span class="code">ABS</span> command is <a href="#0819H" class="memory-link">0819H</a>.</div></div>
									<div class="assembly-row-combined"><div>02F9H</div><div>"MEM"</div><div></div></div>
									<div class="assembly-row-combined"><div>02FCH</div><div>DEFW 8821H</div><div>The entry point for the <span class="code">MEM</span> command is <a href="#0821H" class="memory-link">0821H</a>.</div></div>
									<div class="assembly-row-combined"><div>02FEH</div><div>"INT"</div><div></div></div>
									<div class="assembly-row-combined"><div>0301H</div><div>DEFW 882FH</div><div>The entry point for the <span class="code">INT</span> command is <a href="#082FH" class="memory-link">082FH</a>.</div></div>
									<div class="assembly-row-combined"><div>0303H</div><div>"POINT"</div><div></div></div>
									<div class="assembly-row-combined"><div>0308H</div><div>DEFW 8840H</div><div>The entry point for the <span class="code">POINT</span> command is <a href="#0840H" class="memory-link">0840H</a>.</div></div>
									<div class="assembly-row-combined"><div>030AH</div><div>DEFW 87F2H</div><div></div></div>
									<div class="assembly-row-combined"><div>030CH</div><div>DEFM "TO"</div><div></div></div>
									<div class="assembly-row-combined"><div>030EH</div><div>DEFB 8555H</div><div>The entry point for the <span class="code">TO</span> command is <a href="#0555H" class="memory-link">0555H</a>.</div></div>
									<div class="assembly-row-combined"><div>0310H</div><div>DEFB 88C9H</div><div></div></div>
									<div class="assembly-row-combined"><div>0312H</div><div>DEFM "STEP"</div><div></div></div>
									<div class="assembly-row-combined"><div>0316H</div><div>DEFB 8560H</div><div>The entry point for the <span class="code">STEP</span> command is <a href="#0560H" class="memory-link">0560H</a>.</div></div>
									<div class="assembly-row-combined"><div>0318H</div><div>DEFB 8565H</div><div></div></div>
									<div class="assembly-row-combined"><div>031AH</div><div>DEFM "TAB"</div><div></div></div>
									<div class="assembly-row-combined"><div>031DH</div><div>DEFB 849FH</div><div>The entry point for the <span class="code">TAB</span> command is <a href="#049FH" class="memory-link">049FH</a>.</div></div>
									<div class="assembly-row-combined"><div>031FH</div><div>DEFM "AT"</div><div></div></div>
									<div class="assembly-row-combined"><div>0321H</div><div>DEFB 8473H</div><div>The entry point for the <span class="code">AT</span> command is <a href="#0473H" class="memory-link">0473H</a>.</div></div>
									<div class="assembly-row-combined"><div>0323H</div><div>DEFM "A$"</div><div></div></div>
									<div class="assembly-row-combined"><div>0325H</div><div>DEFB 8459H</div><div>The entry point for the <span class="code">A$</span> command is <a href="#0459H" class="memory-link">0459H</a>.</div></div>
									<div class="assembly-row-combined"><div>0327H</div><div>DEFM "B$"</div><div></div></div>
									<div class="assembly-row-combined"><div>0329H</div><div>DEFB 845EH</div><div>The entry point for the <span class="code">B$</span> command is <a href="#045EH" class="memory-link">045EH</a>.</div></div>
									<div class="assembly-row-combined"><div>032DH</div><div>"<span class="code">&gt;</span>"</div><div></div></div>
									<div class="assembly-row-combined"><div>032EH</div><div>DEFW 8763H</div><div>The entry point for the <span class="code">&gt;</span> operator is <a href="#0763H" class="memory-link">0763H</a>.</div></div>
									<div class="assembly-row-combined"><div>0330H</div><div>"<span class="code">=</span>"</div><div></div></div>
									<div class="assembly-row-combined"><div>0331H</div><div>DEFW 878BH</div><div>The entry point for the <span class="code">=</span> operator is <a href="#078BH" class="memory-link">078BH</a>.</div></div>
									<div class="assembly-row-combined"><div>0333H</div><div>"<span class="code">&lt;</span>"</div><div></div></div>
									<div class="assembly-row-combined"><div>0334H</div><div>DEFW 8773H</div><div>The entry point for the "<span class="code">&lt;</span>" operator is <a href="#0773H" class="memory-link">0773H</a>.</div></div>
									<div class="assembly-row-combined"><div>0336H</div><div>DEFW 8797H</div><div>This is the jump point for when a relational expression is not found.</div></div>
									<div class="assembly-row-combined"><div>0338H</div><div>DEFM "THEN"</div><div></div></div>
									<div class="assembly-row-combined"><div>033CH</div><div>DEFW 8611H</div><div>The entry point for the <span class="code">THEN</span> command is <a href="#0611H" class="memory-link">0611H</a>.</div></div>
									<div class="assembly-row-combined"><div>033EH</div><div>DEFW 8617H</div><div></div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0340H">0340H - Routine
 to look for a BASIC keyword. Jumped to when the instruction line being 
interpreted is on the command line instead of being part of a program.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0340H</div><div>LD HL,0248H</div><div>Let
 Register Pair HL equal 0248H, which is the top of the RESERVED WORD 
LOOKUP LIST, in preparation to check if the next character(s) pointed to
 by DE is/are a reserved word.</div></div>
									<p class="debug-note">The next batch of code is to try to match the instruction to a reserved word.</p>
									<div class="assembly-row-combined" id="0343H"><div>0343H</div><div>RST 28H</div><div>Call
 RST 28H to move DE (pointer to current character in instruction line) 
to next non-space character, with Register A holding that character.</div></div>
									<div class="assembly-row-combined"><div>0344H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (current character pointer) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0345H</div><div>LD A,(DE)</div><div>Fetch the non-space character pointed to by DE from instruction line into Register A.</div></div>
									<div class="assembly-row-combined"><div>0346H</div><div>INC DE</div><div>Increment DE to point to next character in BASIC line.</div></div>
									<div class="assembly-row-combined"><div>0347H</div><div>INC HL</div><div>Increment HL to point to next entry in RESERVED WORD LOOKUP/VECTOR TABLE.</div></div>
									<div class="assembly-row-combined"><div>0348H</div><div>CP (HL)</div><div>Compare
 Register A (current instruction character) against the reserved word 
character pointed to by HL. If equal, Z FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>0349H</div><div><a href="#0351H" class="memory-link">JR Z,0351H</a></div><div>If Z FLAG set, potential match between instruction character and reserved word; jump to 0351H.</div></div>
									<div class="assembly-row-combined"><div>034BH</div><div>BIT 7,(HL)</div><div>Test bit 7 of (HL); Z FLAG if 0 (next item not starting with 8), NZ FLAG if 1 (next item starting with 8, a branch address).</div></div>
									<div class="assembly-row-combined"><div>034DH</div><div><a href="#035BH" class="memory-link">JR NZ,035BH</a></div><div>If NZ FLAG set, at a branch address instead of reserved word, jump to 035BH.</div></div>
									<div class="assembly-row-combined"><div>034FH</div><div><a href="#0362H" class="memory-link">JR 0362H</a></div><div>No first letter match or branch instruction; jump to 0362H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0351H">0351H - 
Continuation of the routine to parse an instruction line; jumped from 
0349H if first character match from line vs reserved word.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0351H</div><div>LD A,(DE)</div><div>Fetch next character on BASIC line (pointed to by DE) into Register A.</div></div>
								<div class="assembly-row-combined"><div>0352H</div><div>INC DE</div><div>Increment DE to point to next character.</div></div>
								<div class="assembly-row-combined"><div>0353H</div><div>INC HL</div><div>Increment HL for next entry in RESERVED WORD LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>0354H</div><div>CP (HL)</div><div>Compare Register A against reserved word char pointed to by HL; Z FLAG set if equal.</div></div>
								<div class="assembly-row-combined"><div>0355H</div><div><a href="#0351H" class="memory-link">JR Z,0351H</a></div><div>If Z FLAG set, have another match; loop back to 0351H.</div></div>
								<div class="assembly-row-combined"><div>0357H</div><div>BIT 7,(HL)</div><div>Test bit 7 of (HL) to distinguish branch addresses from reserved words.</div></div>
								<div class="assembly-row-combined"><div>0359H</div><div><a href="#035EH" class="memory-link">JR Z,035EH</a></div><div>If Z FLAG set, matched entire keyword but did not hit address; jump to 035EH.</div></div>
								<div class="assembly-row-combined"><div>035BH</div><div>DEC DE</div><div>Back up 1 character on instruction line, so DE points to start of address instead of second char.</div></div>
								<div class="assembly-row-combined"><div>035CH</div><div><a href="#0370H" class="memory-link">JR 0370H</a></div><div>Jump to 0370H to process matched address.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="035EH">035EH - Continuation to parse instruction line; jumped here if might have abbreviation match.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>035EH</div><div>CP 2EH</div><div>Compare Register A against 2EH (ASCII <span class="code">.</span>); Z FLAG set if equal.</div></div>
								<div class="assembly-row-combined"><div>0360H</div><div><a href="#036BH" class="memory-link">JR Z,036BH</a></div><div>If Z FLAG set, abbreviation match; jump to 036BH.</div></div>
								<div class="assembly-row-combined"><div>0362H</div><div>INC HL</div><div>Increment HL to skip the address in LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>0363H</div><div>BIT 7,(HL)</div><div>Test bit 7 of (HL) to check for second address; Z FLAG set if 0, NZ if 1.</div></div>
								<div class="assembly-row-combined"><div>0365H</div><div><a href="#0362H" class="memory-link">JR Z,0362H</a></div><div>If Z FLAG set, more addresses exist; loop back to 0362H.</div></div>
								<div class="assembly-row-combined"><div>0367H</div><div>INC HL</div><div>Increment HL to next character in LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>0368H</div><div>POP DE</div><div>Restore current character pointer of line from stack (saved at 0344H).</div></div>
								<div class="assembly-row-combined"><div>0369H</div><div><a href="#0343H" class="memory-link">JR 0343H</a></div><div>Loop back to 0343H to continue keyword matching.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="036BH">036BH - Continue parsing instruction line; loops to skip chars until an address found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>036BH</div><div>INC HL</div><div>Increment HL to next entry in LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>036CH</div><div>BIT 7,(HL)</div><div>Test bit 7 of (HL) to see if it's an '8' (address present); Z FLAG set if 0, NZ if 1.</div></div>
								<div class="assembly-row-combined"><div>036EH</div><div><a href="#036BH" class="memory-link">JR Z,036BH</a></div><div>If Z FLAG set, not found address yet; loop back to 036BH.</div></div>
								<div class="assembly-row-combined"><div>0370H</div><div>LD A,(HL)</div><div>Fetch MSB of address pointed to by HL into Register A.</div></div>
								<div class="assembly-row-combined"><div>0371H</div><div>INC HL</div><div>Increment HL to next character in LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>0372H</div><div>LD L,(HL)</div><div>Fetch LSB of address pointed to by HL into Register L.</div></div>
								<div class="assembly-row-combined"><div>0373H</div><div>AND 7FH</div><div>Mask Register A with 7FH to clear bit 7, as it is not part of the address.</div></div>
								<div class="assembly-row-combined"><div>0375H</div><div>LD H,A</div><div>Copy masked MSB into Register H.</div></div>
								<div class="assembly-row-combined"><div>0376H</div><div>POP AF</div><div>Clear return address from stack.</div></div>
								<div class="assembly-row-combined"><div>0377H</div><div>JP (HL)</div><div>Jump to address held in (HL).</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0378H">0378H - Entry point for the <span class="code">NEW</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0378H</div><div><a href="#08C5H" class="memory-link">CALL 08C5H</a></div><div>GOSUB to 08C5H to check if next character pointed by DE is a carriage return. Returns here if yes; otherwise shows "WHAT" error.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="037BH">037BH - Continuation of start-up process after RAM determination.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>037BH</div><div>LD A,0CH</div><div>Set Register A to 0CH (form feed) to clear the screen.</div></div>
								<div class="assembly-row-combined"><div>037DH</div><div>RST 10H</div><div>Send Register A to cassette or screen via RST 10.</div></div>
								<div class="assembly-row-combined"><div>037EH</div><div>LD HL,4200H</div><div>Set Register Pair HL to 4200H.</div></div>
								<div class="assembly-row-combined"><div>0381H</div><div>LD (406CH),HL</div><div>Store HL into memory 406CH, marking top of used RAM.</div></div>
								<div class="assembly-row-combined"><div>0384H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Jump to READY command line routine at 01C9H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0387H">0387H - Entry point for the <span class="code">END</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0387H</div><div><a href="#08C5H" class="memory-link">CALL 08C5H</a></div><div>GOSUB to 08C5H to check next character pointed by DE for carriage return. Returns here if yes; otherwise shows "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>038AH</div><div><a href="#0384H" class="memory-link">JR 0384H</a></div><div>Jump to READY routine at 0384H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="038CH">038CH - Entry point for the <span class="code">RUN</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>038CH</div><div><a href="#08C2H" class="memory-link">CALL 08C2H</a></div><div>GOSUB to 08C2H to parse an integer into HL.</div></div>
								<div class="assembly-row-combined"><div>038FH</div><div><a href="#0239H" class="memory-link">CALL 0239H</a></div><div>GOSUB to 0239H to clear 10-byte buffer starting at 409DH and set DE to 4200.</div></div>
								<div class="assembly-row-combined"><div>0392H</div><div><a href="#0397H" class="memory-link">JR 0397H</a></div><div>Preserve HL (line number to RUN) by skipping the next instruction and jumping to 0397H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0394H">0394H - Common routine continuation point. Execute the next line.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0394H</div><div>LD HL,0000H</div><div>Set HL to 0000H.</div></div>
								<div class="assembly-row-combined" id="0397H"><div>0397H</div><div><a href="#092DH" class="memory-link">CALL 092DH</a></div><div>GOSUB to 092DH to find line in RAM matching HL, preserving DE.</div></div>
								<div class="assembly-row-combined"><div>039AH</div><div><a href="#0384H" class="memory-link">JR C,0384H</a></div><div>If C flag set, jump to READY routine at 01C9H.</div></div>
								<div class="assembly-row-combined"><div>039CH</div><div>LD (409FH),DE</div><div>Store DE (current line to execute) into memory 409FH.</div></div>
								<div class="assembly-row-combined"><div>03A0H<br>03A1H</div><div>INC DE<br>INC DE</div><div>Increment DE by 2 to skip line number.</div></div>
								<div class="assembly-row-combined" id="03A2H"><div>03A2H</div><div><a href="#0B40H" class="memory-link">CALL 0B40H</a></div><div>GOSUB to 0B40H to fetch keyboard keystroke (non-blocking).</div></div>
								<div class="assembly-row-combined"><div>03A5H</div><div>CP 03H</div><div>Compare Register A to 03H (BREAK); set Z if equal.</div></div>
								<div class="assembly-row-combined"><div>03A7H</div><div><a href="#03C5H" class="memory-link">JR Z,03C5H</a></div><div>If BREAK detected (Z set), jump to STOP command at 03C5H.</div></div>
								<div class="assembly-row-combined"><div>03A9H</div><div><a href="#0FE4H" class="memory-link">CALL 0FE4H</a></div><div>GOSUB to 0FE4H to turn off cassette motor.</div></div>
								<div class="assembly-row-combined"><div>03ACH</div><div>LD IX,40F4H</div><div>Set IX to 40F4H, bottom of floating point stack.</div></div>
								<div class="assembly-row-combined"><div>03B0H</div><div>LD HL,026CH</div><div>Set HL to 026CH, pointing to middle of RESERVED WORD LOOKUP table before NEXT command.</div></div>
								<div class="assembly-row-combined"><div>03B3H</div><div><a href="#0343H" class="memory-link">JR 0343H</a></div><div>Jump to 0343H to continue READY COMMAND loop with adjusted lookup table pointer.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="03B5H">03B5H - Entry point for the <span class="code">GOTO</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>03B5H</div><div><a href="#0EBDH" class="memory-link">CALL 0EBDH</a></div><div>GOSUB to 0EBDH to parse integer into HL or set NZ for error. Return if NZ; otherwise jump to 08C9H to display "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>03B8H</div><div>PUSH DE</div><div>Save DE on stack.</div></div>
								<div class="assembly-row-combined"><div>03B9H</div><div><a href="#08C5H" class="memory-link">CALL 08C5H</a></div><div>GOSUB to 08C5H to check next character pointed by DE for carriage return; returns here if yes, else shows "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>03BCH</div><div><a href="#092AH" class="memory-link">CALL 092AH</a></div><div>GOSUB to 092AH to find line in RAM matching HL; jump to 092DH to preserve DE.</div></div>
								<div class="assembly-row-combined"><div>03BFH</div><div><a href="#01A3H" class="memory-link">JP NZ,01A3H</a></div><div>If NZ set, jump to 01A3H to display "HOW?" error.</div></div>
								<div class="assembly-row-combined"><div>03C2H</div><div>POP AF</div><div>Restore AF from stack.</div></div>
								<div class="assembly-row-combined"><div>03C3H</div><div><a href="#039CH" class="memory-link">JR 039CH</a></div><div>Jump to 039CH to continue processing instructions on identified line.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="03C5H">03C5H - Entry point for the <span class="code">STOP</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>03C5H</div><div>LD (409DH),DE</div><div>Store DE as parse pointer saved when a STOP command is executed at memory location 409DH.</div></div>
								<div class="assembly-row-combined"><div>03C9H</div><div>LD A,0DH</div><div>Set Register A to 0DH (ASCII carriage return).</div></div>
								<div class="assembly-row-combined"><div>03CBH</div><div>RST 10H</div><div>Send Register A to cassette or screen via RST 10 call.</div></div>
								<div class="assembly-row-combined"><div>03CCH</div><div>LD DE,01C0H</div><div>Set DE to 01C0H, pointer to "BREAK AT" message in ROM.</div></div>
								<div class="assembly-row-combined"><div>03CFH</div><div><a href="#094FH" class="memory-link">CALL 094FH</a></div><div>GOSUB to 094FH to display the message pointed to by DE, returning once 00H found; message followed by line number.</div></div>
								<div class="assembly-row-combined"><div>03D2H</div><div>LD HL,(409FH)</div><div>Fetch current execution line pointer from 409FH into HL.</div></div>
								<div class="assembly-row-combined"><div>03D5H</div><div>LD (4097H),HL</div><div>Store HL into 4097H, which points to current line address.</div></div>
								<div class="assembly-row-combined"><div>03D8H</div><div>LD E,(HL)</div><div>Load byte pointed by HL into Register E.</div></div>
								<div class="assembly-row-combined"><div>03D9H</div><div>INC HL</div><div>Increment HL.</div></div>
								<div class="assembly-row-combined"><div>03DAH</div><div>LD D,(HL)</div><div>Load byte pointed by HL into Register D.</div></div>
								<div class="assembly-row-combined"><div>03DBH</div><div>LD HL,0000H</div><div>Set HL to 0000H.</div></div>
								<div class="assembly-row-combined"><div>03DEH</div><div>LD (409FH),HL</div><div>Store 0000 into 409FH, resetting pointer to current line.</div></div>
								<div class="assembly-row-combined"><div>03E1H</div><div>EX DE,HL</div><div>Exchange HL and DE registers.</div></div>
								<p class="debug-note">At this point HL contains the line number to display.</p>
								<div class="assembly-row-combined"><div>03E2H</div><div><a href="#096DH" class="memory-link">CALL 096DH</a></div><div>GOSUB to 096DH to display the decimal contents of HL.</div></div>
								<div class="assembly-row-combined"><div>03E5H</div><div>LD A,0DH</div><div>Set Register A to 0DH (carriage return).</div></div>
								<div class="assembly-row-combined"><div>03E7H</div><div>RST 10H</div><div>Send Register A to cassette or screen via RST 10.</div></div>
								<div class="assembly-row-combined"><div>03E8H</div><div><a href="#01DEH" class="memory-link">JP 01DEH</a></div><div>Jump to the middle of the READY COMMAND LINE LOOP at 01DEH.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="03EBH">03EBH - Entry point for the <span class="code">CONT</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>03EBH</div><div><a href="#08C5H" class="memory-link">CALL 08C5H</a></div><div>CONT takes no parameters; calls 08C5H to check for carriage return. Otherwise shows "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>03EEH</div><div>LD HL,(409DH)</div><div>Set HL to the parse pointer saved when STOP command was executed (409DH).</div></div>
								<div class="assembly-row-combined"><div>03F1H<br>03F2H</div><div>LD A,H<br>OR L</div><div>Z80 cannot directly test HL zero; common trick sets A = H OR L; Z flag set if both zero.</div></div>
								<div class="assembly-row-combined"><div>03F3H</div><div><a href="#0384H" class="memory-link">JR Z,0384H</a></div><div>If Z flag set, no address to continue; jump to READY routine at 01C9H.</div></div>
								<div class="assembly-row-combined"><div>03F5H</div><div>EX DE,HL</div><div>Exchange HL and DE.</div></div>
								<div class="assembly-row-combined"><div>03F6H</div><div>LD HL,(4097H)</div><div>Restore current execution line from 4097H into HL.</div></div>
								<div class="assembly-row-combined"><div>03F9H</div><div>LD (409FH),HL</div><div>Store current execution line into 409FH.</div></div>
								<div class="assembly-row-combined"><div>03FCH</div><div><a href="#08B3H" class="memory-link">CALL 08B3H</a></div><div>GOSUB to 08B3H to check next character for ":"; if yes checks for carriage return, else jump to execute next line.</div></div>
								<div class="assembly-row-combined"><div>03FFH</div><div><a href="#03A2H" class="memory-link">JR 03A2H</a></div><div>Jump to code that checks for BREAK and processes reserved words.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0401H">0401H - Entry point for the <span class="code">LIST</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0401H</div><div><a href="#08C2H" class="memory-link">CALL 08C2H</a></div><div>Check for a line number parameter by parsing integer into HL.</div></div>
								<div class="assembly-row-combined"><div>0404H</div><div><a href="#092AH" class="memory-link">CALL 092AH</a></div><div>Find line in RAM matching HL while preserving DE.</div></div>
								<div class="assembly-row-combined"><div>0407H</div><div>LD C,0CH</div><div>Set Register C to 0CH (12) for line display loop.</div></div>
								<div class="assembly-row-combined" id="0409H"><div>0409H</div><div><a href="#042DH" class="memory-link">JR C,042DH</a></div><div>If C flag set, no line found; jump to 042DH to READY loop.</div></div>
								<div class="assembly-row-combined"><div>040BH</div><div>DEC C</div><div>Decrement Register C.</div></div>
								<div class="assembly-row-combined"><div>040CH</div><div><a href="#0418H" class="memory-link">JR Z,0418H</a></div><div>If Z flag set, jump to 0418H.</div></div>
								<div class="assembly-row-combined"><div>040EH</div><div>PUSH BC</div><div>Preserve BC on stack.</div></div>
								<div class="assembly-row-combined"><div>040FH</div><div><a href="#0A63H" class="memory-link">CALL 0A63H</a></div><div>Display line number pointed to by DE.</div></div>
								<div class="assembly-row-combined"><div>0412H</div><div>POP BC</div><div>Restore BC from stack.</div></div>
								<div class="assembly-row-combined"><div>0413H</div><div><a href="#092DH" class="memory-link">CALL 092DH</a></div><div>Find next line in RAM matching HL.</div></div>
								<div class="assembly-row-combined"><div>0416H</div><div><a href="#0409H" class="memory-link">JR 0409H</a></div><div>Loop back to 0409H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0418H">0418H - Continuation of LIST command after 12 lines displayed.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0418H</div><div><a href="#0A63H" class="memory-link">CALL 0A63H</a></div><div>Display line number pointed to by DE.</div></div>
								<div class="assembly-row-combined"><div>041BH</div><div><a href="#092DH" class="memory-link">CALL 092DH</a></div><div>Find line in RAM matching HL.</div></div>
								<div class="assembly-row-combined"><div>041EH</div><div><a href="#042DH" class="memory-link">JR C,042DH</a></div><div>If C flag set, jump to 042DH (READY loop).</div></div>
								<div class="assembly-row-combined" id="0420H"><div>0420H</div><div><a href="#0B40H" class="memory-link">CALL 0B40H</a></div><div>Fetch a keystroke (non-blocking) from keyboard.</div></div>
								<div class="assembly-row-combined"><div>0423H</div><div><a href="#0420H" class="memory-link">JR Z,0420H</a></div><div>If no key found (Z flag), loop back to 0420H and keep polling.</div></div>
								<div class="assembly-row-combined"><div>0425H</div><div>CP 1BH</div><div>Compare Register A to 1BH (ASCII escape). Z flag set if equal.</div></div>
								<div class="assembly-row-combined"><div>0427H</div><div><a href="#0418H" class="memory-link">JR Z,0418H</a></div><div>If escape detected (Z flag), jump back to 0418H to redisplay LIST line and wait for key.</div></div>
								<div class="assembly-row-combined"><div>0429H</div><div>CP 0DH</div><div>Compare Register A to 0DH (carriage return). NZ flag set if not equal.</div></div>
								<div class="assembly-row-combined"><div>042BH</div><div><a href="#0420H" class="memory-link">JR NZ,0420H</a></div><div>If key other than carriage return pressed, loop back to 0420H.</div></div>
								<div class="assembly-row-combined" id="042DH"><div>042DH</div><div><a href="#03E8H" class="memory-link">JR 03E8H</a></div><div>If carriage return received (STOP LISTING), jump to middle of READY loop at 03E8H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="042FH">042FH - Entry point for the <span class="code">PRINT</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>042FH</div><div>RST 08H<br>23H<br>09H</div><div>Check
 for a "#" via RST 08H with parameters 23H and offset 09H. Moves to next
 non-space character and checks if it is "#". If no match, jump 9 
instructions past current.</div></div>
								<div class="assembly-row-combined"><div>0432H</div><div>LD HL,40ACH</div><div>Set HL to 40ACH, buffer for command input and cassette output.</div></div>
								<div class="assembly-row-combined"><div>0435H</div><div>LD (4099H),HL</div><div>Store HL into printer buffer address at 4099H.</div></div>
								<div class="assembly-row-combined"><div>0438H</div><div><a href="#0FE9H" class="memory-link">CALL 0FE9H</a></div><div>Turn on cassette motor.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="043BH">043BH - If PRINT was not followed by a <span class="code">#</span>, jump here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>043BH</div><div>RST 08H<br>3AH<br><a href="#0443H" class="memory-link">05H</a></div><div>Check
 for a ":" via RST 08H with parameters 3AH and offset 05H. Moves to next
 non-space char and checks. If no match, jump to 0443H.</div></div>
								<div class="assembly-row-combined"><div>043EH</div><div>CALL 000EH</div><div>Display carriage return.</div></div>
								<div class="assembly-row-combined"><div>0441H</div><div><a href="#03FFH" class="memory-link">JR 03FFH</a></div><div>Jump to continue EXECUTE NEXT LINE routine.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0443H">0443H - If PRINT was not followed by a <span class="code">:</span>, jump here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0443H</div><div>RST 08H<br>0DH<br>06H</div><div>Check for carriage return via RST 08H with parameters 0DH and offset 06H. If no match, jump to 044CH.</div></div>
								<div class="assembly-row-combined"><div>0446H</div><div>CALL 000EH</div><div>Display carriage return.</div></div>
								<div class="assembly-row-combined"><div>0449H</div><div><a href="#0394H" class="memory-link">JP 0394H</a></div><div>Jump to top of EXECUTE NEXT LINE routine.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="044CH">044CH - If PRINT was not followed by a carriage return, jump here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>044CH</div><div>LD HL,0319H</div><div>Set Register Pair HL equal 0319H, in the middle of the RESERVED WORD LOOKUP/VECTOR TABLE.</div></div>
								<div class="assembly-row-combined"><div>044FH</div><div><a href="#0343H" class="memory-link">JP 0343H</a></div><div>Jump to 0343H to look for keyword matches starting at 0319H (e.g., TAB, AT, A$, B$ ...).</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0452H">0452H - If PRINT had a QUOTE, jump here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0452H</div><div><a href="#095BH" class="memory-link">CALL 095BH</a></div><div>Display
 quoted expression pointed to by DE; jump to command line parse if 
carriage return found, else jump to return address + 2 bytes.</div></div>
								<div class="assembly-row-combined"><div>0455H</div><div><a href="#0499H" class="memory-link">JR 0499H</a></div><div>Jump to concluding code of PRINT AT routine.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0457H">0457H - If PRINT expression did not end with carriage return, jump here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0457H</div><div><a href="#0464H" class="memory-link">JR 0464H</a></div><div>Jump to process the display of a COMMA or TAB STOP if needed.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0459H">0459H - Entry point for the <span class="code">PRINT A$</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0459H</div><div>LD HL,4070H</div><div>Set Register Pair HL to 4070H, which holds variable A$.</div></div>
								<div class="assembly-row-combined"><div>045CH</div><div><a href="#0461H" class="memory-link">JR 0461H</a></div><div>Jump to 0461H to print variable pointed by HL.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="045EH">045EH - Entry point for the <span class="code">PRINT B$</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>045EH</div><div>LD HL,4080H</div><div>Set Register Pair HL to 4080H, which holds variable B$.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" id="0461H">Routine to print a string variable.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0461H</div><div><a href="#04B9H" class="memory-link">CALL 04B9H</a></div><div>GOSUB
 to 04B9H to display the contents of a string variable pointed to by 
Register Pair HL until either 00H is reached OR 16 bytes have been 
displayed.</div></div>
									<div class="assembly-row-combined" id="0464H"><div>0464H</div><div>RST 08H<br>2CH<br><a href="#0467H" class="memory-link">26H</a></div><div>Check for a <span class="code">,</span>
 by calling to RST 08H with parameters of 2CH and an offset of 26H.  RST
 08H will move to the next non-space character and check it against 2CH 
(which is a <span class="code">,</span>).  If there is no match, jump to the return (of the next instruction, i.e. 0467H) + 26H instructions (which would be <a href="#0467H" class="memory-link">0467H</a>).</div></div>
									<p class="debug-note">If we are here, then we got a comma, so we need to handle the display of a TAB.</p>
									<div class="assembly-row-combined"><div>0467H</div><div>LD A,(4068H)</div><div>Copy the CURSOR POSITION (held in 4068H) into Register A.</div></div>
									<div class="assembly-row-combined"><div>046AH</div><div>AND 0FH</div><div>MASK
 the value of Register A against 0FH (0000 1111).  This has the effect 
of turning off bits 7, 6, 5, 4, leaving A to be 00H-0FH only.</div></div>
									<div class="assembly-row-combined"><div>046CH</div><div><a href="#0490H" class="memory-link">JR Z,0490H</a></div><div>If that is a 0, then we are already at a TAB STOP, so JUMP to 0490H.</div></div>
									<div class="assembly-row-combined"><div>046EH</div><div>LD A,20H</div><div>Otherwise, let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
									<div class="assembly-row-combined"><div>0470H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., ASCII: <span class="code">SPACE</span>) to the cassette or screen via a RST 10 call.</div></div>
									<div class="assembly-row-combined"><div>0471H</div><div><a href="#0467H" class="memory-link">JR 0467H</a></div><div>LOOP BACK to 0467H until we are at a "0" location (a tab stop).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0473H">Entry point for the <span class="code">PRINT AT</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0473H</div><div><a href="#0807H" class="memory-link">CALL 0807H</a></div><div>Determine
 the location on the screen being asked for via a GOSUB to 0807H to 
calculate an integer expression with the results into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0476H</div><div>LD BC,(4068H)</div><div>Fetch the cursor position on screen (held in memory location 4068H) and store it into Register Pair BC.</div></div>
									<div class="assembly-row-combined"><div>047AH</div><div>LD A,20H<br>LD A," "</div><div>Let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
									<div class="assembly-row-combined"><div>047CH</div><div>LD (BC),A</div><div>Erase the cursor by putting the <span class="code">SPACE</span> held in Register A onto the cursor position.</div></div>
									<div class="assembly-row-combined"><div>047DH</div><div>LD A,H</div><div>Copy the contents of Register H (from the integer) into Register A.</div></div>
									<div class="assembly-row-combined"><div>047EH</div><div>OR FCH<br>1111 1100</div><div>OR
 Register A against FCH (1111 1100).  This has the effect of turning on 
bits 7-3, leaving the only possible values to be 252-255.</div></div>
									<div class="assembly-row-combined"><div>0480H</div><div>AND 3FH<br>AND 0011 1111</div><div>MASK
 the value of Register A against 3FH (0011 1111).  This has the effect 
of turning off bits 7 and 6, leaving the only possible values to be 63 
and lower, which are the number of columns on a TRS-80 screen.</div></div>
									<div class="assembly-row-combined"><div>0482H</div><div>LD H,A</div><div>Copy the modified contents of Register A into Register H.</div></div>
									<div class="assembly-row-combined"><div>0483H</div><div>LD (HL),5FH<br>LD (HL),"_ "</div><div>Store the value 5FH (ASCII: <span class="code">_</span>) onto the screen at the pointed to by Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0485H</div><div>LD (4068H),HL</div><div>Store the value held in Register Pair HL into memory location 4068H (which holds the cursor position on screen).</div></div>
									<div class="assembly-row-combined"><div>0488H</div><div>RST 08H<br>2CH<br>02H</div><div>Check for a "<span class="code">,</span>"
 by calling to RST 08H with parameters of 2CH and an offset of 02H.  RST
 08H will move to the next non-space character and check it against 2CH 
(which is a <span class="code">,</span>).  If there is no match, jump to the return (of the next instruction, i.e. 048BH) + 02H instructions (which would be 048DH).</div></div>
									<p class="debug-note">If a <span class="code">,</span> is found, then we are here.</p>
									<div class="assembly-row-combined"><div>048BH</div><div><a href="#0490H" class="memory-link">JR 0490H</a></div><div>JUMP to 0490H to GOSUB to 08B3H to check if the next character is a ":" and if yes, JUMP to 08BAH to check for a <span class="code">CARRIAGE RETURN</span> and if not then jump to the MIDDLE of the EXECUTE NEXT LINE routine.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="048DH">Middle of the PRINT AT Routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>048DH</div><div>RST 08H<br>3BH<br><a href="#0495H" class="memory-link">05H</a></div><div>Check for a "<span class="code">;</span>"
 by calling to RST 08H with parameters of 3BH and an offset of 05H.  RST
 08H will move to the next non-space character and check it against 3BH 
(which is a <span class="code">;</span>).  If there is no match, jump to the return (of the next instruction, i.e. 0490H) + 05H instructions (which would be <a href="#0495H" class="memory-link">0495H</a>).</div></div>
									<p class="debug-note">If a <span class="code">;</span> is found, then we are here.</p>
									<div class="assembly-row-combined" id="0490H"><div>0490H</div><div><a href="#08B3H" class="memory-link">CALL 08B3H</a></div><div>GOSUB to 08B3H to check if the next character is a ":" and if yes, JUMP to 08BAH to check for a <span class="code">CARRIAGE RETURN</span> and if not then jump to the MIDDLE of the EXECUTE NEXT LINE routine.</div></div>
									<div class="assembly-row-combined"><div>0493H</div><div><a href="#044CH" class="memory-link">JR 044CH</a></div><div>JUMP to 044CH to look for keyword matches but starting with the keywords at 0319H (i.e., TAB, AT, A$, B$ ...).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0495H">Middle of the PRINT AT Routine where a "<span class="code">;</span>" was not found, so process the end of the line<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0495H</div><div><a href="#000EH" class="memory-link">CALL 000EH</a></div><div>GOSUB to 000EH to display a CARRIAGE RETURN since we are not trying to continue displaying characters on that line.</div></div>
									<div class="assembly-row-combined"><div>0498H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
									<div class="assembly-row-combined" id="0499H"><div>0499H</div><div>RST 18H</div><div>RST 18 to parse an expression (and an optional expression, if any).</div></div>
									<div class="assembly-row-combined"><div>049AH</div><div><a href="#0970H" class="memory-link">CALL 0970H</a></div><div>GOSUB to 0970H to display the contents of Register Pair HL as a decimal number.</div></div>
									<div class="assembly-row-combined"><div>049DH</div><div><a href="#0464H" class="memory-link">JR 0464H</a></div><div>JUMP to 0464H to process the display of a COMMA or TAB STOP if needed.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="049FH">Entry point for the <span class="code">PRINT TAB</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>049FH</div><div><a href="#0814H" class="memory-link">CALL 0814H</a></div><div>GOSUB
 to 0814H to verify that an integer is within parenthesis, and calculate
 the integer expression with the result in Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>04A2H</div><div>LD A,L</div><div>We only care about the 8 bit value of Register L, so copy the contents of Register L into Register A.</div></div>
									<div class="assembly-row-combined"><div>04A3H</div><div>AND 3FH<br>AND 0011 1111</div><div>MASK
 the value of Register A against 3FH (Decimal: 63) to set the possible 
values to be between 0 and 63, which are the possible column numbers for
 a Model I screen.  This is the column we want to go to.</div></div>
									<div class="assembly-row-combined"><div>04A5H</div><div>LD L,A</div><div>Copy the masked contents back into Register L.</div></div>
									<div class="assembly-row-combined" id="04A6H"><div>04A6H</div><div>LD A,(4068H)</div><div>Fetch the cursor position on screen (held in memory location 4068H) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>04A9H</div><div>AND 3FH<br>AND 0011 1111</div><div>MASK
 the value of Register A against 3FH (Decimal: 63) to set the possible 
values to be between 0 and 63, which are the possible column numbers for
 a Model I screen.  This is the column that the cursor is currently in.</div></div>
									<div class="assembly-row-combined"><div>04ABH</div><div>CP L</div><div>Compare the current column on the screen line (held in Register A) against the column held in Register L.  Results:<ul><li>If Register A equals the value held in Register L, the Z FLAG is set.</li><li>If Register A &lt; Register L, the CARRY FLAG will be set.</li><li>if Register A &gt; Register L, the NO CARRY FLAG will be set.</li></ul></div></div>
									<div class="assembly-row-combined"><div>04ACH</div><div><a href="#0488H" class="memory-link">JR Z,0488H</a></div><div>If
 the Z FLAG (Zero) has been set, then the GOAL column is the same as the
 CURRENT column, so we will do nothing here and JUMP to 0488H to keep 
processing whatever else might be on the PRINT TAB line.</div></div>
									<div class="assembly-row-combined"><div>04AEH</div><div><a href="#0488H" class="memory-link">JR NC,0488H</a></div><div>If
 the NC FLAG (No Carry) has been set, then the GOAL column is PAST the 
CURRENT column, so we will do nothing here and JUMP to 0488H to keep 
processing whatever else might be on the PRINT TAB line.</div></div>
									<p class="debug-note">If we are here, then we are not yet on screen where we want to be, so we need to space over until we get there.</p>
									<div class="assembly-row-combined"><div>04B0H</div><div>LD A,20H</div><div>Let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
									<div class="assembly-row-combined"><div>04B2H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., <span class="code">SPACE</span>) to the screen via a RST 10 call.</div></div>
									<div class="assembly-row-combined"><div>04B3H</div><div><a href="#04A6H" class="memory-link">JR 04A6H</a></div><div>Loop
 back to 04A6H to check to see if we have hit the GOAL column yet.  This
 is a far more time consuming way to do this than if the number of 
spaces had just been calculated and filled.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="04B5H">Entry point for the <span class="code">CLS</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>04B5H</div><div>LD A,0CH</div><div>Let Register A equal 0CH (ASCII: <span class="code">FORM FEED</span>.  This will act as a clear screen command.</div></div>
									<div class="assembly-row-combined"><div>04B7H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 0CH) to the cassette or screen via a RST 10 call.</div></div>
									<div class="assembly-row-combined"><div>04B8H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="04B9H">Subroutine to 
display the contents of a string variable pointed to by Register Pair HL
 until either a 00H is reached OR 16 bytes have been displayed.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>04B9H</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>04BAH</div><div>INC HL</div><div>INCrement Register Pair HL by 1 to point to the next character in the string.</div></div>
									<div class="assembly-row-combined"><div>04BBH</div><div>AND A</div><div>Test
 to see if the character there is empty.  Reset the CARRY FLAG and set 
the Z/NZ FLAGS based on Register A via an AND A (which masks the value 
of Register A against itself).</div></div>
									<div class="assembly-row-combined"><div>04BCH</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, then we have a 00H delimiter, so we are done!  RETurn to the caller.</div></div>
									<div class="assembly-row-combined"><div>04BDH</div><div>RST 10H</div><div>Send the character held in Register A to the cassette or screen via a RST 10 call.</div></div>
									<div class="assembly-row-combined"><div>04BEH</div><div>LD A,L</div><div>Copy the contents of the LSB of string pointer (held in Register L) into Register A.</div></div>
									<div class="assembly-row-combined"><div>04BFH</div><div>AND 0FH<br>AND 0000 1111</div><div>MASK the LSB against 0FH (0000 1111).  This has the effect of turning off bits 7, 6, 5, 4, leaving a value 15 or lower.</div></div>
									<div class="assembly-row-combined"><div>04C1H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
									<div class="assembly-row-combined"><div>04C2H</div><div><a href="#04B9H" class="memory-link">JR 04B9H</a></div><div>Get the next character by LOOPing back to the top of the routine at 04B9H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="04C4H">Entry point for the <span class="code">GOSUB</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>04C4H</div><div><a href="#0A9FH" class="memory-link">CALL 0A9FH</a></div><div>GOSUB
 to 0A9FH to move the BASIC language stack to make room for a new stack 
entry (like the return address of a GOSUB or the value of a FOR loop).</div></div>
									<div class="assembly-row-combined"><div>04C7H</div><div><a href="#0EBDH" class="memory-link">CALL 0EBDH</a></div><div>Fetch
 the line number associated with the GOSUB command by GOSUBing to 0EBDH 
to parse an integer into HL or set NZ for an error.  RETURN if NZ, or 
JUMP to 08C9H to display the "WHAT" error otherwise.</div></div>
									<div class="assembly-row-combined"><div>04CAH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack because the next instruction will reset DE.</div></div>
									<div class="assembly-row-combined"><div>04CBH</div><div><a href="#092AH" class="memory-link">CALL 092AH</a></div><div>GOSUB
 to 092AH to find the line in RAM which matches the line number pointed 
to by Register Pair HL.  Note: A jump to 092AH resets DE.  To do the 
routine while preserving DE, jump instead to 092DH.</div></div>
									<div class="assembly-row-combined"><div>04CEH</div><div><a href="#01A3H" class="memory-link">JP NZ,01A3H</a></div><div>If
 the number after the GOSUB command does not correspond to a line number
 in RAM the NZ FLAG (Not Zero) will have been set, so JUMP to 01A3H to 
display the "HOW?" error.</div></div>
									<div class="assembly-row-combined"><div>04D1H</div><div>LD HL,(409FH)</div><div>Fetch
 the pointer to the current line being executed (held in memory location
 409FH) and store it into Register Pair HL.  This would be the RETURN 
point.</div></div>
									<div class="assembly-row-combined"><div>04D4H</div><div>PUSH HL</div><div>Save the line number to RETURN to (held in Register Pair HL) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>04D5H</div><div>LD HL,(40A3H)</div><div>Fetch
 the line number location to return to from the saved stack pointer 
(held in memory location 40A3H) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>04D8H</div><div>PUSH HL</div><div>Save the saved BASIC stack pointer (held in Register Pair HL) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>04D9H</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
									<div class="assembly-row-combined"><div>04DCH</div><div>LD (40A5H),HL</div><div>Store the value held in Register Pair HL into memory location 40A5H (which is the pointer to the current FOR LOOP variable).</div></div>
									<div class="assembly-row-combined"><div>04DFH</div><div>ADD HL,SP</div><div>Put the stack pointer into HL via  a LET Register Pair HL = Register Pair HL + Register SP.</div></div>
									<div class="assembly-row-combined"><div>04E0H</div><div>LD (40A3H),HL</div><div>Store the return to line location into 40A3H (which is the saved stack pointer).</div></div>
									<div class="assembly-row-combined"><div>04E3H</div><div><a href="#039CH" class="memory-link">JP 039CH</a></div><div>JUMP to 039CH to execute the BASIC instructions at the RAM location pointed to by Register Pair DE.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="04E6H">Entry point for the <span class="code">RETURN</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>04E6H</div><div><a href="#08C5H" class="memory-link">CALL 08C5H</a></div><div>GOSUB
 to 08C5H which will check the next character on the instruction line 
(pointed to by DE) for a CARRIAGE RETURN.  If that's what it finds, it 
returns here.  If it finds anything else (meaning, an unwanted 
character), it will display the "WHAT" error message.</div></div>
									<div class="assembly-row-combined"><div>04E9H</div><div>LD HL,(40A3H)</div><div>Fetch
 the saved return to line num location / BASIC stack pointer (held in 
memory location 40A3H) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>04ECH<br>04ECH</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L.  Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
									<div class="assembly-row-combined"><div>04EEH</div><div><a href="#08C9H" class="memory-link">JP Z,08C9H</a></div><div>If
 the BASIC stack pointer is 0000H, then the RETURN TO LINE number was 
0000 which is a bad thing, the Z FLAG (Zero) will have been set, so JUMP
 to 08C9H to display the "WHAT" error.</div></div>
									<div class="assembly-row-combined"><div>04F1H</div><div>LD SP,HL</div><div>Copy
 the contents of Register Pair HL into Register Pair SP so that the 
system's stack pointer now points to the BASIC stack pointer.</div></div>
									<div class="assembly-row-combined"><div>04F2H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>04F3H</div><div>LD (40A3H),HL</div><div>Store the value held in Register Pair HL into memory location 40A3H (which is the saved stack pointer).</div></div>
									<div class="assembly-row-combined"><div>04F6H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>04F7H</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
									<div class="assembly-row-combined"><div>04FAH</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>04FBH</div><div><a href="#05F2H" class="memory-link">JP 05F2H</a></div><div>JUMP
 to 05F2H to restore the values from the BASIC stack into their RAM 
locations, clear the RETurn address, and continue processing the current
 BASIC line.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="04FEH">Entry point for the <span class="code">ON</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>04FEH</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>GOSUB to 080BH to calculate a non-negative integer into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0501H<br>0501H</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L.  Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
									<div class="assembly-row-combined"><div>0503H</div><div><a href="#050BH" class="memory-link">JR Z,050BH</a></div><div>If HL was zero then the Z FLAG (Zero) will have been set, so JUMP to 050BH.</div></div>
									<div class="assembly-row-combined"><div>0505H</div><div>PUSH HL</div><div>Save the non-negative integer expression held Register Pair HL to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0506H</div><div>LD HL,02DFH</div><div>Let Register Pair HL equal 02DFH, which will be the location in ROM where the command lookup table is, starting with the <span class="code">PRINT</span> command.</div></div>
									<div class="assembly-row-combined"><div>0509H</div><div><a href="#0552H" class="memory-link">JR 0552H</a></div><div>JUMP to 0552H which JUMPs to 0343H in the READY COMMAND LOOP to try to match reserved words, starting with the <span class="code">PRINT</span> command.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="050BH">Part of the <span class="code">ON</span> Command; jumped here if the index passed to ON was a ZERO.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>050BH</div><div><a href="#053CH" class="memory-link">CALL 053CH</a></div><div>GOSUB to 053CH to read (and discard) characters on the BASIC line until we hit a <span class="code">CARRIAGE RETURN</span> or a <span class="code">:</span></div></div>
									<div class="assembly-row-combined"><div>050EH</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
								</div>
							</div>

							<div class="main-page-container">
					<h1>TRS-80 - Level 1 ROM Disassembled</h1>

							<br><h2 class="assembly-section-title" id="050FH">Entry point for the <span class="code">ON x GOTO</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>050FH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0510H</div><div><a href="#0526H" class="memory-link">CALL 0526H</a></div><div>GOSUB to 0526H to turn the value passed after the ON (i.e., the ON x expression) into a line number.</div></div>
									<div class="assembly-row-combined" id="0513H"><div>0513H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0514H</div><div><a href="#03BCH" class="memory-link">JP 03BCH</a></div><div>JUMP to 03BCH which is inside the <span class="code">GOTO</span> routine.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0517H">Entry point for the <span class="code">ON x GOSUB</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0517H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0518H</div><div><a href="#0526H" class="memory-link">CALL 0526H</a></div><div>GOSUB to 0526H to turn the value passed after the ON (i.e., the ON x expression) into a line number.</div></div>
									<div class="assembly-row-combined"><div>051BH</div><div>LD (409BH),HL</div><div>Store the value held in Register Pair HL into the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH).</div></div>
									<div class="assembly-row-combined"><div>051EH</div><div><a href="#0A9FH" class="memory-link">CALL 0A9FH</a></div><div>GOSUB
 to 0A9FH to move the BASIC language stack to make room for a new stack 
entry (like the return address of a GOSUB or the value of a FOR loop).</div></div>
									<div class="assembly-row-combined"><div>0521H</div><div>LD HL,(409BH)</div><div>Fetch the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0524H</div><div><a href="#04CAH" class="memory-link">JR 04CAH</a></div><div>JUMP to 04CAH which is inside the <span class="code">GOSUB</span> routine.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0526H">Part of the <span class="code">ON</span> Command; turns the value/expression passed after the ON into a line number.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0526H</div><div>DEC L</div><div>DECrement the value stored in Register L by 1.</div></div>
									<div class="assembly-row-combined"><div>0527H</div><div><a href="#0539H" class="memory-link">JR Z,0539H</a></div><div>If the Z FLAG (Zero) has been set, JUMP to 0539H to parse the referenced line number.</div></div>
									<div class="assembly-row-combined" id="0529H"><div>0529H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
									<div class="assembly-row-combined"><div>052AH</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>052CH</div><div><a href="#050BH" class="memory-link">JR Z,050BH</a></div><div>If the character is a <span class="code">CARRIAGE RETURN</span>,
 then we don't have a good value and the Z FLAG (Zero) has been set, so 
JUMP BACK to 050BH to continue processing (i.e., looking for a <span class="code">:</span> or <span class="code">CARRIAGE RETURN</span>) as if the index passed was zero.</div></div>
									<div class="assembly-row-combined"><div>052EH</div><div>CP 3AH</div><div>If we are here, then we got either the <span class="code">CARRIAGE RETURN</span> or the <span class="code">:</span>, so compare the value held in Register A against 3AH (ASCII: <span class="code">:</span>). If Register A equals <span class="code">:</span>, the Z FLAG is set; otherwise the NZ FLAG will be set.</div></div>
									<div class="assembly-row-combined"><div>0530H</div><div><a href="#050BH" class="memory-link">JR Z,050BH</a></div><div>If the character is a <span class="code">:</span>,
 then we don't have a good value and the Z FLAG (Zero) has been set, so 
JUMP BACK to 050BH to continue processing as if the index passed was 
zero.</div></div>
									<div class="assembly-row-combined"><div>0532H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
									<div class="assembly-row-combined"><div>0533H</div><div>CP 2CH<br>CP ","</div><div>Compare the value held in Register A against 2CH (ASCII: <span class="code">,</span>). Results: If Register A equals <span class="code">,</span>, the Z FLAG is set; otherwise the NZ FLAG will be set.</div></div>
									<div class="assembly-row-combined"><div>0535H</div><div><a href="#0526H" class="memory-link">JR Z,0526H</a></div><div>If the character was a <span class="code">,</span> then we have to process the list, so continue the routine by JUMPing to 0526H.</div></div>
									<div class="assembly-row-combined"><div>0537H</div><div><a href="#0529H" class="memory-link">JR 0529H</a></div><div>JUMP to 0529H to continue parsing the command line.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0539H">Part of the <span class="code">ON</span>
 Command; parse the line number of an ON x LINE NUMBER command, and then
 read (and discard) characters on the BASIC line until we hit a <span class="code">CARRIAGE RETURN</span> or a <span class="code">:</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0539H</div><div><a href="#0EBDH" class="memory-link">CALL 0EBDH</a></div><div>GOSUB
 to 0EBDH to parse an integer into HL or set NZ for an error. RETURN if 
NZ, or JUMP to 08C9H to display the "WHAT" error otherwise.</div></div>
									<div class="assembly-row-combined" id="053CH"><div>053CH</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
									<div class="assembly-row-combined"><div>053DH</div><div>CP 3AH</div><div>Compare the value held in Register A against 3AH (ASCII: <span class="code">:</span>). Results: If Register A equals <span class="code">:</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>053FH</div><div>RET Z</div><div>If the character was a <span class="code">:</span>, then the Z FLAG will have been set, so RETurn to the caller.</div></div>
									<div class="assembly-row-combined"><div>0540H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
									<div class="assembly-row-combined"><div>0542H</div><div>RET Z</div><div>If the character was a <span class="code">CARRIAGE RETURN</span>, then the Z FLAG will have been set, so RETurn to the caller.</div></div>
									<div class="assembly-row-combined"><div>0543H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
									<div class="assembly-row-combined"><div>0544H</div><div><a href="#053CH" class="memory-link">JR 053CH</a></div><div>LOOP BACK to the top of this routine at 053CH to keep checking characters until we hit a <span class="code">CARRIAGE RETURN</span>) or a <span class="code">:</span>).</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0546H">Entry point for the <span class="code">FOR</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0546H</div><div><a href="#0A9FH" class="memory-link">CALL 0A9FH</a></div><div>GOSUB
 to 0A9FH to move the BASIC language stack to make room for a new stack 
entry (like the return address of a GOSUB or the value of a FOR loop).</div></div>
									<div class="assembly-row-combined"><div>0549H</div><div><a href="#08A8H" class="memory-link">CALL 08A8H</a></div><div>GOSUB to 08A8H to parse for a variable which is then followed by an equal and an expression.</div></div>
									<div class="assembly-row-combined"><div>054CH</div><div>LD (40A5H),HL</div><div>Store the value held in Register Pair HL into memory location 40A5H (which is the pointer to the current FOR LOOP variable).</div></div>
									<div class="assembly-row-combined"><div>054FH</div><div>LD HL,030BH</div><div>Let Register Pair HL equal 030BH, which will be the location in ROM where the command lookup table is, starting with the <span class="code">TO</span> command.</div></div>
									<div class="assembly-row-combined" id="0552H"><div>0552H</div><div><a href="#0343H" class="memory-link">JP 0343H</a></div><div>JUMP to 0343H in the READY COMMAND LOOP to try to match reserved words, starting at the <span class="code">TO</span> command.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0555H">Entry point for the <span class="code">TO</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0555H</div><div><a href="#0807H" class="memory-link">CALL 0807H</a></div><div>Determine
 the TO value which is present on the command line via a GOSUB to 0807H 
to calculate an integer expression with the results into Register Pair 
HL.</div></div>
									<div class="assembly-row-combined"><div>0558H</div><div>LD (406EH),HL</div><div>Store
 the "TO" value, held in Register Pair ,HL into memory location 406EH 
(which holds current FOR LOOP END (i.e., the TO) value).</div></div>
									<div class="assembly-row-combined"><div>055BH</div><div>LD HL,0311H</div><div>Let Register Pair HL equal 0311H, which will be the location in ROM where the command lookup table is, starting with the <span class="code">STEP</span> command.</div></div>
									<div class="assembly-row-combined"><div>055EH</div><div><a href="#0552H" class="memory-link">JR 0552H</a></div><div>JUMP to 0343H in the READY COMMAND LOOP to try to match reserved words, starting at the <span class="code">STEP</span> command.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0560H">Entry point for the <span class="code">STEP</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0560H</div><div><a href="#0807H" class="memory-link">CALL 0807H</a></div><div>Determine
 the STEP value which is present on the command line via a GOSUB to 
0807H to calculate an integer expression with the results into Register 
Pair HL.</div></div>
									<div class="assembly-row-combined"><div>0563H</div><div><a href="#0568H" class="memory-link">JR 0568H</a></div><div>Skip over the next instruction via a JUMP to 0568H.</div></div>
									<div class="assembly-row-combined" id="0565H"><div>0565H</div><div>LD HL,0001H</div><div>Set a default <span class="code">STEP</span> value as 1 by setting Register Pair HL equal to 0001H.</div></div>
									<div class="assembly-row-combined" id="0568H"><div>0568H</div><div>LD (4091H),HL</div><div>Store the <span class="code">STEP</span> value (held in Register Pair HL) into the of the FOR LOOP STEP (held in memory location 4091H).</div></div>
									<div class="assembly-row-combined"><div>056BH</div><div>LD HL,(409FH)</div><div>Fetch the pointer to the current line being executed (held in memory location 409FH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>056EH</div><div>LD (4093H),HL</div><div>Store the value held in Register Pair HL into memory location 4093H (which holds address of the top of the current FOR LOOP).</div></div>
									<div class="assembly-row-combined"><div>0571H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0572H</div><div>LD (4095H),HL</div><div>Store the value held in Register Pair HL into memory location 4095H (which holds address of the current FOR statement).</div></div>
									<div class="assembly-row-combined"><div>0575H</div><div>LD BC,000AH</div><div>Let Register Pair BC equal 000AH (Decimal: 10).</div></div>
									<div class="assembly-row-combined"><div>0578H</div><div>LD HL,(40A5H)</div><div>Fetch
 the value held in memory location 40A5H (which is the pointer to the 
current FOR LOOP variable) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>057BH</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>057CH</div><div>LD H,B</div><div>Copy the contents of Register B (which is a 00H) into Register H.</div></div>
									<div class="assembly-row-combined"><div>057DH</div><div>LD L,B</div><div>Copy the contents of Register B (which is a 00H) into Register L.</div></div>
									<div class="assembly-row-combined"><div>057EH</div><div>ADD HL,SP</div><div>LET Register Pair HL = Register Pair HL + Register SP.</div></div>
									<div class="assembly-row-combined"><div>057FH</div><div>LD A,09H</div><div>Let
 Register A equal 09H. So on first pass, perhaps this sets Register A to
 09, just to be overwritten by a LD A,xx. Since there is a jump point to
 0580H, I assume that this some cleverness to also have a LD HL,BC on 
future passes.</div></div>
									<div class="assembly-row-combined" id="0580H"><div>0580H</div><div>ADD HL,BC</div><div>Let HL = HL + BC.</div></div>
									<div class="assembly-row-combined"><div>0581H</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair HL and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>0582H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
									<div class="assembly-row-combined"><div>0583H</div><div>OR (HL)</div><div>OR the value stored at (HL+1) against the value stored at (HL) which is now in Register A. The results are stored in Register A.</div></div>
									<div class="assembly-row-combined"><div>0584H</div><div><a href="#059EH" class="memory-link">JR Z,059EH</a></div><div>If (HL+1) = (HL) then the Z FLAG will have been set, JUMP to 059EH to clean up and exit the routine.</div></div>
									<div class="assembly-row-combined"><div>0586H</div><div>LD A,(HL)</div><div>If they differ, then fetch the value held in the memory location pointed to by Register Pair HL and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>0587H</div><div>DEC HL</div><div>DECrement the value stored in Register Pair HL by 1.</div></div>
									<div class="assembly-row-combined"><div>0588H</div><div>CP D</div><div>Compare the value held in Register A against the value held in Register D. Results:
										<ul>
											<li>If Register A equals the value held in Register D, the Z FLAG is set.</li>
											<li>If A &lt; D, the CARRY FLAG will be set.</li>
											<li>If A &gt;= D, the NO CARRY FLAG will be set.</li>
										</ul>
									</div></div>
									<div class="assembly-row-combined"><div>0589H</div><div><a href="#0580H" class="memory-link">JR NZ,0580H</a></div><div>If the NZ FLAG (Not Zero) has been set, LOOP BACK to 0580H.</div></div>
									<div class="assembly-row-combined"><div>058BH</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>058CH</div><div>CP E</div><div>Compare the value held in Register A against the value held in Register E. Results:
										<ul>
											<li>If Register A equals the value held in Register E, the Z FLAG is set.</li>
											<li>If A &lt; E, the CARRY FLAG will be set.</li>
											<li>If A &gt;= E, the NO CARRY FLAG will be set.</li>
										</ul>
									</div></div>
									<div class="assembly-row-combined"><div>058DH</div><div><a href="#0580H" class="memory-link">JR NZ,0580H</a></div><div>If the NZ FLAG (Not Zero) has been set, LOOP BACK to 0580H.</div></div>
									<div class="assembly-row-combined"><div>058FH</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0590H</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
									<div class="assembly-row-combined"><div>0593H</div><div>ADD HL,SP</div><div>LET Register Pair HL = Register Pair HL + Register SP.</div></div>
									<div class="assembly-row-combined"><div>0594H</div><div>LD B,H</div><div>Copy the contents of Register H into Register B.</div></div>
									<div class="assembly-row-combined"><div>0595H</div><div>LD C,L</div><div>Copy the contents of Register L into Register C.</div></div>
									<div class="assembly-row-combined"><div>0596H</div><div>LD HL,000AH</div><div>Let Register Pair HL equal 000AH (Decimal: 10).</div></div>
									<div class="assembly-row-combined"><div>0599H</div><div>ADD HL,DE</div><div>LET Register Pair HL = Register Pair HL + Register DE.</div></div>
									<div class="assembly-row-combined"><div>059AH</div><div><a href="#0A77H" class="memory-link">CALL 0A77H</a></div><div>GOSUB to 0A77H to copy the bytes, backwards, from BC through DE to HL.</div></div>
									<div class="assembly-row-combined"><div>059DH</div><div>LD SP,HL</div><div>Copy the contents of Register Pair HL into Register Pair SP.</div></div>
									<div class="assembly-row-combined" id="059EH"><div>059EH</div><div>LD HL,(4095H)</div><div>Fetch the value held in memory location (4095H) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05A1H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05A2H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="05A3H">Entry point for the <span class="code">NEXT</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>05A3H</div><div>RST 38H</div><div>RST
 38H checks the command line to see if the next non-space character is 
an existing variable; HL to point to the variable if it exists and CARRY
 set if it doesn't.</div></div>
									<div class="assembly-row-combined"><div>05A4H</div><div><a href="#08C9H" class="memory-link">JP C,08C9H</a></div><div>If
 the C FLAG (Carry) has been set, then we didn't get a variable after 
the NEXT command so JUMP to 08C9H to display the "WHAT" error.</div></div>
									<div class="assembly-row-combined"><div>05A7H</div><div>LD (409BH),HL</div><div>Store the value held in Register Pair HL into the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH).</div></div>
									<div class="assembly-row-combined" id="05AAH"><div>05AAH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>05ABH</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05ACH</div><div>LD HL,(40A5H)</div><div>Fetch
 the value held in memory location 40A5H (which is the pointer to the 
current FOR LOOP variable) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05AFH</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L. Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
									<div class="assembly-row-combined"><div>05B1H</div><div><a href="#08CAH" class="memory-link">JP Z,08CAH</a></div><div>If HL=0 then there is no active FOR command so JUMP to 08CAH to display the "WHAT" error message.</div></div>
									<div class="assembly-row-combined"><div>05B4H</div><div>RST 20H</div><div>Compare
 the NEXT variable with the FOR variable (i.e., HL and DE) via a call to
 RST 20H. Results: NZ means no match, Z means match, and if H=D but L 
&lt; E, then the C flag will be set.</div></div>
									<div class="assembly-row-combined"><div>05B5H</div><div><a href="#05C0H" class="memory-link">JR Z,05C0H</a></div><div>If they match, jump away to 05C0H.</div></div>
									<div class="assembly-row-combined"><div>05B7H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05B8H</div><div><a href="#0A84H" class="memory-link">CALL 0A84H</a></div><div>GOSUB
 to 0A84H to move the various items held in the BASIC stack to their 
corresponding RAM location values. Essentially a group POP from the 
BASIC stack.</div></div>
									<div class="assembly-row-combined"><div>05BBH</div><div>LD HL,(409BH)</div><div>Fetch the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05BEH</div><div><a href="#05AAH" class="memory-link">JR 05AAH</a></div><div>JUMP to 05AAH to see if the NEXT command now matches the proper variable.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="05C0H">Continuation of the <span class="code">NEXT</span> Command; jumped here if the FOR and NEXT variables match the current BASIC stack frame.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>05C0H</div><div><a href="#0BC3H" class="memory-link">CALL 0BC3H</a></div><div>GOSUB to 0BC3H to push the variable held in Register Pair HL into the FLOATING POINT STACK.</div></div>
									<div class="assembly-row-combined"><div>05C3H</div><div><a href="#0C0BH" class="memory-link">CALL 0C0BH</a></div><div>GOSUB to 0C0BH to convert the number in the FLOATING POINT STACK into an INTEGER to be stored in Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05C6H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05C7H</div><div>LD HL,(4091H)</div><div>Fetch the FOR LOOP STEP (held in memory location 4091H) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05CAH</div><div>PUSH HL</div><div>Save the FOR LOOP STEP value (held in Register Pair HL) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>05CBH</div><div>ADD HL,DE</div><div>Calculate the new step value by adding that value with Register Pair DE; results in Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05CCH</div><div>PUSH HL</div><div>Save the new STEP value (held in Register Pair HL) to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>05CDH</div><div><a href="#0C59H" class="memory-link">CALL 0C59H</a></div><div>GOSUB to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
									<div class="assembly-row-combined"><div>05D0H</div><div>LD HL,(40A5H)</div><div>Fetch
 the value held in memory location 40A5H (which is the pointer to the 
current FOR LOOP variable) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05D3H</div><div><a href="#0BE9H" class="memory-link">CALL 0BE9H</a></div><div>GOSUB to 0BE9H to update the FOR variable to a new value.</div></div>
									<div class="assembly-row-combined"><div>05D6H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05D7H</div><div>LD HL,(406EH)</div><div>Fetch the current FOR LOOP END (i.e., the TO) value (held in memory location 406EH) and store it into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05DAH</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>05DBH</div><div>OR A</div><div>Set FLAGS based on the contents of Register A, most notedly in this case, the SIGN bit of the STEP value.</div></div>
									<div class="assembly-row-combined"><div>05DCH</div><div><a href="#05E0H" class="memory-link">JP P,05E0H</a></div><div>If the S FLAG has been RESET, skip the next instruction and JUMP to 05E0H.</div></div>
									<div class="assembly-row-combined"><div>05DFH</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined" id="05E0H"><div>05E0H</div><div>LD A,H</div><div>Copy the MSB of Register Pair HL (i.e., the contents of Register H) into Register A.</div></div>
									<div class="assembly-row-combined"><div>05E1H</div><div>XOR D</div><div>eXclusive OR Register D against Register A. The results are stored in Register A.</div></div>
									<div class="assembly-row-combined"><div>05E2H</div><div><a href="#05E6H" class="memory-link">JP P,05E6H</a></div><div>If the S FLAG has been RESET, skip the next instruction and JUMP to 05E6H.</div></div>
									<div class="assembly-row-combined"><div>05E5H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05E6H</div><div>RST 20H</div><div>Compare
 HL and DE via a call to RST 20H. Results: NZ means no match, Z means 
match, and if H=D but L &lt; E, then the C flag will be set.</div></div>
									<div class="assembly-row-combined"><div>05E7H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>05E8H</div><div><a href="#05F2H" class="memory-link">JR C,05F2H</a></div><div>If
 the C FLAG (Carry) has been set then the loop is done, so JUMP to 05F2H
 to restore the values from the BASIC stack into their RAM locations, 
clear the RETurn address, and continue processing the current BASIC 
line.</div></div>
									<div class="assembly-row-combined"><div>05EAH</div><div>LD HL,(4093H)</div><div>If
 we are here then the loop is not done, so fetch the address of the top 
of the current FOR LOOP (held in memory location 4093H) and store it 
into Register Pair HL.</div></div>
									<div class="assembly-row-combined"><div>05EDH</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
									<div class="assembly-row-combined"><div>05F0H</div><div><a href="#059EH" class="memory-link">JR 059EH</a></div><div>JUMP to 059EH to continue processing the LOOP.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="05F2H">Jump point to 
exit out of BASIC stack operations -- routine restores the values from 
the BASIC stack into their RAM locations, clears the RETurn address, and
 continues processing the current BASIC line.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>05F2H</div><div><a href="#0A84H" class="memory-link">CALL 0A84H</a></div><div>GOSUB
 to 0A84H to move the various items held in the BASIC stack to their 
corresponding RAM location values. Essentially a group POP from the 
BASIC stack.</div></div>
									<div class="assembly-row-combined"><div>05F5H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" name="05F6H" id="05f6h-entry-point">05F6H - Entry point for the <span class="code">REM</span> and <span class="code">DATA</span> Commands.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>05F6H</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
								<div class="assembly-row-combined"><div>05F9H</div><div><a href="#05FEH" class="memory-link">JR 05FEH</a></div><div>Skip the next intruction via a JUMP to 05FEH.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="05FBH" id="05fbh-entry-point">05FBH - Entry point for the <span class="code">IF</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>05FBH</div><div><a href="#0807H" class="memory-link">CALL 0807H</a></div><div>GOSUB to 0807H to calculate an integer expression with the results into Register Pair HL.</div></div>
								<div class="assembly-row-combined" id="05FEH"><div>05FEH<br>05FFH</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L. Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
								<div class="assembly-row-combined"><div>0600H</div><div><a href="#060BH" class="memory-link">JR NZ,060BH</a></div><div>If the NZ FLAG (Not Zero) has been set, then we have IF followed by a valid entry, so JUMP to 060BH to look for the THEN.</div></div>
								<div class="assembly-row-combined"><div>0602H</div><div><a href="#0947H" class="memory-link">CALL 0947H</a></div><div>GOSUB to 0947H to look for the next line.</div></div>
								<div class="assembly-row-combined"><div>0605H</div><div><a href="#039CH" class="memory-link">JP NC,039CH</a></div><div>If the next line was found then the NC FLAG will have been set, so JUMP to 039CH to execute that line.</div></div>
								<div class="assembly-row-combined"><div>0608H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Otherwise, enter they READY command line routine via a JUMP to 01C9H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="060BH" id="060bh-look-for-the">060BH - Look for the <span class="code">THEN</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>060BH</div><div>LD HL,0337H</div><div>Let Register Pair HL equal 0337H, which is in the RESERVED WORD LOOKUP TABLE just before the THEN command.</div></div>
								<div class="assembly-row-combined"><div>060EH</div><div><a href="#0343H" class="memory-link">JP 0343H</a></div><div>JUMP to 0343H in the READY COMMAND LOOP to try to match reserved words, starting at the THEN command.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0611H" id="0611h-entry-point">0611H - Entry point for the <span class="code">THEN</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0611H</div><div><a href="#0EC4H" class="memory-link">CALL 0EC4H</a></div><div>GOSUB to 0EC4H to parse an integer into Register Pair HL to see if we have a number or a command.</div></div>
								<div class="assembly-row-combined"><div>0614H</div><div><a href="#0513H" class="memory-link">JP NZ,0513H</a></div><div>If
 the NZ FLAG (Not Zero) has been set, then we have a non-Zero integer 
line number after the THEN (i.e., IF A=10 THEN 30), so we need to GO TO 
that line number via a JUMP to 0513H which will PUSH DE and then JUMP to
 03BCH in the GOTO routine.</div></div>
								<div class="assembly-row-combined"><div>0617H</div><div><a href="#03A2H" class="memory-link">JP 03A2H</a></div><div>If
 we're here, then we didn't get a line number after the THEN, so we need
 to see if it's a reserved word instead. JUMP to 03A2H in the middle of 
the EXECUTE NEXT LINE, which will check for BREAK (and if found, STOP) 
or else reset the cassette motor, set IX to the bottom of the floating 
point stack, set HL to point to the middle of the reserved word list, 
and parse for matching reserved words.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="061AH" id="061ah-restore-sp">061AH
 - Restore SP from a temporary storage space of 409BH and restore the 
current line being executed back into Register Pair HL and the 
associated memory location; this is jumped to at 08DCH.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>061AH</div><div>LD SP,(409BH)</div><div>Fetch the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH) and store it into Register Pair SP.</div></div>
								<div class="assembly-row-combined"><div>061EH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>061FH</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
								<div class="assembly-row-combined"><div>0622H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0623H" id="0623h-entry-point">0623H - Entry point for the <span class="code">INPUT</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0623H</div><div>RST 08H<br>23H<br>0AH</div><div>Check
 for a "#" via a call to RST 08H with parameters of 23H and an offset of
 0AH. RST 08H will move to the next non-space character and check it 
against 23H (which is a "#"). If there is no match, jump to the return 
(of the next instruction, i.e. 0626H) + 0A instructions (which would be 
0630H).</div></div>
								<div class="assembly-row-combined"><div>0626H</div><div><a href="#0EF4H" class="memory-link">CALL 0EF4H</a></div><div>If
 we are here, then there was a "#", meaning this INPUT is from cassette,
 so GOSUB to 0EF4H which turns on the cassette motor, reads the data 
header and then read the number of bytes needed to fill RAM based on the
 block addresses. Routine exits with Register A holding the CRC and 
flags set based on Register A; DE is preserved.</div></div>
								<div class="assembly-row-combined"><div>0629H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
								<div class="assembly-row-combined"><div>062AH</div><div>LD HL,(409FH)</div><div>Fetch the pointer to the current line being executed (held in memory location 409FH) and store it into Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>062DH</div><div>PUSH HL</div><div>Save the pointer to the current line being executed (held in Register Pair HL) to the top of the stack.</div></div>
								<div class="assembly-row-combined"><div>062EH</div><div><a href="#064EH" class="memory-link">JR 064EH</a></div><div>JUMP
 to 064EH which JUMPs to 06D4H which continues the INPUT routine by 
parsing the line (DE must point to the current character to be parsed).</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0630H" id="0630h-continuation">0630H - Continuation of the <span class="code">INPUT</span> Command; jumped here if the INPUT was not followed by a "#", meaning that we are inputting from the keyboard.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0630H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
								<div class="assembly-row-combined"><div>0631H</div><div><a href="#095BH" class="memory-link">CALL 095BH</a></div><div>GOSUB
 to 095BH to display a quoted expression pointed to by Register Pair DE 
and JUMP to the command line parsing routine if a CR is found, otherwise
 JUMP to the return address + 2 bytes, which will check for a <span class="code">;</span>.</div></div>
								<div class="assembly-row-combined"><div>0634H</div><div><a href="#0639H" class="memory-link">JR 0639H</a></div><div>Skip the next instruction and JUMP to 0639H.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0636H" id="0636h-continuation">0636H - Continuation of the <span class="code">INPUT</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0636H</div><div>RST 08H<br>3BH<br><a href="#0651H" class="memory-link">18H</a></div><div>Check for a <span class="code">;</span>
 via a call to RST 08H with parameters of 3BH and an offset of 18H. RST 
08H will move to the next non-space character and check it against 3BH 
(which is a <span class="code">;</span>). If there is no match, jump to the return (of the next instruction, i.e. 0639H) + 18H instructions (which would be <a href="#0651H" class="memory-link">0651H</a>).</div></div>
								<div class="assembly-row-combined" id="0639H"><div>0639H</div><div>LD HL,(409FH)</div><div>Fetch the pointer to the current line being executed (held in memory location 409FH) and store it into Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>063CH</div><div>PUSH HL</div><div>Save the pointer to the current line being executed (held in Register Pair HL) to the top of the stack.</div></div>
								<div class="assembly-row-combined"><div>063DH</div><div>LD HL,0630H</div><div>Let Register Pair HL equal 0630H / (Decimal: 1584).</div></div>
								<div class="assembly-row-combined"><div>0640H</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
								<div class="assembly-row-combined"><div>0643H</div><div>LD (409BH),SP</div><div>Store the value held in Register Pair SP into the pointer to the FOR LOOP's NEXT variable (held in memory location 409BH).</div></div>
								<div class="assembly-row-combined"><div>0647H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
								<div class="assembly-row-combined"><div>0648H</div><div>LD A,3FH</div><div>Let Register A equal 3FH (ASCII: <span class="code">?</span>).</div></div>
								<div class="assembly-row-combined"><div>064AH</div><div><a href="#08FCH" class="memory-link">CALL 08FCH</a></div><div>GOSUB
 to 08FCH to display a prompt of the character held in Register A then 
then fetch a line of input into a 53 character buffer between 40ACH and 
40F3H pointed to by Register Pair DE.</div></div>
								<div class="assembly-row-combined"><div>064DH</div><div>POP DE</div><div>Restore the current character of the line being interpreted from the top of the stack back into Register Pair DE.</div></div>
								<div class="assembly-row-combined" id="064EH"><div>064EH</div><div><a href="#06D4H" class="memory-link">JP 06D4H</a></div><div>JUMP to 06D4H which continues the INPUT routine by parsing the line (DE must point to the current character to be parsed).</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0651H" id="0651h-continuation">0651H - Continuation of the <span class="code">INPUT</span> Command; jumped here if there was no <span class="code">;</span> when one was expected.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0651H</div><div>POP AF</div><div>Clear the return address from the stack.</div></div>
								<div class="assembly-row-combined"><div>0652H</div><div><a href="#06CAH" class="memory-link">JR 06CAH</a></div><div>JUMP to 06CAH which JUMPs to 08C9H to display the "WHAT" error.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0654H" id="0654h-multi-command">0654H - Multi-Command Routine. Used by LET, INPUT, and READ to parse the characters pointed to by Register Pair DE.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0654H</div><div><a href="#08AEH" class="memory-link">JP Z,08AEH</a></div><div>If the Z FLAG (Zero) has been set, JUMP to 08AEH to parse a numeric value.</div></div>
								<div class="assembly-row-combined"><div>0657H</div><div>RST 28H</div><div>Call RST 28H to move DE to point to the next non-space character, with Register A holding that character.</div></div>
								<div class="assembly-row-combined"><div>0658H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
								<div class="assembly-row-combined"><div>0659H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>065BH</div><div><a href="#066FH" class="memory-link">JR Z,066FH</a></div><div>If the character at the BASIC line being processed is a <span class="code">CARRIAGE RETURN</span>,
 then the Z FLAG will have been set, so JUMP to 066FH to fill the rest 
of the 15 character buffer pointed to by Register Pair HL with 00H's and
 RETurn.</div></div>
								<div class="assembly-row-combined"><div>065DH</div><div>CP 22H</div><div>Compare the value held in Register A against 22H (ASCII: <span class="code">"</span>). Results: If Register A equals <span class="code">"</span>, the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>065FH</div><div><a href="#0678H" class="memory-link">JR Z,0678H</a></div><div>If the character at the BASIC line being processed is a <span class="code">"</span>,
 then the Z FLAG will have been set, so JUMP to 0678H to parse a quoted 
string into a 15 character buffer pointed to by Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>0661H</div><div>CP 2CH</div><div>Compare the value held in Register A against 2CH (ASCII: <span class="code">,</span>). Results: If Register A equals <span class="code">,</span>, the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>0663H</div><div><a href="#066FH" class="memory-link">JR Z,066FH</a></div><div>If the character at the BASIC line being processed is a <span class="code">,</span>,
 then the Z FLAG will have been set, so JUMP to fill the rest of the 15 
character buffer pointed to by Register Pair HL with 00H's and RETurn.</div></div>
							  </div>
							  <p class="debug-note">If we're here then we didn't get a 
CARRIAGE RETURN, , or " so we are just going to copy the data to the 
buffer pointed to by Register Pair HL.</p>
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0665H</div><div>LD (HL),A</div><div>Store the character held in Register A into the memory location pointed to by Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>0666H</div><div>INC HL</div><div>Bump HL to point to the next open space in the 15 character buffer.</div></div>
								<div class="assembly-row-combined"><div>0667H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
								<div class="assembly-row-combined"><div>0668H</div><div>LD A,L</div><div>Copy the contents of Register L (i.e., the LSB of HL) into Register A.</div></div>
								<div class="assembly-row-combined"><div>0669H</div><div>AND 0FH</div><div>MASK the value of Register A against 0FH (0000 1111), thus setting a maximum value of Register A at 15.</div></div>
								<div class="assembly-row-combined"><div>066BH</div><div><a href="#068AH" class="memory-link">JR Z,068AH</a></div><div>If
 masked value of L is zero then we have run out of space in the 15 
character buffer and the Z FLAG will have been set, so JUMP to 068AH.</div></div>
								<div class="assembly-row-combined"><div>066DH</div><div><a href="#0658H" class="memory-link">JR 0658H</a></div><div>If
 we are here, then we still have room in the 15 character buffer pointed
 to by Register Pair HL so LOOP BACK to 0658H in this routine.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="066FH" id="066fh-routine-to">066FH
 - Routine to fill the rest of the 15 character buffer pointed to by 
Register Pair HL with 00H's; jumped here if the next character is a <span class="code">CARRIAGE RETURN</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>066FH - Routine to fill the rest of the 15 character buffer 
pointed to by Register Pair HL with 00H's; jumped here if the next 
character is a CARRIAGE RETURN.</p>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>066FH</div><div>LD (HL),00H</div><div>Store the value 00H into the memory location pointed to by Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>0671H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
								<div class="assembly-row-combined"><div>0672H</div><div>LD A,L</div><div>Copy the contents of Register L (i.e., the LSB of HL) into Register A.</div></div>
								<div class="assembly-row-combined"><div>0673H</div><div>AND 0FH</div><div>MASK the value of Register A against 0FH (0000 1111), thus setting a maximum value of Register A at 15.</div></div>
								<div class="assembly-row-combined"><div>0675H</div><div><a href="#066FH" class="memory-link">JR NZ,066FH</a></div><div>If masked value of L is NOT zero, then the NZ FLAG will have been set, JUMP to 066FH.</div></div>
								<div class="assembly-row-combined"><div>0677H</div><div>RET</div><div>Otherwise, if the masked value of L is a zero then RETurn to the caller.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0678H" id="0678h-parse-a">0678H - Parse a quoted string into a 15 character buffer pointed to by Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0678H - Parse a quoted string into a 15 character buffer pointed to by Register Pair HL.</p>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0678H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
								<div class="assembly-row-combined"><div>0679H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
								<div class="assembly-row-combined"><div>067AH</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results: If Register A equals CARRIAGE RETURN, the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>067CH</div><div><a href="#066FH" class="memory-link">JR Z,066FH</a></div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a CARRIAGE RETURN, then the Z FLAG will have been set, so JUMP
 to 066FH to fill the rest of the 15 character buffer pointed to by 
Register Pair HL with 00H's and RETurn.</div></div>
								<div class="assembly-row-combined"><div>067EH</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
								<div class="assembly-row-combined"><div>067FH</div><div>CP 22H</div><div>CP 22H</div><div>Compare the value held in Register A against 22H (ASCII: <span class="code">"</span>). Results: If Register A equals ", the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>0681H</div><div><a href="#066FH" class="memory-link">JR Z,066FH</a></div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a ", then the Z FLAG will have been set, so JUMP 066FH to fill
 the rest of the 15 character buffer pointed to by Register Pair HL with
 00H's and RETurn.</div></div>
								<div class="assembly-row-combined"><div>0683H</div><div>LD (HL),A</div><div>Store the character held in Register A into the memory location pointed to by Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>0684H</div><div>INC HL</div><div>Bump HL to point to the next open space.</div></div>
								<div class="assembly-row-combined"><div>0685H</div><div>LD A,L</div><div>Copy the contents of Register L (i.e., the LSB of HL) into Register A.</div></div>
								<div class="assembly-row-combined"><div>0686H</div><div>AND 0FH</div><div>MASK the value of Register A against 0FH (0000 1111), thus setting a maximum value of Register A at 15.</div></div>
								<div class="assembly-row-combined"><div>0688H</div><div><a href="#0679H" class="memory-link">JR NZ,0679H</a></div><div>If masked value of L is NOT zero, then the NZ FLAG will have been set, JUMP to 0679H.</div></div>
								<div class="assembly-row-combined" id="068AH"><div>068AH</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
								<div class="assembly-row-combined"><div>068BH</div><div>CP 2CH</div><div>Compare the value held in Register A against 2CH (ASCII: <span class="code">,</span>). Results: If Register A equals ,, the Z FLAG is set; otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>068DH</div><div>RET Z</div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a ,, then the Z FLAG will have been set, so RETurn to the 
caller.</div></div>
								<div class="assembly-row-combined"><div>068EH</div><div>CP 0DH</div><div>Compare
 the value held in Register A against 0DH (ASCII: CARRIAGE RETURN). 
Results: If Register A equals CARRIAGE RETURN, the Z FLAG is set; 
otherwise, the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>0690H</div><div>RET Z</div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a CARRIAGE RETURN, then the Z FLAG will have been set, so 
RETurn to the caller.</div></div>
								<div class="assembly-row-combined"><div>0691H</div><div>INC DE</div><div>If
 we are here then we are out of space in the buffer, so we loop to 
fewtch and discard the characters until we hit a CARRIAGE RETURN or ,. 
First, bump DE to point to the next character on the BASIC line being 
processed.</div></div>
								<div class="assembly-row-combined"><div>0692H</div><div><a href="#068AH" class="memory-link">JR 068AH</a></div><div>JUMP 5 instructions to 068AH to keep fetching command characters from DE and checking them against a , and a CARRIAGE RETURN.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="0694H" id="0694h-multi-command">0694H
 - Multi Command Subroutine; parse the next characters of a variable. 
Used in the LET command and the INPUT command for the characters after 
the <span class="code">;</span>. If the variable does not exist, the C 
FLAG is set; a close array returns with the Z FLAG set; and a $ returns 
with register L holding either 70H (for A$) or 80H (for B$) and the Z 
FLAG set.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0694H - Multi Command Subroutine; parse the next characters of
 a variable.  Used in the LET command and the INPUT command for the 
characters after the ";".  If the variable does not exist, the C FLAG is
 set; a close array returns with the Z FLAG set; and a $ returns with 
register L holding either 70H (for A$) or 80H (for B$) and the Z FLAG 
set.</p>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>0694H</div><div>RST 38H</div><div>RST
 38H checks the command line to see if the next non-space character is 
an existing variable; HL to point to the variable if it exists and CARRY
 set if it doesn't.</div></div>
								<div class="assembly-row-combined"><div>0695H</div><div>RET C</div><div>If the C FLAG (Carry) has been set then the next non-space character is NOT an existing variable, RETurn to the caller.</div></div>
								<div class="assembly-row-combined"><div>0696H</div><div>DEC DE</div><div>Otherwise,
 since the next non-space character IS an existing variable, back up 1 
space on the instruction line by DECrementing the value stored in 
Register Pair DE by 1 to we can see how the variable ended ... was it an
 array?  was it a string?.</div></div>
								<div class="assembly-row-combined"><div>0697H</div><div>LD A,(DE)</div><div>Fetch
 the character on the BASIC line being processed (held in the memory 
location pointed to by Register Pair DE) and store it into Register A.</div></div>
								<div class="assembly-row-combined"><div>0698H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
								<div class="assembly-row-combined"><div>0699H</div><div>CP 29H</div><div>Compare the value held in Register A against 29H (ASCII: <span class="code">)</span>). Results: If Register A equals ), the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
								<div class="assembly-row-combined"><div>069BH</div><div>RET Z</div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a ), then the Z FLAG will have has been set, so we RETurn to 
the caller.</div></div>
								<div class="assembly-row-combined"><div>069CH</div><div>LD A,(DE)</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
								<div class="assembly-row-combined"><div>069DH</div><div>CP 24H</div><div>Compare the value held in Register A against 24H (ASCII: <span class="code">$</span>). Results:<ul><li>If Register A equals $, the Z FLAG is set; otherwise the NZ FLAG is set.</li></ul></div></div>
								<div class="assembly-row-combined"><div>069FH</div><div><a href="#06A3H" class="memory-link">JR Z,06A3H</a></div><div>If
 the character on the BASIC line being processed (currently pointed to 
by DE) is a $, then the Z FLAG will have been set, so JUMP to 06A3H to 
validate to A$ or B$ only (results in Register L being 70H or 80H 
respectively), or throw a WHAT error otherwise.</div></div>
								<div class="assembly-row-combined"><div>06A1H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
								<div class="assembly-row-combined"><div>06A2H</div><div>RET</div><div>RETurn to the caller.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06A3H" id="06a3h-continuation">06A3H
 - Continuation of the above routine; jumped here if the variable found 
on the BASIC line being processed ended in a "$". On exit, Register L 
will be either 70H if the variable is A$ or 80H if the variable is B$. 
DE will point to the next character on the BASIC line being processed.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>06A3H</div><div>LD A,L</div><div>Copy
 the contents of Register L (i.e., the LSB of HL) into Register A. 
Register L will be a 00H if the variable is A$ and will be 04H if the 
variable is a B$; C$ is 08H.</div></div>
								<div class="assembly-row-combined"><div>06A4H</div><div>CP 07H</div><div>Compare the value held in Register A against 07H since that is 1 less than the first invalid string value of C$. Results:<ul><li>If Register A equals 07H, the Z FLAG is set.</li><li>If A &lt; 07H, the CARRY FLAG will be set.</li><li>if A &gt;= 07H, the NO CARRY FLAG will be set.</li></ul></div></div>
								<div class="assembly-row-combined"><div>06A6H</div><div><a href="#08C9H" class="memory-link">JP NC,08C9H</a></div><div>If
 A &gt;= 07H (meaning we received a C$ or higher) then the NC FLAG will 
have been set, so JUMP to 08C9H to display the "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>06A9H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
								<div class="assembly-row-combined"><div>06AAH<br>06AAH</div><div>SLA A<br>SLA A</div><div>If the variable was B$ then this will rotate Register A from 04 to 08 to 10. If the variable was A$ then 00H remains 00H.</div></div>
								<div class="assembly-row-combined"><div>06AEH</div><div>ADD 70H</div><div>LET
 Register A = Register A + 70H. If the variable was A$ then Register A =
 70H and if the variable was B$ then Register A will be 80H</div></div>
								<div class="assembly-row-combined"><div>06B0H</div><div>LD L,A</div><div>Copy the contents of Register A (70H if the variable was A$ and 80H if the variable was B$) into Register L.</div></div>
								<div class="assembly-row-combined"><div>06B1H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
								<div class="assembly-row-combined"><div>06B2H</div><div>RET</div><div>RETurn to the caller.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06B3H" id="06b3h-this-routine">06B3H
 - This routine is JUMPed to from the RESERVED WORD LOOKUP list, if the 
main commands are not found. The reserved words after this are 
functions, math symbols, and the like.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>06B3H</div><div>LD A,(DE)</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
								<div class="assembly-row-combined"><div>06B4H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results:<ul><li>If Register A equals CARRIAGE RETURN, the Z FLAG is set.</li><li>If A &lt; CARRIAGE RETURN, the CARRY FLAG will be set.</li><li>if A &gt;= CARRIAGE RETURN, the NO CARRY FLAG will be set.</li></ul></div></div>
								<div class="assembly-row-combined"><div>06B6H</div><div><a href="#06C5H" class="memory-link">JR Z,06C5H</a></div><div>If
 the character pointed to by Register Pair DE is a CARRIAGE RETURN then 
the Z FLAG will have been set, so JUMP to 06C5H which will execute a RST
 30H, clear the RET, and continue processing the BASIC instruction line.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06B8H" id="06b8h-entry-point">06B8H - Entry point for the <span class="code">LET</span>
 Command. This is also a pass through from the exhausted RESERVE WORD 
LOOKUP list jump; meaning that if the ROM cannot find a command where it
 expected one, it is willing to assume that the line is actually a 
variable assignment.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>06B8H</div><div><a href="#0694H" class="memory-link">CALL 0694H</a></div><div>GOSUB
 to 0694H to parse the next characters of a variable. If the variable 
does not exist, the C FLAG is set; a close array returns with the Z FLAG
 set; and a $ returns with register L holding either 70H (for A$) or 80H
 (for B$) and the Z FLAG set.</div></div>
								<div class="assembly-row-combined"><div>06BBH</div><div><a href="#06CAH" class="memory-link">JR C,06CAH</a></div><div>If
 the variable does not exist then the C FLAG will have been set, JUMP to
 06CAH which JUMPs to 08C9H to display the "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>06BDH</div><div>PUSH AF</div><div>Preserve Register Pair AF to the top of the stack due to the next RST call.</div></div>
								<div class="assembly-row-combined"><div>06BEH</div><div>RST 08H<br>3DH<br>09H</div><div>Check
 for a "=" via a call to RST 08H with parameters of 3DH and an offset of
 09H. RST 08H will move to the next non-space character and check it 
against 3DH (which is a "="). If there is no match, jump to the return 
(of the next instruction, i.e. 06C1H) + 09H instructions (which would be
 06CAH) to display the "WHAT" error.</div></div>
								<div class="assembly-row-combined"><div>06C1H</div><div>POP AF</div><div>Restore AF from the stack.</div></div>
								<div class="assembly-row-combined"><div>06C2H</div><div><a href="#0654H" class="memory-link">CALL 0654H</a></div><div>GOSUB to 0654H to parse the characters pointed to by Register Pair DE (i.e., everthing after "LET variable =").</div></div>
								<div class="assembly-row-combined"><div>06C5H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06C6H" id="06c6h-continuation">06C6H - Continuation of the <span class="code">INPUT</span> Command; jumped to by 06D7H and 06EBH.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>06C6H</div><div>POP HL</div><div>Restore the value of the current line being executed from the top of the stack into Register Pair HL.</div></div>
								<div class="assembly-row-combined"><div>06C7H</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
								<div class="assembly-row-combined" id="06CAH"><div>06CAH</div><div><a href="#08C9H" class="memory-link">JP 08C9H</a></div><div>JUMP to 08C9H to display the "WHAT" error.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06CDH" id="06cdh-entry-point">06CDH - Entry point for the <span class="code">RESTORE</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
							  <div class="assembly-table">
								<div class="assembly-row-combined"><div>06CDH</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H so as to represent the beginning of the READ list when put into 401AH.</div></div>
								<div class="assembly-row-combined"><div>06D0H</div><div>LD (40A1H),HL</div><div>Store the value held in Register Pair HL into memory location 40A1H (which is the pointer for the READ command).</div></div>
								<div class="assembly-row-combined"><div>06D3H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
							  </div>
							</div>

							<br><h2 class="assembly-section-title" name="06D4H" id="06d4h-continuation">06D4H - Continuation of the <span class="code">INPUT</span> Command; this will parse the line. On entry, DE must point to the current character in the BASIC line being parsed.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>06D4H - Continuation of the INPUT Command; this will parse the
 line. On entry, DE must point to the current character in the BASIC 
line being parsed.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>06D4H</div><div><a href="#0694H" class="memory-link">CALL 0694H</a></div><div>GOSUB
 to 0694H to parse the next characters of a variable. If the variable 
does not exist, the C FLAG is set; a close array returns with the Z FLAG
 set; and a $ returns with register L holding either 70H (for A$) or 80H
 (for B$) and the Z FLAG set.</div></div>
										<div class="assembly-row-combined"><div>06D7H</div><div><a href="#06C6H" class="memory-link">JR C,06C6H</a></div><div>If
 the variable doesn't exist then the C FLAG will have been set, so JUMP 
to 06C6H to restore the pointer to the current line being executed to 
its place in RAM and to HL and then abort with a "WHAT" error.</div></div>
										<div class="assembly-row-combined"><div>06D9H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>06DAH</div><div>LD DE,40ACH</div><div>Let Register Pair DE equal 40ACH which is a dual purpose location: Buffer for command input AND output to cassette.</div></div>
										<div class="assembly-row-combined"><div>06DDH</div><div><a href="#0654H" class="memory-link">CALL 0654H</a></div><div>GOSUB to 0654H to parse the characters in the input buffer (pointed to by Register Pair DE).</div></div>
										<div class="assembly-row-combined"><div>06E0H</div><div>LD (4099H),DE</div><div>Store the value held in Register Pair DE into memory location 4099H (which is the address of a buffer in RAM).</div></div>
										<div class="assembly-row-combined"><div>06E4H</div><div>POP DE</div><div>Restore the pointer to the current character of the line being interpreted into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>06E5H</div><div>RST 08H<br>2CH<br><a href="#073BH" class="memory-link">53H</a></div><div>Check for a "<span class="code">,</span>"
 via a call to RST 08H with parameters of 2CH and an offset of 53H. RST 
08H will move to the next non-space character and check it against 2CH 
(which is a "<span class="code">,</span>"). If there is no match, jump to the return (of the next instruction, i.e. 06E8H) + 53H instructions (which would be <a href="#073BH" class="memory-link">073BH</a>).</div></div>
										<div class="assembly-row-combined"><div>06E8H</div><div><a href="#0694H" class="memory-link">CALL 0694H</a></div><div>GOSUB
 to 0694H to parse the next characters of a variable. If the variable 
does not exist, the C FLAG is set; a close array returns with the Z FLAG
 set; and a $ returns with register L holding either 70H (for A$) or 80H
 (for B$) and the Z FLAG set.</div></div>
										<div class="assembly-row-combined"><div>06EBH</div><div><a href="#06C6H" class="memory-link">JR C,06C6H</a></div><div>If
 the C FLAG (Carry) has been set, JUMP to 06C6H to restore the pointer 
to the current line being executed to its place in RAM and to HL and 
then abort with a "WHAT" error.</div></div>
										<div class="assembly-row-combined"><div>06EDH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>06EEH</div><div>PUSH AF</div><div>Temporarily save the contents of Register Pair AF to the top of the stack so that the RST 08H doesn't destroy them.</div></div>
										<div class="assembly-row-combined"><div>06EFH</div><div>LD DE,(4099H)</div><div>Fetch the address of the buffer in RAM (held in memory location 4099H) and store it into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>06F3H</div><div>RST 08H<br>2CH<br>4BH</div><div>Check for a "<span class="code">,</span>"
 via a call to RST 08H with parameters of 2CH and an offset of 4BH. RST 
08H will move to the next non-space character and check it against 2CH 
(which is a "<span class="code">,</span>"). If there is no match, jump to the return (of the next instruction, i.e. 06F6H) + 4BH instructions (which would be 0741H).</div></div>
										<div class="assembly-row-combined"><div>06F6H</div><div>POP AF</div><div>Restore AF from the stack.</div></div>
										<div class="assembly-row-combined"><div>06F7H</div><div><a href="#06DDH" class="memory-link">JR 06DDH</a></div><div>JUMP to 06DDH to parse the next value.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="06F9H" id="06f9h-entry-point">06F9H - Entry point for the <span class="code">READ</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>06F9H - Entry point for the READ Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>06F9H</div><div><a href="#0694H" class="memory-link">CALL 0694H</a></div><div>GOSUB
 to 0694H to parse the next characters of a variable. If the variable 
does not exist, the C FLAG is set; a close array returns with the Z FLAG
 set; and a $ returns with register L holding either 70H (for A$) or 80H
 (for B$) and the Z FLAG set.</div></div>
										<div class="assembly-row-combined"><div>06FCH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>06FDH</div><div><a href="#0742H" class="memory-link">JR C,0742H</a></div><div>If the variable doesn't exist then the C FLAG will have been set, so JUMP to 0742H to handle the situation where a "<span class="code">,</span>" was needed but not found.</div></div>
										<div class="assembly-row-combined"><div>06FFH</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0700H</div><div>LD DE,(40A1H)</div><div>Fetch the pointer for the READ command (held in memory location 40A1H) and store it into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0704H<br>0705H</div><div>LD A,D<br>OR E</div><div>Since
 the Z-80 cannot test Register Pair DE against zero, the common trick is
 to set Register A to equal to Register D, and then OR A against 
Register E. Only if both Register D and Register E were zero can the Z 
FLAG be set.</div></div>
										<div class="assembly-row-combined"><div>0706H</div><div><a href="#0731H" class="memory-link">JR NZ,0731H</a></div><div>If the READ POINTER is not zero, then JUMP to 0731H.</div></div>
										<div class="assembly-row-combined"><div>0708H</div><div>LD DE,4200H</div><div>Since the READ POINTER was zero, we need to start from scratch. Let Register Pair DE equal 4200H.<br><b>NOTE:</b> 4200H is the top of system stack pointer.</div></div>
										<div class="assembly-row-combined" id="070BH"><div>070BH</div><div>PUSH HL</div><div>Temporarily preserve contents of Register Pair HL to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>070CH</div><div><a href="#0751H" class="memory-link">CALL 0751H</a></div><div>GOSUB
 to 0751H to examine the current BASIC instruction line for DATA 
statements. If we hit the end of the program with no DATA statements, 
the C FLAG will be set.</div></div>
										<div class="assembly-row-combined"><div>070FH</div><div>POP HL</div><div>Restore Register Pair HL from the stack.</div></div>
										<div class="assembly-row-combined"><div>0710H</div><div><a href="#0745H" class="memory-link">JR C,0745H</a></div><div>If
 the C FLAG (Carry) has been set then no DATA statements were found; 
making the triggered READ command a problem, so JUMP to 0745H to display
 the "HOW" error.</div></div>
										<div class="assembly-row-combined" id="0712H"><div>0712H</div><div>POP AF</div><div>Restore Register Pair HL from the stack.</div></div>
										<div class="assembly-row-combined"><div>0713H</div><div>LD BC,(409FH)</div><div>Fetch the pointer to the current line being executed (held in memory location 409FH) and store it into Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0717H</div><div>PUSH BC</div><div>Temporarily save the contents of Register Pair BC to the top of the stack for the next 3 instructions.</div></div>
										<div class="assembly-row-combined"><div>0718H</div><div>LD BC,0000H</div><div>Let Register Pair BC equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>071BH</div><div>LD (409FH),BC</div><div>Store the value held in Register Pair BC into memory location 409FH (which is the pointer to the current line being executed).</div></div>
										<div class="assembly-row-combined"><div>071FH</div><div><a href="#0654H" class="memory-link">CALL 0654H</a></div><div>GOSUB to 0654H to parse the characters in the input buffer (pointed to by Register Pair DE).</div></div>
										<div class="assembly-row-combined"><div>0722H</div><div>POP BC</div><div>Restore the current line being executed to Register Pair BC from the stack.</div></div>
										<div class="assembly-row-combined"><div>0723H</div><div>LD (409FH),BC</div><div>Store
 the current line being executed (held in Register Pair BC) into memory 
location 409FH (which is the pointer to the current line being 
executed).</div></div>
										<div class="assembly-row-combined"><div>0727H</div><div>LD (40A1H),DE</div><div>Store the value held in Register Pair DE into memory location 40A1H (which is the pointer for the READ command).</div></div>
										<div class="assembly-row-combined"><div>072BH</div><div>POP DE</div><div>Restore the pointer to the current character of the BASIC instruction line being interpreted back into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>072CH</div><div>RST 08H<br>2CH<br><a href="#0740H" class="memory-link">11H</a></div><div>Check for a "<span class="code">,</span>"
 via a call to RST 08H with parameters of 2CH and an offset of 11H. RST 
08H will move to the next non-space character and check it against 2CH 
(which is a "<span class="code">,</span>"). If there is no match, jump to the return (of the next instruction, i.e. 072FH) + 11H instructions (which would be <a href="#0740H" class="memory-link">0740H</a>).</div></div>
										<div class="assembly-row-combined"><div>072FH</div><div><a href="#06F9H" class="memory-link">JR 06F9H</a></div><div>If the next character is a "<span class="code">,</span>" then JUMP to 06F9H to the top of this READ routine.</div></div>
										<div class="assembly-row-combined"><div>0731H</div><div>RST 08H<br>2CH<br>02H</div><div>Check for a "<span class="code">,</span>"
 via a call to RST 08H with parameters of 2CH and an offset of 02H. RST 
08H will move to the next non-space character and check it against 2CH 
(which is a "<span class="code">,</span>"). If there is no match, jump to the return (of the next instruction, i.e. 0734H) + 02H instructions (which would be 0736H).</div></div>
										<div class="assembly-row-combined"><div>0734H</div><div><a href="#0712H" class="memory-link">JR 0712H</a></div><div>LOOP BACKto 0712H.</div></div>
										<div class="assembly-row-combined"><div>0736H</div><div>RST 08H<br>0DH<br><a href="#07F1H" class="memory-link">08H</a></div><div>Check
 for a "CARRIAGE RETURN" via a call to RST 08H with parameters of 0DH 
and an offset of 08H. RST 08H will move to the next non-space character 
and check it against 0DH (which is a "CARRIAGE RETURN"). If there is no 
match, jump to the return (of the next instruction, i.e. 0739H) + 08H 
instructions (which would be <a href="#07F1H" class="memory-link">07F1H</a>).</div></div>
										<div class="assembly-row-combined"><div>0739H</div><div><a href="#070BH" class="memory-link">JR 070BH</a></div><div>LOOP BACK to 070BH.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="073BH" id="073bh-continuation">073BH - Continuation of the <span class="code">INPUT</span> Command; JUMPed here if a "<span class="code">,</span>" wasn't found at 06E5H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>073BH - Continuation of the INPUT Command; JUMPed here if a "," wasn't found at 06E5H.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>073BH</div><div>POP HL</div><div>Restore the pointer to the current line being executed into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>073CH</div><div>LD (409FH),HL</div><div>Store the value held in Register Pair HL into memory location 409FH (which is the pointer to the current line being executed).</div></div>
										<div class="assembly-row-combined"><div>073FH</div><div>POP AF</div><div>Discard the next stack entry.</div></div>
										<div class="assembly-row-combined"><div>0740H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0741H" id="0741h-continuation">0741H - Continuation of the <span class="code">INPUT</span> Command; JUMPed here if a "<span class="code">,</span>" wasn't found at 06F3H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0741H - Continuation of the INPUT Command; JUMPed here if a "," wasn't found at 06F3H.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0741H</div><div>POP AF</div><div>Clear the RETurn address from the stack.</div></div>
										<div class="assembly-row-combined"><div>0742H</div><div><a href="#08CAH" class="memory-link">JP 08CAH</a></div><div>JUMP to 08CAH to display the "WHAT" error message.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0745H" id="0745h-continuation">0745H - Continuation of the <span class="code">READ</span> Command; jumped here from 0710H when no DATA statements were found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0745H - Continuation of the READ Command; jumped here from 0710H when no DATA statements were found.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0745H</div><div>POP AF</div><div>Clear the RETurn address from the stack.</div></div>
										<div class="assembly-row-combined"><div>0746H</div><div><a href="#01A3H" class="memory-link">JP 01A3H</a></div><div>JUMP to 01A3H to display the "HOW?" error.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0749H" id="0749h-jumped-here">0749H
 - JUMPed here from the DATA PARSE TABLE (at 0BBFH) if the DATA 
statement is located, and DE now points to the first entry of that DATA 
statement.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0749H - JUMPed here from the DATA PARSE TABLE (at 0BBFH) if 
the DATA statement is located, and DE now points to the first entry of 
that DATA statement.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0749H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
										<div class="assembly-row-combined"><div>074AH</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="074BH" id="074bh-this-is">074BH
 - This is JUMPed to by the JP (HL) in 0377H and in the DATA PARSE TABLE
 if DATA statement was not found. This routine loops through the 
characters on the BASIC line being processed until it hits a <span class="code">CARRIAGE RETURN</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>074BH - This is JUMPed to by the JP (HL) in 0377H and in the 
DATA PARSE TABLE if DATA statement was not found. This routine loops 
through the characters on the BASIC line being processed until it hits a
 <span class="code">CARRIAGE RETURN</span>.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>074BH</div><div>LD A,(DE)</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
										<div class="assembly-row-combined"><div>074CH</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
										<div class="assembly-row-combined"><div>074DH</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
										<div class="assembly-row-combined"><div>074FH</div><div><a href="#074BH" class="memory-link">JR NZ,074BH</a></div><div>If the <span class="code">CARRIAGE RETURN</span> has still not been found, the NZ FLAG will have been set, so LOOP to back to the top of this routine at 074BH.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0751H" id="0751h-examine-the">0751H
 - Examine the current BASIC instruction line for DATA statements. If we
 hit the end of the program with no DATA statements, the C FLAG will be 
set.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0751H - Examine the current BASIC instruction line for DATA 
statements. If we hit the end of the program with no DATA statements, 
the C FLAG will be set.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0751H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
										<div class="assembly-row-combined"><div>0752H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
										<div class="assembly-row-combined"><div>0753H</div><div>LD HL,(406CH)</div><div>Fetch the pointer to the top of used RAM (held in memory location 406CH) and store it into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0756H</div><div>RST 20H</div><div>Compare
 HL and DE via a call to RST 20H. Results: NZ means no match, Z means 
match, and if H=D but L &lt; E, then the C flag will be set.</div></div>
										<div class="assembly-row-combined"><div>0757H</div><div>RET C</div><div>If HL &lt; DE then the C FLAG (Carry) will have been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0758H</div><div>LD HL,0BBAH</div><div>Let Register Pair HL equal 0BBAH.</div></div>
										<div class="assembly-row-combined"><div>075BH</div><div><a href="#07AAH" class="memory-link">JR 07AAH</a></div><div>JUMP
 to 07AAH which JUMPs to 0343H in the READY COMMAND LOOP, with HL 
pointing to 0BBAH as the RESERVED WORD LOOKUP/VECTOR TABLE starting 
point.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="075DH" id="075dh-parse-an">075DH - Parse an optional relational expression "<span class="code">&gt;</span>" "<span class="code">&lt;</span>" or "<span class="code">=</span>".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>075DH - Parse an optional relational expression "&gt;" "&lt;" or "=".</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>075DH</div><div><a href="#07A7H" class="memory-link">CALL 07A7H</a></div><div>GOSUB to 07A7H to look for "&gt;" "&lt;" or "=" on the command line.</div></div>
										<div class="assembly-row-combined"><div>0760H</div><div><a href="#0C59H" class="memory-link">JP 0C59H</a></div><div>GOSUB to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0763H" id="0763h-entry-point">0763H - Entry point for a <span class="code">&gt;</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0763H - Entry point for a "&gt;" Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0763H</div><div>RST 08H<br>3DH<br>06H</div><div>Check
 for a "=" via a call to RST 08H with parameters of 3DH and an offset of
 06H. RST 08H will move to the next non-space character and check it 
against 3DH (which is a "="). If there is no match, jump to the return 
(of the next instruction, i.e. 0766H) + 06H instructions (which would be
 076CH) to process a straight <span class="code">&gt;</span>.</div></div>
										<div class="assembly-row-combined"><div>0766H</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>If we are here, then the "=" was found after the "&gt;" so GOSUB to 0799H to compare two numbers on a "&gt;=" basis.</div></div>
										<div class="assembly-row-combined"><div>0768H</div><div>RLCA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and to bit 
0.</div></div>
										<div class="assembly-row-combined"><div>0769H</div><div>RET C</div><div>If the C FLAG (Carry) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>076AH</div><div><a href="#07A3H" class="memory-link">JR 07A3H</a></div><div>Otherwise, JUMP to 07A3H in the NUMERIC COMPARISON routine to set HL to 0001H (meaning TRUE) and RETurn to the routine caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="076CH" id="076ch-part-of-the">076CH - Part of the <span class="code">&gt;</span> Command; JUMPed here if the "=" was not found in <a href="#0763H" class="memory-link">0763H</a>, to process a straight <span class="code">&gt;</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>076CH - Part of the &gt; Command; JUMPed here if the "=" was not found in <a href="#0763H" class="memory-link">0763H</a>, to process a straight &gt;.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>076CH</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>GOSUB to 0799H to compare two numbers.</div></div>
										<div class="assembly-row-combined"><div>076FH</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0770H</div><div>RET C</div><div>If the C FLAG (Carry) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0771H</div><div><a href="#07A3H" class="memory-link">JR 07A3H</a></div><div>JUMP to 07A3H in the NUMERIC COMPARISON routine to set HL to 0001H (meaning TRUE) and RETurn to the routine caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0773H" id="0773h-entry-point">0773H - Entry point for a "<span class="code">&lt;</span>" Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0773H - Entry point for a "<span class="code">&lt;</span>" Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0773H</div><div>RST 08H<br>3DH<br><a href="#0782H" class="memory-link">0CH</a></div><div>Check
 for a "=" via a call to RST 08H with parameters of 3DH and an offset of
 0CH. RST 08H will move to the next non-space character and check it 
against 3DH (which is a "="). If there is no match, jump to the return 
(of the next instruction, i.e. 0776H) + 0CH instructions (which would be
 <a href="#0782H" class="memory-link">0782H</a>) to check for <span class="code">&lt;&gt;</span>.</div></div>
										<div class="assembly-row-combined"><div>0776H</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>If an "=" was found, GOSUB to 0799H to compare two numbers on a "&lt;=" basis.</div></div>
										<div class="assembly-row-combined"><div>0779H</div><div>LD HL,0001H</div><div>Let Register Pair HL equal 0001H to indicate TRUE.</div></div>
										<div class="assembly-row-combined"><div>077CH</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>077DH</div><div>RET C</div><div>If the C FLAG (Carry) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>077EH</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H to indicate FALSE.</div></div>
										<div class="assembly-row-combined"><div>0781H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0782H" id="0782h-part-of-the">0782H - Part of the "<span class="code">&lt;</span>" Command; JUMPed here if an "=" was NOT found (so no <span class="code">&lt;=</span>), to next check for <span class="code">&lt;&gt;</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0782H - Part of the "&lt;" Command; JUMPed here if an "=" was NOT found (so no &lt;=), to next check for &lt;&gt;.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0782H</div><div><a href="#0791H" class="memory-link">RST 08H<br>3EH<br>0CH</a></div><div>Check for a "<span class="code">&gt;</span>"
 via a call to RST 08H with parameters of 3EH and an offset of 0CH. RST 
08H will move to the next non-space character and check it against 3EH 
(which is a "<span class="code">&gt;</span>"). If there is no match, jump to the return (of the next instruction, i.e. 0785H) + 0CH instructions (which would be <a href="https://www.trs-80.com/0791H" class="memory-link">0791H</a>) to handle a straight "<span class="code">&lt;</span>".</div></div>
										<div class="assembly-row-combined"><div>0785H</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>If the "<span class="code">&gt;</span>" was found, GOSUB to 0799H to compare two numbers on a "&lt;&gt;" basis.</div></div>
										<div class="assembly-row-combined"><div>0788H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0789H</div><div><a href="#07A3H" class="memory-link">JR 07A3H</a></div><div>JUMP to 07A3H in the NUMERIC COMPARISON routine to set HL to 0001H (meaning TRUE) and RETurn to the routine caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="078BH" id="078bh-entry-point">078BH - Entry point for a <span class="code">=</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>078BH - Entry point for a = Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>078BH</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>GOSUB to 0799H to compare two numbers on an "=" basis.</div></div>
										<div class="assembly-row-combined"><div>078EH</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>078FH</div><div><a href="#07A3H" class="memory-link">JR 07A3H</a></div><div>JUMP to 07A3H in the NUMERIC COMPARISON routine to set HL to 0001H (meaning TRUE) and RETurn to the routine caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0791H" id="0791h-part-of-the">0791H - Part of the "<span class="code">&lt;</span>" Command; JUMPed here to test a straight "<span class="code">&lt;</span>" math operation.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0791H - Part of the "<span class="code">&lt;</span>" Command; JUMPed here to test a straight "<span class="code">&lt;</span>" math operation.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0791H</div><div><a href="#0799H" class="memory-link">CALL 0799H</a></div><div>GOSUB to 0799H to compare two numbers on a "<span class="code">&lt;</span>" basis.</div></div>
										<div class="assembly-row-combined"><div>0794H</div><div>RET NC</div><div>If the NC FLAG (No Carry) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0795H</div><div><a href="#07A3H" class="memory-link">JR 07A3H</a></div><div>JUMP to 07A3H in the NUMERIC COMPARISON routine to set HL to 0001H (meaning TRUE) and RETurn to the routine caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0797H" id="0797h-this-is-the">0797H - This is the jump point in the RESERVED WORD LOOKUP TABLE for where "<span class="code">&gt;</span>", "<span class="code">&lt;</span>" and "<span class="code">=</span>" pass through. This is where we go if the relational expression was not found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0797H - This is the jump point in the RESERVED WORD LOOKUP 
TABLE for where "&gt;", "&lt;" and "=" pass through. This is where we go
 if the relational expression was not found.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0797H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
										<div class="assembly-row-combined"><div>0798H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0799H" id="0799h-subroutine-to">0799H - Subroutine to compare two numbers.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0799H - Subroutine to compare two numbers.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0799H</div><div><a href="#07ADH" class="memory-link">CALL 07ADH</a></div><div>GOSUB to 07ADH to parse an expression.</div></div>
										<div class="assembly-row-combined"><div>079CH</div><div><a href="#0CB1H" class="memory-link">CALL 0CB1H</a></div><div>GOSUB
 to 0CB1H to fetch the top 2 entries from the Floating Point Stack into 
their register sets, remove them from the Floating Point Stack, and do a
 bunch of comparisons between the two.</div></div>
										<div class="assembly-row-combined"><div>079FH</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>07A2H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07A3H" id="07a3h-part-of-the">07A3H
 - Part of the NUMERIC COMPARISON routines. In these routines HL=0 means
 TRUE and HL=1 means FALSE. This routine sets HL to FALSE and RETurns to
 caller.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07A3H - Part of the NUMERIC COMPARISON routines. In these 
routines HL=0 means TRUE and HL=1 means FALSE. This routine sets HL to 
FALSE and RETurns to caller.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07A3H</div><div>LD HL,0001H</div><div>Let Register Pair HL equal 0001H.</div></div>
										<div class="assembly-row-combined"><div>07A6H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07A7H" id="07a7h-check-the">07A7H - Check the current BASIC program line against relational operators.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07A7H - Check the current BASIC program line against relational operators.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07A7H</div><div>LD HL,032CH</div><div>Let Register Pair HL equal 032CH, which is in the middle of the RESERVED WORD LOOKUP/VECTOR TABLE.</div></div>
										<div class="assembly-row-combined"><div>07AAH</div><div><a href="#0343H" class="memory-link">JP 0343H</a></div><div>JUMP to 0343H to look for keyword matches but starting with the keywords at 0319H (i.e., "&gt;", "=", "&lt;").</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07ADH" id="07adh-parse-an">07ADH
 - Parse an expression. This is part of the RST 18H routine as well as 
other locations and is the main expression parsing routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07ADH - Parse an expression. This is part of the RST 18H 
routine as well as other locations and is the main expression parsing 
routine.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07ADH</div><div>RST 08H<br>2DH<br><a href="#07B8H" class="memory-link">08H</a></div><div>Check
 for a "-" via a call to RST 08H with parameters of 2DH and an offset of
 08H. RST 08H will move to the next non-space character and check it 
against 2DH (which is a "-"). If there is no match, jump to the return 
(of the next instruction, i.e. 07B0H) + 08H instructions (which would be
 <a href="#07B8H" class="memory-link">07B8H</a>).</div></div>
										<div class="assembly-row-combined"><div>07B0H</div><div>LD HL,0000H</div><div>If we are here, then a "-" was found, so prepare for math by setting Register Pair HL equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>07B3H</div><div><a href="#0C59H" class="memory-link">CALL 0C59H</a></div><div>GOSUB to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
										<div class="assembly-row-combined"><div>07B6H</div><div><a href="#07CCH" class="memory-link">JR 07CCH</a></div><div>JUMP to 07CCH to continue the math by resulting from having found a "-".</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07B8H" id="07b8h-parse-an">07B8H
 - Parse an expression. This is part of the RST 18H routine as well as 
other locations; JUMPed here if a "-" wasn't found, to now check for a 
"+".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07B8H - Parse an expression. This is part of the RST 18H 
routine as well as other locations; JUMPed here if a "-" wasn't found, 
to now check for a "+".</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07B8H</div><div>RST 08H<br>2BH<br>00H</div><div>Check
 for a "+" via a call to RST 08H with parameters of 2BH and an offset of
 00H. RST 08H will move to the next non-space character and check it 
against 2BH (which is a "+"). If there is no match, jump to the return 
(of the next instruction, i.e. 00H) + 07BBH instructions (which would be
 07BBH).</div></div>
										<div class="assembly-row-combined"><div>07BBH</div><div><a href="#07D4H" class="memory-link">CALL 07D4H</a></div><div>If
 we are here, then a "+" was found, so GOSUB to 07D4H to keep looking 
for other possible operators and functions in the expression.</div></div>
										<div class="assembly-row-combined" id="07BEH"><div>07BEH</div><div>RST 08H<br>2BH<br><a href="#07C9H" class="memory-link">08H</a></div><div>Check
 for a "+" via a call to RST 08H with parameters of 2BH and an offset of
 08H. RST 08H will move to the next non-space character and check it 
against 2BH (which is a "+"). If there is no match, jump to the return 
(of the next instruction, i.e. 08H) + 07C1H instructions (which would be
 <a href="#07C9H" class="memory-link">07C9H</a>).</div></div>
										<div class="assembly-row-combined"><div>07C1H</div><div><a href="#07D4H" class="memory-link">CALL 07D4H</a></div><div>If
 we are here, then a "+" was found, so GOSUB to 07D4H to keep looking 
for other possible operators and functions in the expression.</div></div>
										<div class="assembly-row-combined"><div>07C4H</div><div><a href="#0CD3H" class="memory-link">CALL 0CD3H</a></div><div>GOSUB to 0CD3H to handle floating point addition.</div></div>
										<div class="assembly-row-combined"><div>07C7H</div><div><a href="#07BEH" class="memory-link">JR 07BEH</a></div><div>LOOP BACK 2 instructions (to 07BEH) to keep parsing.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07C9H" id="07c9h-parse-an">07C9H
 - Parse an expression. This is part of the RST 18H routine as well as 
other locations; JUMPed here if a "-" and "+" wasn't found, to now check
 for a "-".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07C9H - Parse an expression. This is part of the RST 18H 
routine as well as other locations; JUMPed here if a "-" and "+" wasn't 
found, to now check for a "-".</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07C9H</div><div>RST 08H<br>2DH<br>37H</div><div>Check
 for a "-" via a call to RST 08H with parameters of 2DH and an offset of
 37H. RST 08H will move to the next non-space character and check it 
against 2DH (which is a "-"). If there is no match, jump to the return 
(of the next instruction, i.e. 07CCH) + 37H instructions (which would be
 0803H).</div></div>
										<div class="assembly-row-combined" id="07CCH"><div>07CCH</div><div><a href="#07D4H" class="memory-link">CALL 07D4H</a></div><div>If we are here, then a "-" was found, so GOSUB to 07D4H to keep processing.</div></div>
										<div class="assembly-row-combined"><div>07CFH</div><div><a href="#0CBFH" class="memory-link">CALL 0CBFH</a></div><div>GOSUB to 0CBFH to handle Floating Point Subtraction.</div></div>
										<div class="assembly-row-combined"><div>07D2H</div><div><a href="#07BEH" class="memory-link">JR 07BEH</a></div><div>JUMP BACK to 07BEH in the prior routine to keep parsing.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07D4H" id="07d4h-parse-an">07D4H - Parse an expression. This is part of the RST 18H routine as well as other locations; JUMPed here if a "+" was found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07D4H - Parse an expression. This is part of the RST 18H routine as well as other locations; JUMPed here if a "+" was found.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07D4H</div><div><a href="#07EDH" class="memory-link">CALL 07EDH</a></div><div>GOSUB to 07EDH which will which JUMPs to 0343H in the READY COMMAND LOOP, with HL pointing to 02EEH (<span class="code">RND</span>)
 as the RESERVED WORD LOOKUP/VECTOR TABLE starting point. This would be 
the list of RESERVED WORDS that could be part of math expression: RND, 
ABS, MEM, INT, and POINT.</div></div>
										<div class="assembly-row-combined" id="07D7H"><div>07D7H</div><div>RST 08H<br>2AH<br><a href="#07E2H" class="memory-link">08H</a></div><div>Check for a "<span class="code">*</span>"
 via a call to RST 08H with parameters of 2AH and an offset of 08H. RST 
08H will move to the next non-space character and check it against 2AH 
(which is a "*"). If there is no match, jump to the return (of the next 
instruction, i.e. 08H) + 07DAH instructions (which would be <a href="#07E2H" class="memory-link">07E2H</a>).</div></div>
										<div class="assembly-row-combined"><div>07DAH</div><div><a href="#07EDH" class="memory-link">CALL 07EDH</a></div><div>If
 we are here, then the "*" was found, so GOSUB to 07EDH which will which
 JUMPs to 0343H in the READY COMMAND LOOP, with HL pointing to 02EEH (<span class="code">RND</span>)
 as the RESERVED WORD LOOKUP/VECTOR TABLE starting point. This would be 
the list of RESERVED WORDS that could be part of math expression: RND, 
ABS, MEM, INT, and POINT.</div></div>
										<div class="assembly-row-combined"><div>07DDH</div><div><a href="#0C87H" class="memory-link">CALL 0C87H</a></div><div>GOSUB to 0C87H to do Floating Point Multiplication.</div></div>
										<div class="assembly-row-combined"><div>07E0H</div><div><a href="#07D7H" class="memory-link">JR 07D7H</a></div><div>LOOP BACK 2 instructions (to 07D7H) to keep parsing.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07E2H" id="07e2h-arse-an">07E2H
 - arse an expression. This is part of the RST 18H routine as well as 
other locations; JUMPed here if the check at 07D7H didn't find a "<span class="code">*</span>".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07E2H - arse an expression. This is part of the RST 18H 
routine as well as other locations; JUMPed here if the check at 07D7H 
didn't find a "<span class="code">*</span>".</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07E2H</div><div>RST 08H<br>2FH<br>1EH</div><div>Check
 for a "/" via a call to RST 08H with parameters of 2FH and an offset of
 1EH. RST 08H will move to the next non-space character and check it 
against 2FH (which is a "/"). If there is no match, jump to the return 
(of the next instruction, i.e. 07E5H) + 1EH instructions (which would be
 0803H).</div></div>
										<div class="assembly-row-combined"><div>07E5H</div><div><a href="#07EDH" class="memory-link">CALL 07EDH</a></div><div>GOSUB to 07EDH which JUMPs to 0343H in the READY COMMAND LOOP, with HL pointing to 02EEH (<span class="code">RND</span>)
 as the RESERVED WORD LOOKUP/VECTOR TABLE starting point. This would be 
the list of RESERVED WORDS that could be part of math expression: RND, 
ABS, MEM, INT, and POINT.</div></div>
										<div class="assembly-row-combined"><div>07E7H</div><div>RLCA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and to bit 
0.</div></div>
										<div class="assembly-row-combined"><div>07E8H</div><div><a href="#0C98H" class="memory-link">CALL 0C98H</a></div><div>GOSUB to 0C98H to do a FLOATING POINT DIVIDE of the numbers at the top of the FLOATING POINT STACK.</div></div>
										<div class="assembly-row-combined"><div>07EBH</div><div><a href="#07D7H" class="memory-link">JR 07D7H</a></div><div>JUMP BACK to 07D7H to keep parsing.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07EDH" id="07edh-parse-an">07EDH
 - Parse an expression. This is part of the RST 18H routine as well as 
other locations. This will parse a primary expression.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07EDH - Parse an expression. This is part of the RST 18H 
routine as well as other locations. This will parse a primary 
expression.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07EDH</div><div>LD HL,02EEH</div><div>Let Register Pair HL equal 02EEH (<span class="code">RND</span>)
 as the RESERVED WORD LOOKUP/VECTOR TABLE starting point. This would be 
the list of RESERVED WORDS that could be part of math expression: RND, 
ABS, MEM, INT, and POINT.</div></div>
										<div class="assembly-row-combined"><div>07F0H</div><div><a href="#07AAH" class="memory-link">JR 07AAH</a></div><div>JUMP
 to 07AAH which JUMPs to 0343H in the READY COMMAND LOOP, with HL 
pointing to 02EEH as the RESERVED WORD LOOKUP/VECTOR TABLE starting 
point.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07F2H" id="07f2h-dont-see-how">07F2H
 - ???? Don't see how we get here. Part of the PARSE AN EXPRESSION 
routine. Supposedly jumps here if "intrinsic function not found" to 
parse a regular expression.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07F2H - ???? Don't see how we get here. Part of the PARSE AN 
EXPRESSION routine. Supposedly jumps here if "intrinsic function not 
found" to parse a regular expression.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07F2H</div><div>RST 38H</div><div>RST
 38H checks the command line to see if the next non-space character is 
an existing variable; HL to point to the variable if it exists and CARRY
 set if it doesn't.</div></div>
										<div class="assembly-row-combined"><div>07F3H</div><div><a href="#07F8H" class="memory-link">JR C,07F8H</a></div><div>If the C FLAG (Carry) has been set, then the variable doesn't exist, so JUMP to 07F8H to see if it is a constant instead.</div></div>
										<div class="assembly-row-combined"><div>07F5H</div><div><a href="#0BC3H" class="memory-link">JP 0BC3H</a></div><div>JUMP to 0BC3H to put the number pointed to by Register Pair HL onto the FLOATING POINT STACK.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07F8H" id="07f8h-part-of-the">07F8H
 - Part of the PARSE AN EXPRESSION routine. If we need to parse a 
regular expression, but the variable was not found, we need to assume 
that we have a constant; so we wind up here.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07F8H - Part of the PARSE AN EXPRESSION routine. If we need to
 parse a regular expression, but the variable was not found, we need to 
assume that we have a constant; so we wind up here.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07F8H</div><div><a href="#00A6H" class="memory-link">CALL 00A6H</a></div><div>GOSUB to 00A6H to analyze a Floating Point Constant.</div></div>
										<div class="assembly-row-combined"><div>07FBH</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set, RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="07FCH" id="07fch-subroutine-to">07FCH - Subroutine to verify that an integer is inside parenthesis, and parse it via a RST 18H call.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>07FCH - Subroutine to verify that an integer is inside parenthesis, and parse it via a RST 18H call.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>07FCH</div><div>RST 08H<br>28<br><a href="#0804H" class="memory-link">05H</a></div><div>We
 need to see if the number is surrounded by parenthesis. We do this a 
call to RST 08H with parameters of "(" and an offset of 05H. RST 08H 
will move to the next non-space character and check it against 28H 
(which is a "("). If there is no match, jump to the return (of the next 
instruction, i.e. 07FFH) + 05H instructions (which would be <a href="#0804H" class="memory-link">0804H</a> - which will give a WHAT error).</div></div>
										<div class="assembly-row-combined"><div>07FFH</div><div>RST 18H</div><div>We expect a number to be here, so we call RST 18 to parse an expression (and an optional expression, if any).</div></div>
										<div class="assembly-row-combined"><div>0800H</div><div>RST 08H<br>29<br>01H</div><div>We
 had an open parenthesis so we need to find the close. We do this a call
 to RST 08H with parameters of ")" and an offset of 01H. RST 08H will 
move to the next non-space character and check it against 29H (which is a
 ")"). If there is no match, jump to the return (of the next 
instruction, i.e. 0803H) + 01H instructions (which would be <a href="#0804H" class="memory-link">0804H</a> - which will give a WHAT error).</div></div>
										<div class="assembly-row-combined"><div>0803H</div><div>RET</div><div>RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0804H</div><div>JP 08C9H</div><div>JUMP to 08C9H to display the "WHAT" error.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0806H" id="0806h-i-dont-see">0806H - ??? I don't see what jumps to this instruction. Whatever it is, its trying to get to 0807H but AF and AF' are backwards.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0806H - ??? I don't see what jumps to this instruction. Whatever it is, its trying to get to 0807H but AF and AF' are backwards.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0806H</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0807H" id="0807h-calculate-an">0807H - Calculate an integer expression with the results into Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0807H - Calculate an integer expression with the results into Register Pair HL.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0807H</div><div>RST 18H</div><div>RST 18 to parse an expression (and an optional expression, if any).</div></div>
										<div class="assembly-row-combined" id="0808H"><div>0808H</div><div><a href="#0C0BH" class="memory-link">JP 0C0BH</a></div><div>JUMP to 0C0BH to convert a FLOATING number to an INTEGER; results stored in Register Pair HL.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="080BH" id="080bh-compute-the">080BH - Compute the number held in Regster Pair HL as a non-negative integer.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>080BH - Compute the number held in Regster Pair HL as a non-negative integer.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>080BH</div><div><a href="#0807H" class="memory-link">CALL 0807H</a></div><div>GOSUB to 0807H to calculate an integer expression with the results into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>080EH</div><div>BIT 7,H</div><div>Test
 Bit Number 7 of Register H, which is the bit which tracks the SIGN of 
the number. Z FLAG will be set if that bit is 0 (positive), and NZ FLAG 
will be set if that bit is 1 (negative).</div></div>
										<div class="assembly-row-combined"><div>0810H</div><div><a href="#01A2H" class="memory-link">JP NZ,01A2H</a></div><div>If
 the NZ FLAG (Not Zero) has been set, meaning the number which needed to
 be positive is actually negative, so display the "HOW?" error via a 
JUMP to 01A2H.</div></div>
										<div class="assembly-row-combined"><div>0813H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0814H" id="0814h-verify-that">0814H - Verify that an integer is within parenthesis, and calculate the integer expression with the result in Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0814H - Verify that an integer is within parenthesis, and calculate the integer expression with the result in Register Pair HL.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0814H</div><div><a href="#07FCH" class="memory-link">CALL 07FCH</a></div><div>GOSUB to 07FCH to verify that an integer is inside parenthesis, and parse it via a RST 18H call.</div></div>
										<div class="assembly-row-combined"><div>0817H</div><div><a href="#0808H" class="memory-link">JR 0808H</a></div><div>JUMP
 to 0808H to JUMP to 0C0BH to convert the number in the FLOATING POINT 
STACK into an INTEGER to be stored in Register Pair HL.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0819H" id="0819h-entry-point">0819H - Entry point for the <span class="code">ABS()</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0819H - Entry point for the ABS() command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0819H</div><div><a href="#07FCH" class="memory-link">CALL 07FCH</a></div><div>Since the <span class="code">ABS()</span>
 instruction has a number in parenthesis, we first need to GOSUB to 
07FCH to verify that an integer is inside parenthesis, and parse it via a
 RST 18H call.</div></div>
										<div class="assembly-row-combined"><div>081CH</div><div>RES 7,(IX+FFH)</div><div>In
 a nutshell, remove the negative sign. IX+FFH is the same as IX-01H, 
which is the SIGN of NUMBER 1 in the FLOATING POINT STACK. RESET (i.e., 
set as 0) BIT 7 of the SIGN of NUMBER 1 stored at the memory location 
pointed to by Register (IX-01H). Bit 7 is the bit which contains the 
sign, so by resetting it, the value in Register A is then positive.</div></div>
										<div class="assembly-row-combined"><div>0820H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0821H" id="0821h-entry-point">0821H - Entry point for the "MEM" command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0821H - Entry point for the MEM command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0821H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the current character of the line being interpreted) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0822H</div><div>LD DE,(406CH)</div><div>Fetch the pointer to the top of used RAM (held in memory location 406CH) and store it into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0826H</div><div>LD HL,(406AH)</div><div>Fetch the value of the top of physical memory (held in memory location 406AH) and store it into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0829H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
										<div class="assembly-row-combined"><div>082AH</div><div>SBC HL,DE</div><div>Subtracts
 the amount of used RAM (held stored in Register Pair DE) and the carry 
flag from the amount of total physical RAM (stored in Register Pair HL).</div></div>
										<div class="assembly-row-combined"><div>082CH</div><div>POP DE</div><div>Restore the pointer to the current character of the line being interpreted into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>082DH</div><div><a href="#0835H" class="memory-link">JR 0835H</a></div><div>JUMP
 to 0835H which Jumps to 0C59H which converts the value stored in 
Register Pair HL (i.e., the amount of free RAM available) to a floating 
point number in the Floating Point Stack.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="082FH" id="082fh-entry-point">082FH - Entry point for the <span class="code">INT()</span> command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>082FH - Entry point for the INT() command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>082FH</div><div><a href="#07FCH" class="memory-link">CALL 07FCH</a></div><div>Since the <span class="code">INT()</span>
 instruction has a number in parenthesis, we first need to GOSUB to 
07FCH to verify that an integer is inside parenthesis, and parse it via a
 RST 18H call.</div></div>
										<div class="assembly-row-combined"><div>0832H</div><div><a href="#0808H" class="memory-link">CALL 0808H</a></div><div>GOSUB to 0808H which JUMPs to 0C0BH to convert a FLOATING number to an INTEGER; results stored in Register Pair HL.</div></div>
										<div class="assembly-row-combined" id="0835H"><div>0835H</div><div><a href="#0C59H" class="memory-link">JP 0C59H</a></div><div>JUMP to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0838H" id="0838h-entry-point">0838H - Entry point for the <span class="code">RESET</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0838H - Entry point for the RESET Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0838H</div><div>LD A,80H</div><div>Let Register A equal (Decimal: 128).</div></div>
										<div class="assembly-row-combined"><div>083AH</div><div><a href="#0842H" class="memory-link">JR 0842H</a></div><div>JUMP to 0842H in the <span class="code">POINT</span> with A set to 128.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="083CH" id="083ch-entry-point">083CH - Entry point for the <span class="code">SET</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>083CH - Entry point for the SET Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>083CH</div><div>LD A,01H</div><div>Let Register A equal 01H (Decimal: 1).</div></div>
										<div class="assembly-row-combined"><div>083EH</div><div><a href="#0842H" class="memory-link">JR 0842H</a></div><div>JUMP to 0842H in the <span class="code">POINT</span> with A set to 1.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0840H" id="0840h-entry-point">0840H - Entry point for the <span class="code">POINT</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0840H - Entry point for the POINT Command.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0840H</div><div>LD A,00H</div><div>Let Register A equal 00H. This will differentiate from other routines entering this routine, whereby A is 1 for a <span class="code">SET</span> and 128 for a <span class="code">RESET</span>.</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0842H" id="0842h-this-is-the">0842H - This is the main routine for graphics. On Entry A=128 for SET, 1 for RESET, and 0 for POINT.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<p>0842H - This is the main routine for graphics. On Entry A=128 for SET, 1 for RESET, and 0 for POINT.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined" id="0842H"><div>0842H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
										<div class="assembly-row-combined"><div>0843H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0844H</div><div>RST 08H<br>28H<br>52H</div><div>Check
 for a "(" via a call to RST 08H with parameters of 28H and an offset of
 52H. RST 08H will move to the next non-space character and check it 
against 28H (which is a "("). If there is no match, jump to the return 
(of the next instruction, i.e. 0847H) + 52H instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>0847H</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>GOSUB to 080BH to convert the number held in Register Pair HL into a non-negative integer. This will be the X coordinate in <span class="code">SET (x,y)</span>.</div></div>
										<div class="assembly-row-combined"><div>084AH</div><div>PUSH HL</div><div>Save the X coordinate (held in Register Pair HL) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>084BH</div><div>RST 08H<br>2CH<br>4BH</div><div>Check
 for a "," via a call to RST 08H with parameters of 2CH and an offset of
 4BH. RST 08H will move to the next non-space character and check it 
against 2CH (which is a ","). If there is no match, jump to the return 
(of the next instruction, i.e. 084EH) + 4BH instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>084EH</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>GOSUB to 080BH to convert the number held in Register Pair HL into a non-negative integer. This will be the Y coordinate in <span class="code">SET (x,y)</span>.</div></div>
										<div class="assembly-row-combined"><div>0851H</div><div>RST 08H<br>29H<br>45H</div><div>Check
 for a ")" via a call to RST 08H with parameters of 29H and an offset of
 45H. RST 08H will move to the next non-space character and check it 
against 29H (which is a ")"). If there is no match, jump to the return 
(of the next instruction, i.e. 0851H) + 45H instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>0854H</div><div>LD BC,0030H</div><div>Let Register Pair BC equal 0030H (Decimal: 48), which is the highest vertical number.</div></div>
										<div class="assembly-row-combined"><div>0857H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
									</div>
								</div>

							<br><h2 class="assembly-section-title" name="0842H" id="0842h-this-is-the">0842H - This is the main routine for graphics. On Entry A=128 for SET, 1 for RESET, and 0 for POINT.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined" id="0842H"><div>0842H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
										<div class="assembly-row-combined"><div>0843H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0844H</div><div>RST 08H<br>28H<br>52H</div><div>Check
 for a "(" via a call to RST 08H with parameters of 28H and an offset of
 52H. RST 08H will move to the next non-space character and check it 
against 28H (which is a "("). If there is no match, jump to the return 
(of the next instruction, i.e. 0847H) + 52H instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>0847H</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>GOSUB to 080BH to convert the number held in Register Pair HL into a non-negative integer. This will be the X coordinate in <span class="code">SET (x,y)</span>.</div></div>
										<div class="assembly-row-combined"><div>084AH</div><div>PUSH HL</div><div>Save the X coordinate (held in Register Pair HL) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>084BH</div><div>RST 08H<br>2CH<br>4BH</div><div>Check
 for a "," via a call to RST 08H with parameters of 2CH and an offset of
 4BH. RST 08H will move to the next non-space character and check it 
against 2CH (which is a ","). If there is no match, jump to the return 
(of the next instruction, i.e. 084EH) + 4BH instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>084EH</div><div><a href="#080BH" class="memory-link">CALL 080BH</a></div><div>GOSUB to 080BH to convert the number held in Register Pair HL into a non-negative integer. This will be the Y coordinate in <span class="code">SET (x,y)</span>.</div></div>
										<div class="assembly-row-combined"><div>0851H</div><div>RST 08H<br>29H<br>45H</div><div>Check
 for a ")" via a call to RST 08H with parameters of 29H and an offset of
 45H. RST 08H will move to the next non-space character and check it 
against 29H (which is a ")"). If there is no match, jump to the return 
(of the next instruction, i.e. 0851H) + 45H instructions (which would be
 0899H - which JUMPs to 08C9H to display the "WHAT" error).</div></div>
										<div class="assembly-row-combined"><div>0854H</div><div>LD BC,0030H</div><div>Let Register Pair BC equal 0030H (Decimal: 48), which is the highest vertical number.</div></div>
										<div class="assembly-row-combined"><div>0857H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
									</div>
									<p class="debug-note">Do some division ... first let's divide out the Y value by subtracting until it goes negative</p>
									<div class="assembly-table">
										<div class="assembly-row-combined" id="0858H"><div>0858H</div><div>SBC HL,BC</div><div>Subtract the value stored in Register Pair BC and the carry flag from the value stored in Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>085AH</div><div><a href="#0858H" class="memory-link">JR NC,0858H</a></div><div>If there is still NO CARRY (meaning it did not yet go negative), JUMP BACK to the prior instruction.</div></div>
										<div class="assembly-row-combined"><div>085CH</div><div>ADD HL,BC</div><div>Once
 we have a carry, we bust out of that loop, and make the remainder 
positive by adding BC back into HL. With this, HL will be the "Y" value,
 between (and including) 0 and 47.</div></div>
										<div class="assembly-row-combined"><div>085DH</div><div>LD A,L</div><div>Copy the Y-Value (held in Register L) into Register A.</div></div>
									</div>
									<p class="debug-note">Next, let's get Y MOD 3 into Register H.</p>
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>085EH</div><div>LD H,FFH</div><div>Load register H with the starting quotient.</div></div>
										<div class="assembly-row-combined" id="0860H"><div>0860H</div><div>INC H</div><div>INCrement the value stored in Register H by 1.</div></div>
										<div class="assembly-row-combined"><div>0861H</div><div>SUB 03H</div><div>Divide by subtraction ... SUBtract the value 03H from Register A.</div></div>
										<div class="assembly-row-combined"><div>0863H</div><div><a href="#0860H" class="memory-link">JR NC,0860H</a></div><div>If the NC FLAG (No Carry) has been set, LOOP BACK 2 instructions to increment H and then subtract another 3 from Register A.</div></div>
										<div class="assembly-row-combined"><div>0865H</div><div>ADD 03H</div><div>We have gone negative, so now add back 03H so that Register H = the Y-Value MOD 3.</div></div>
										<div class="assembly-row-combined"><div>0867H</div><div>POP BC</div><div>Put the X-value (held at the top of the STACK) into Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0868H</div><div>LD B,H</div><div>Copy the contents of Register H into Register B.</div></div>
										<div class="assembly-row-combined"><div>0869H</div><div>SLA C</div><div>Shift
 the bits in Register C left one position, with the contents of bit 7 
being copied to the CARRY FLAG and Bit 0 being set as ZERO.</div></div>
										<div class="assembly-row-combined"><div>086BH</div><div>RR B</div><div>Divide
 Register B by 2 via a RRB which rotates the Bits in Register B to the 
right one bit position, with Bit 0 being copied to the CARRY FLAG and 
CARRY FLAG being copied to Bit 7.</div></div>
										<div class="assembly-row-combined"><div>086DH</div><div>RR C</div><div>Divide
 Register C by 2 via a RRB which rotates the Bits in Register C to the 
right one bit position, with Bit 0 being copied to the CARRY FLAG and 
CARRY FLAG being copied to Bit 7.</div></div>
										<div class="assembly-row-combined"><div>086FH</div><div>RR B</div><div>Divide
 Register B by 2 via a RRB which rotates the Bits in Register B to the 
right one bit position, with Bit 0 being copied to the CARRY FLAG and 
CARRY FLAG being copied to Bit 7.</div></div>
										<div class="assembly-row-combined"><div>0871H</div><div>RR C</div><div>Divide
 Register C by 2 via a RRB which rotates the Bits in Register C to the 
right one bit position, with Bit 0 being copied to the CARRY FLAG and 
CARRY FLAG being copied to Bit 7.</div></div>
										<div class="assembly-row-combined"><div>0873H</div><div>RLA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and the 
previous contents of the carry flag are copied to bit 0.</div></div>
										<div class="assembly-row-combined"><div>0874H</div><div>INC A</div><div>INCrement the value stored in Register A by 1.</div></div>
										<div class="assembly-row-combined"><div>0875H</div><div>SCF</div><div>Since the CARRY FLAG is going to be important, turn the CARRY FLAG on.</div></div>
									</div>
								</div>

								<p class="debug-note">At this point, Register A is the number of iterations that we have to rotate the graphic mask, Register H, to the left.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0876H</div><div>LD H,00H</div><div>Let Register H equal 00H. Register H will be the graphic mask.</div></div>
										<div class="assembly-row-combined" id="0878H"><div>0878H</div><div>RL H</div><div>Top
 of a loop. Rotate the bits in Register H left one bit position, with 
the contents of Bit 7 copied to the CARRY FLAG and CARRY FLAG copied to 
Bit 0.</div></div>
										<div class="assembly-row-combined"><div>087AH</div><div>DEC A</div><div>DECrement the value stored in Register A by 1.</div></div>
										<div class="assembly-row-combined"><div>087BH</div><div><a href="#0878H" class="memory-link">JR NZ,0878H</a></div><div>Keep rotating H until A = 0 via a JUMP to 0878H.</div></div>
									</div>
									<p class="debug-note">Next, we need to calculate the screen 
location by masking B with an OR for FCH and AND for 3FH to get a value 
between 0 and 63 (the screen width).</p>
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>087DH</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
										<div class="assembly-row-combined"><div>087EH</div><div>OR FCH</div><div>OR Register A against FCH, which turns on all bits other than bits 0 and 1.</div></div>
										<div class="assembly-row-combined"><div>0880H</div><div>AND 3FH</div><div>MASK
 the value of Register A against 3FH (0011 1111). This has the effect of
 turning off bits 7, 6, leaving only bits 5, 4, 3, 2, 1, 0 active, for a
 maximum value of 63, which is the number of characters a screen line 
can handle.</div></div>
										<div class="assembly-row-combined"><div>0882H</div><div>LD B,A</div><div>Copy the contents of Register A into Register B.</div></div>
										<div class="assembly-row-combined"><div>0883H</div><div>LD A,(BC)</div><div>Fetch the character at the screen location pointed to by Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0884H</div><div>BIT 7,A</div><div>Test
 Bit Number 7 of Register A to see if the screen location had a graphic 
character or not. Z FLAG will be set if that bit is 0, and NZ FLAG will 
be set if that bit is 1.</div></div>
										<div class="assembly-row-combined"><div>0886H</div><div><a href="#088BH" class="memory-link">JR NZ,088BH</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 088BH to test the graphic character.</div></div>
										<p class="debug-note">If we didn't jump away, the Bit 7 of 
Register A was a 0, meaning that it was not a graphic character, so we 
need to put one there!</p>
										<div class="assembly-row-combined"><div>0888H</div><div>LD A,80H</div><div>Let Register A equal 80H (Decimal: 128), which is the lowest graphic character (which is also empty).</div></div>
										<div class="assembly-row-combined"><div>088AH</div><div>LD (BC),A</div><div>Store the dummy graphic character held in Register A into the memory location pointed to by Register Pair BC.</div></div>
									</div>
								</div>

								<p class="debug-note">At this point, Register Pair BC points to 
the screen location at which the revised graphic character will be 
placed, and Register H has the graphic mask to apply to the character.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined" id="088BH"><div>088BH</div><div>POP AF</div><div>Restore the routine entry flags (0=Point, 1=Set, 128=Reset).</div></div>
										<div class="assembly-row-combined"><div>088CH</div><div>LD A,(BC)</div><div>Load Register A with the graphic character at the location of the video memory pointer in register pair BC.</div></div>
										<div class="assembly-row-combined"><div>088DH</div><div><a href="#089BH" class="memory-link">JR Z,089BH</a></div><div>If the Z FLAG (Zero) has been set, meaning we entered the routine with a 00H or POINT instruction, JUMP to 089BH.</div></div>
										<div class="assembly-row-combined"><div>088FH</div><div><a href="#08A5H" class="memory-link">JP P,08A5H</a></div><div>If the S FLAG has been RESET, JUMP to 08A5H to finish the SET command.</div></div>
										<div class="assembly-row-combined"><div>0892H</div><div>LD A,H</div><div>If we are here, then we have a RESET command ... copy the graphic mask in Register H into Register A.</div></div>
										<div class="assembly-row-combined"><div>0893H</div><div>CPL</div><div>Reverse each bit in Register A (which is the same as NOT).</div></div>
										<div class="assembly-row-combined"><div>0894H</div><div>LD H,A</div><div>Copy the contents of Register A into Register H.</div></div>
										<div class="assembly-row-combined"><div>0895H</div><div>LD A,(BC)</div><div>Fetch the graphic character at the location of the video memory pointer in register pair BC and put into into Register A.</div></div>
										<div class="assembly-row-combined"><div>0896H</div><div>AND H</div><div>RESET the graphic bit by combining the graphic mask in register H with the graphic character in Register A.</div></div>
										<div class="assembly-row-combined"><div>0897H</div><div>LD (BC),A</div><div>Save the adjusted graphic character in Register A at the location of the video memory pointer in register pair BC.</div></div>
										<div class="assembly-row-combined"><div>0898H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
										<div class="assembly-row-combined"><div>0899H</div><div><a href="#08C9H" class="memory-link">JR 08C9H</a></div><div>JUMP to 08C9H to display the "WHAT" error.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="089BH" id="089bh-part-of-the">089BH - Part of the Generic Graphics Routine; final processing of POINT command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>089BH</div><div>AND H</div><div>POINT the graphic bit by combining the graphic mask in register H with the graphic character in Register A.</div></div>
										<div class="assembly-row-combined"><div>089CH</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>089FH</div><div><a href="#08A2H" class="memory-link">JR Z,08A2H</a></div><div>If the Z FLAG (Zero) has been set, skip the next instruction.</div></div>
										<div class="assembly-row-combined"><div>08A1H</div><div>INC L</div><div>INCrement the value stored in Register L by 1.</div></div>
									</div>
									<p class="debug-note">At this point, HL will be 0 if the SQUOT being tested if OFF and HL = 1 if the SQUOT being tested if ON.</p>
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08A2H</div><div><a href="#0C59H" class="memory-link">JP 0C59H</a></div><div>JUMP to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08A5H" id="08a5h-part-of-the">08A5H - Part of the Generic Graphics Routine; final processing of SET command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08A5H</div><div>OR H</div><div>SET the graphic bit by combining the graphic mask in register H with the graphic character in Register A.</div></div>
										<div class="assembly-row-combined"><div>08A6H</div><div>LD (BC),A</div><div>Save the adjusted graphic character in Register A at the location of the video memory pointer in register pair BC.</div></div>
										<div class="assembly-row-combined"><div>08A7H</div><div>RST 30H</div><div>RST 30H will clear the RETurn address from the stack, and continue processing the current instruction line.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08A8H" id="08a8h-parse-a">08A8H - Parse a variable name followed by an "<span class="code">=</span>" and an expression (such as "FOR X = 4").<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08A8H</div><div>RST 38H</div><div>RST
 38H checks the command line to see if the next non-space character is 
an existing variable; HL to point to the variable if it exists and CARRY
 set if it doesn't.</div></div>
										<div class="assembly-row-combined"><div>08A9H</div><div><a href="#08C9H" class="memory-link">JR C,08C9H</a></div><div>If the C FLAG (Carry) has been set, JUMP to 08C9H to display the "WHAT" error.</div></div>
										<div class="assembly-row-combined"><div>08ABH</div><div>RST 08H<br>3DH<br>1BH</div><div>Check
 for a "=" via a call to RST 08H with parameters of 3DH and an offset of
 1BH. RST 08H will move to the next non-space character and check it 
against 3DH (which is a "="). If there is no match, jump to the return 
(of the next instruction, i.e. 08AEH) + 1BH instructions (which would be
 08C9H).</div></div>
										<div class="assembly-row-combined" id="08AEH"><div>08AEH</div><div>PUSH HL</div><div>Save
 the location of the variable at issue (held in Register Pair HL) to the
 top of the stack, which is necessary for the JUMP to 0BE8H.</div></div>
										<div class="assembly-row-combined"><div>08AFH</div><div>RST 18H</div><div>RST 18 to parse an expression (and an optional expression, if any).</div></div>
										<div class="assembly-row-combined"><div>08B0H</div><div><a href="#0BE8H" class="memory-link">JP 0BE8H</a></div><div>JUMP
 to 0BE8H to take the value held in the FLOATING POINT STACK and put it 
in the VARIABLE pointed to by HL (and then remove it from the FLOATING 
POINT STACK). Since this is a JUMP, that routine will RETurn out of this
 one.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08B3H" id="08b3h-check-if-the">08B3H - Check if the next character is a ":" and if yes, JUMP to 08BAH to check for a <span class="code">CARRIAGE RETURN</span> and if not then jump to the MIDDLE of the EXECUTE NEXT LINE routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08BAH</div><div>RST 08H<br>3AH<br>04H</div><div>Check
 for a ":" by calling to RST 08H with parameters of 3AH and an offset of
 04H. RST 08H will move to the next non-space character and check it 
against 3AH (which is a ":"). If there is no match, jump to the return 
(of the next instruction, i.e. 08B6H) + 04H instructions (which would be
 08BAH).</div></div>
										<div class="assembly-row-combined"><div>08B6H</div><div>POP AF</div><div>Clear the RETurn location from the stack</div></div>
										<div class="assembly-row-combined"><div>08B7H</div><div><a href="#03A2H" class="memory-link">JP 03A2H</a></div><div>JUMP
 to 03A2H in the middle of the EXECUTE NEXT LINE, which will check for 
BREAK (and if found, STOP) or else reset the cassette motor, set IX to 
the bottom of the floating point stack, set HL to point to the middle of
 the reserved word list, and parse for matching reserved words.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08BAH" id="08bah-check-if-the">08BAH - Check if the next character is a <span class="code">CARRIAGE RETURN</span> and if YES, keep processing the next line and if NO then RETurn.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08BAH</div><div>RST 08H<br>0DH<br>04H</div><div>Check for a <span class="code">CARRIAGE RETURN</span>
 by calling to RST 08H with parameters of 0DH and an offset of 04H. RST 
08H will move to the next non-space character and check it against 3AH 
(which is a <span class="code">CARRIAGE RETURN</span>). If there is no match, jump to the return (of the next instruction, i.e. 08BDH) + 04H instructions (which would be 08C1H).</div></div>
										<div class="assembly-row-combined"><div>08BDH</div><div>POP AF</div><div>Clear the RETurn location from the stack</div></div>
										<div class="assembly-row-combined"><div>08BEH</div><div><a href="#0394H" class="memory-link">JP 0394H</a></div><div>JUMP to the top of EXECUTE NEXT LINE routine at 0394H.</div></div>
										<div class="assembly-row-combined"><div>08C1H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08C2H" id="08c2h-very-common">08C2H - Very common routine to parse an integer.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08C2H</div><div><a href="#0EC4H" class="memory-link">CALL 0EC4H</a></div><div>GOSUB to 0EC4H to parse an integer into Register Pair HL.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08C5H" id="08c5h-very-common">08C5H
 - Very common jump point. This is jumped to when a command is executed 
that has no further parameters and, therefore, REQUIRES a <span class="code">CARRIAGE RETURN</span>
 as the next character. It will return out of the main routine if the 
next character is a a CARRIAGE RETURN, and display a WHAT error 
otherwise.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08C5H</div><div>RST 28H</div><div>Call RST 28H to move DE to point to the next non-space character, with Register A holding that character.</div></div>
										<div class="assembly-row-combined"><div>08C6H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set.</div></div>
										<div class="assembly-row-combined"><div>08C8H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller. Otherwise will pass through to the "WHAT" error routine which follows.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" name="08C9H" id="08c9h-display-the">08C9H - Display the "WHAT" error.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>08C9H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>08CAH</div><div>LD DE,01B4H</div><div>Let Register Pair DE equal 01B4H, which points to the "WHAT" error message in the ROM.</div></div>
										<div class="assembly-row-combined"><div>08CDH</div><div><a href="#094FH" class="memory-link">CALL 094FH</a></div><div>GOSUB to 094FH to display the message pointed to by Register Pair DE, returning once a 00H is found</div></div>
										<div class="assembly-row-combined"><div>08D0H</div><div>LD DE,(409FH)</div><div>Fetch the pointer to the current line being executed (held in memory location 409FH) and store it into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>08D4H<br>08D4H</div><div>LD A,D<br>OR E</div><div>Since
 the Z-80 cannot test Register Pair DE against zero, the common trick is
 to set Register A to equal to Register D, and then OR A against 
Register E. Only if both Register D and Register E were zero can the Z 
FLAG be set.</div></div>
										<div class="assembly-row-combined"><div>08D6H</div><div><a href="#08F1H" class="memory-link">JR Z,08F1H</a></div><div>If the Z FLAG (Zero) has been set, meaning that we are not at a line number, JUMP to 08F1H to return to the READY PROMPT.</div></div>
										<div class="assembly-row-combined"><div>08D8H</div><div>INC DE</div><div>If
 we are here, then DE holds the pointer to the line number being 
executed. Bump DE to point to the next character on the BASIC line being
 processed.</div></div>
										<div class="assembly-row-combined"><div>08D9H</div><div>LD A,(DE)</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
										<div class="assembly-row-combined"><div>08DAH</div><div>DEC DE</div><div>DECrement the value stored in Register Pair DE by 1 so that it once again holds the pointer to the line number being executed.</div></div>
										<div class="assembly-row-combined"><div>08DBH</div><div>OR A</div><div>Set FLAGS based on the contents of Register A (and, in all events, clear the CARRY FLAG).</div></div>
										<div class="assembly-row-combined"><div>08DCH</div><div><a href="#061AH" class="memory-link">JP M,061AH</a></div><div>If
 the S FLAG has been SET, JUMP to 061AH to restore SP from a temporary 
storage space of 409BH and restore the current line being executed back 
into Register Pair HL and the associated memory location.</div></div>
										<div class="assembly-row-combined"><div>08DFH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>08E0H</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
										<div class="assembly-row-combined"><div>08E1H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>08E2H</div><div>SUB A</div><div>LET Register A = 0.</div></div>
										<div class="assembly-row-combined"><div>08E3H</div><div>LD (HL),A</div><div>Store a ZERO (i.e., the value held in Register A) into the memory location pointed to by Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>08E4H</div><div><a href="#0A63H" class="memory-link">CALL 0A63H</a></div><div>GOSUB to 0A63H to display the line number pointed to by Register Pair DE on screen.</div></div>
										<div class="assembly-row-combined"><div>08E7H</div><div>DEC DE</div><div>DECrement the value stored in Register Pair DE by 1.</div></div>
										<div class="assembly-row-combined"><div>08E8H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
										<div class="assembly-row-combined"><div>08E9H</div><div>LD (DE),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>08EAH</div><div>LD A,3FH</div><div>Let Register A equal 3FH (ASCII: <span class="code">?</span>).</div></div>
										<div class="assembly-row-combined"><div>08ECH</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 0CH) to the cassette or screen via a RST 10 call.</div></div>
										<div class="assembly-row-combined"><div>08EDH</div><div>SUB A</div><div>LET Register A = 0.</div></div>
										<div class="assembly-row-combined"><div>08EEH</div><div><a href="#094FH" class="memory-link">CALL 094FH</a></div><div>GOSUB to 094FH to display the message pointed to by Register Pair DE, returning once a 00H is found</div></div>
										<div class="assembly-row-combined" id="08F1H"><div>08F1H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Enter they READY command line routine via a JUMP to 01C9H.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="08F4H">08F4H - Display the "SORRY" error.  This is the error used by Level 1 when we are OUT OF MEMORY.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>08F4H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>08F5H</div><div>LD DE,01BAH</div><div>Let Register Pair DE equal 01BAH, which points to the "SORRY" error message in the ROM.</div></div>
											<div class="assembly-row-combined"><div>08F8H</div><div><a href="#08CDH" class="memory-link">JR 08CDH</a></div><div>JUMP to 08CDH which GOSUBs to 094FH to display the message pointed to by Register Pair DE, returning once a 00H is found</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="08FAH">08FAH - If 
entry is 08FAH, display a prompt of the character held in Register A 
then then fetch a line of input into a 53 character buffer between 40ACH
 and 40F3H pointed to by Register Pair DE.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>08FAH</div><div>LD A,3EH</div><div>Let Register A equal 3EH (ASCII: <span class="code">&gt;</span>), which is the standard TRS-80 prompt.</div></div>
											<div class="assembly-row-combined" id="08FCH"><div>08FCH</div><div>RST 10H</div><div>Send the character held in Register A to the screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>08FDH</div><div>LD DE,40ACH</div><div>Let Register Pair DE equal 40ACH which is a dual purpose location:  Buffer for command input AND output to cassette.</div></div>
											<div class="assembly-row-combined"><div>0900H</div><div><a href="#0B40H" class="memory-link">CALL 0B40H</a></div><div>GOSUB to 0B40H to fetch a keystroke from the keyboard (note: does not wait for a keypress).</div></div>
											<div class="assembly-row-combined"><div>0903H</div><div><a href="#0900H" class="memory-link">JR Z,0900H</a></div><div>If the Z FLAG (Zero) has been set, loop back to the prior instruction to fetch a keystroke.</div></div>
											<div class="assembly-row-combined"><div>0905H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results:  If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0907H</div><div><a href="#0915H" class="memory-link">JR Z,0915H</a></div><div>If the keystroke was a <span class="code">CARRIAGE RETURN</span>, then the Z FLAG will have been set, so JUMP to 0915H to add that <span class="code">CARRIAGE RETURN</span> to the buffer.</div></div>
											<div class="assembly-row-combined"><div>0909H</div><div>CP 1DH</div><div>Compare
 the value held in Register A against 1DH (Decimal: 29) to check for a 
control code.  Results: If Register A equals 1DH, the Z FLAG is set; 
otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>090BH</div><div><a href="#0922H" class="memory-link">JR Z,0922H</a></div><div>If the Z FLAG (Zero) has been set, JUMP to 0922H.</div></div>
											<div class="assembly-row-combined"><div>090DH</div><div>CP 03H</div><div>Compare the value held in Register A against 03H (Keyboard: <kbd>BREAK</kbd>).  Results: If Register A equals <kbd>BREAK</kbd>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>090FH</div><div><a href="#08F1H" class="memory-link">JR Z,08F1H</a></div><div>If the keystroke was a <kbd>BREAK</kbd>, then the Z FLAG will have been set, so JUMP to 08F1H which JUMPs to JP 01C9H to return to the READY command line routine.</div></div>
											<div class="assembly-row-combined"><div>0911H</div><div>CP 20H</div><div>Compare the value held in Register A against 20H (Decimal: 32).  Results:<ul><li>If Register A equals 20H, the Z FLAG is set.</li><li>If A &lt; 20H, the CARRY FLAG will be set.</li><li>if A &gt;= 20H, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined"><div>0913H</div><div><a href="#0900H" class="memory-link">JR C,0900H</a></div><div>If
 the keystroke was a character &lt; 20H, meaning a control code, the C 
FLAG (Carry) will have been set, so JUMP to 0900H to ignore the 
character and keep polling the keyboard.</div></div>
											<div class="assembly-row-combined"><div>0915H</div><div>LD (DE),A</div><div>If
 we are here, then we want to keep the character, so store the keystroke
 (held in Register A) into the buffer memory location pointed to by 
Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0916H</div><div>INC DE</div><div>Bump DE to point to the next character in the input buffer.</div></div>
											<div class="assembly-row-combined"><div>0917H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results:  If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0919H</div><div>RET Z</div><div>If the character is a <span class="code">CARRIAGE RETURN</span>, then the Z FLAG will have been set, meaning we are done with this line of INPUT, so RETurn to the caller.</div></div>
											<p class="debug-note">If we are here, then we had a character we wanted to keep, and it wasn't a <span class="code">CARRIAGE RETURN</span>, so we need to keep getting more characters.</p>
											<div class="assembly-row-combined"><div>091AH</div><div>LD A,E</div><div>Copy
 the LSB of the pointer to the buffer (i.e., the contents of Register E)
 into Register A so we can test to see how much buffer we have left.</div></div>
											<div class="assembly-row-combined"><div>091BH</div><div>CP F3H</div><div>Compare
 the value held in Register A against F3H (meaning, to check it see if 
we hit 40F3H in filling the buffer).  Results:  If Register A equals 
F3H, the Z FLAG is set; otherwise the NZ FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>091DH</div><div><a href="#0900H" class="memory-link">JR NZ,0900H</a></div><div>If the NZ FLAG was set, then we still have room in the buffer pointed to by DE, so JUMP back to 0900H to get more keystrokes.</div></div>
											<p class="debug-note">If we are here, then we have run out of buffer space for INPUT.</p>
											<div class="assembly-row-combined"><div>091FH</div><div>LD A,1DH</div><div>Let Register A equal 1DH to delete the new character.</div></div>
											<div class="assembly-row-combined"><div>0921H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 1DH) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0922H</div><div>LD A,E</div><div>Copy the LSB of the pointer to the buffer (i.e., the contents of Register E) into Register A.</div></div>
											<div class="assembly-row-combined"><div>0923H</div><div>CP ACH</div><div>Compare
 the value held in Register A against ACH (meaning, to check it see if 
we hit 40ACH in filling the buffer, which is the start of the buffer).  
Results:  If Register A equals ACH, the Z FLAG is set; otherwise the NZ 
FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0925H</div><div><a href="#08FAH" class="memory-link">JR Z,08FAH</a></div><div>If
 the Z FLAG (Zero) has been set, then we are at the start of the buffer,
 so discard everything and start again via a JUMP to 08FAH to fetch a 
line of input from the user.</div></div>
											<div class="assembly-row-combined"><div>0927H</div><div>DEC DE</div><div>If
 we weren't at the start of the buffer, then back up the pointer to the 
buffer by 1 by DECrementing the value stored in Register Pair DE by 1.</div></div>
											<div class="assembly-row-combined"><div>0928H</div><div><a href="#0900H" class="memory-link">JR 0900H</a></div><div>JUMP to 0900H to keep fetching keystrokes.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="092AH">092AH - Find 
the line in RAM which matches the line number pointed to by Register 
Pair HL starting at the address held in Register Pair DE.  If jumped 
HERE it starts at the beginning of BASIC RAM.  Will set the CARRY FLAG 
if nothing was found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>092AH</div><div>LD DE,4200H</div><div>Let
 Register Pair DE equal 4200H, to point to the start of BASIC RAM.  So 
if the jump was to 092AH, it scans all of RAM.  if the call was to 
092DH, then it starts where DE was set before the CALL.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="092DH">092DH - Find 
the line in RAM which matches the line number pointed to by Register 
Pair HL starting at the address held in Register Pair DE.  If no line is
 found, it will point to the line BEFORE where the line contained in HL 
should have been AND will set the CARRY and NZ FLAGs.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>092DH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL (i.e., the line number being looked for) to the top of the stack.</div></div>
											<p class="debug-note">First we need to verify that the RAM we
 are searching (held in DE) isn't less than 4200H or higher than the top
 of RAM (held in 406CH).  First, check for too low ...</p>
											<div class="assembly-row-combined"><div>092EH</div><div>LD A,D</div><div>Copy the MSB of the RAM address being examined (held in Register D) into Register A.</div></div>
											<div class="assembly-row-combined"><div>092FH</div><div>CP 42H</div><div>Compare
 the value held in Register A against 42H, below which would be an 
improper search location.  Results:  If Register A &lt; 42H, the CARRY 
FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0931H</div><div><a href="#08F1H" class="memory-link">JR C,08F1H</a></div><div>If
 the C FLAG (Carry) has been set, then we are trying to search starting 
too low, so exit via a JUMP to 08F1H which will JUMP to 01C9H to return 
to the READY command line routine.</div></div>
											<p class="debug-note">.. and now, check for too high.  Involves a temporary repurpose of HL.</p>
											<div class="assembly-row-combined"><div>0933H</div><div>LD HL,(406CH)</div><div>Fetch the pointer to the top of used RAM (held in memory location 406CH) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0936H</div><div>DEC HL</div><div>Step back one byte from the highest RAM location.</div></div>
											<div class="assembly-row-combined"><div>0937H</div><div>RST 20H</div><div>Compare
 the top of RAM (held in HL) and the starting point for the line number 
search (held in DE) via a call to RST 20H.  Results:  NZ means no match,
 Z means match, and if H=D but L &lt; E, then the C flag will be set.</div></div>
											<div class="assembly-row-combined"><div>0938H</div><div>POP HL</div><div>Restore the the line number being looked for back into HL from the STACK.</div></div>
											<div class="assembly-row-combined"><div>0939H</div><div>RET C</div><div>If
 the C FLAG (Carry) has been set, then we are trying to search starting 
too high and nothing can be found, so RETurn to the caller with the C 
FLAG set to indicate NOTHING WAS FOUND.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="093AH">093AH - 
Continuation of the FIND THE LINE NUMBER IN RAM routine, to actually do 
the search.  Register Pair DE holds the RAM location to examine, and 
Register Pair HL holds the line number being looked for.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>093AH</div><div>LD A,(DE)</div><div>Fetch character in RAM to examine for the line number.</div></div>
											<div class="assembly-row-combined"><div>093BH</div><div>SUB L</div><div>LET Register A = Register A - the LSB of the line number being looked for (held in Register L).</div></div>
											<div class="assembly-row-combined"><div>093CH</div><div>LD B,A</div><div>Put the results of that subtraction into Register B.</div></div>
											<div class="assembly-row-combined"><div>093DH</div><div>INC DE</div><div>Bump DE to point to the next character in RAM to examine.</div></div>
											<div class="assembly-row-combined"><div>093EH</div><div>LD A,(DE)</div><div>Fetch that character and put it into Register A.</div></div>
											<div class="assembly-row-combined"><div>093FH</div><div>SBC A,H</div><div>LET
 Register A = Register A - the MSB of the line number being looked for 
(held in Register H), with the carry flag being used as well.</div></div>
											<div class="assembly-row-combined"><div>0940H</div><div><a href="#0946H" class="memory-link">JR C,0946H</a></div><div>If the C FLAG (Carry) has been set, JUMP to 0946H which will advance DE 1 places and then search for the next line in RAM.</div></div>
											<div class="assembly-row-combined"><div>0942H</div><div>DEC DE</div><div>If there was no carry, then back up DE to the prior character in RAM.</div></div>
											<div class="assembly-row-combined"><div>0943H</div><div>OR B</div><div>OR Register B against Register A.  The results are stored in Register A.</div></div>
											<div class="assembly-row-combined"><div>0944H</div><div>RET</div><div>RETurn to the caller with the CARRY FLAG reset (as OR resets) to indicate FOUND.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0945H">0945H - 
Continuation of the FIND THE LINE NUMBER IN RAM routine.  Jumped here to
 skip to the end of the line and then to jump back to continue 
searching.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0945H</div><div>INC DE</div><div>Advance DE one character.</div></div>
											<div class="assembly-row-combined" id="0946H"><div>0946H</div><div>INC DE</div><div>Advance DE one character.</div></div>
											<div class="assembly-row-combined"><div>0947H</div><div>LD A,(DE)</div><div>Fetch character in RAM to examine for the line number.</div></div>
											<div class="assembly-row-combined"><div>0948H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results:  If Register A DOES NOT equal <span class="code">CARRIAGE RETURN</span>, the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>094AH</div><div><a href="#0946H" class="memory-link">JR NZ,0946H</a></div><div>If the current character in RAM, pointed to by DE, is not a <span class="code">CARRIAGE RETURN</span>, then the NZ FLAG will have been set, so JUMP to 0946H to advance DE and check again.</div></div>
											<div class="assembly-row-combined"><div>094CH</div><div>INC DE</div><div>Advance DE one character.</div></div>
											<div class="assembly-row-combined"><div>094DH</div><div><a href="#092DH" class="memory-link">JR 092DH</a></div><div>JUMP to 092DH to continue parsing RAM (from the new DE) for the line number pointed to by Register Pair HL.</div></div>
										</div>
									</div>


								<br><h2 class="assembly-section-title" id="094FH">094FH - 
Display the message pointed to by Register Pair DE until a either a 
CARRIAGE RETURN or the contents of REGISTER A is found.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>094FH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
											<div class="assembly-row-combined" id="0950H"><div>0950H</div><div>LD B,A</div><div>Top of a loop.  Set Register B to the delimeter character we are looking for.</div></div>
											<div class="assembly-row-combined"><div>0951H</div><div>LD A,(DE)</div><div>Fetch
 the current character to display (held in the memory location pointed 
to by Register Pair DE) and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0952H</div><div>INC DE</div><div>Bump DE to point to the next character to display.</div></div>
											<div class="assembly-row-combined"><div>0953H</div><div>CP B</div><div>Compare the character at DE - 1 against the delimeter character (held in Register B).  If they match, the Z FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0954H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, meaning a delimeter was hit, RETurn to the caller.</div></div>
											<div class="assembly-row-combined"><div>0955H</div><div>RST 10H</div><div>If
 we did not get the delimeter, then send the character held in Register A
 (i.e., a character in the message to display) to the cassette or screen
 via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0956H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0958H</div><div><a href="#0951H" class="memory-link">JR NZ,0951H</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0951H to fetch the next character and continue the loop.</div></div>
											<div class="assembly-row-combined"><div>095AH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="095BH">095BH - Part 
of the PRINT routine.  Display a quoted expression pointed to by 
Register Pair DE and JUMP to the command line parsing routine if a CR is
 found, otherwise JUMP to the return address + 2 bytes.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>095BH</div><div>RST 08H<br>22H<br>0EH</div><div>Call
 to RST 08H with parameters of 22H and an offset of 0EH.  RST 08H will 
move to the next non-space character and check it against 22H (which is a
 <span class="code">"</span>).  If there is no match, jump to the return
 (of the next instruction, i.e. 095EH) + 0EH instructions (which would 
be 096CH, which is just a RET).</div></div>
											<div class="assembly-row-combined"><div>095EH</div><div>LD A,22H</div><div>Store a <span class="code">"</span> into Register A, as that will act as the END OF ROUTINE delimeter in the CALL to 0950H.</div></div>
											<div class="assembly-row-combined"><div>0960H</div><div>CALL 0950H</div><div>GOSUB to 0950H in the prior routine to display the message pointed to by Register Pair DE until a <span class="code">"</span> is found.</div></div>
											<div class="assembly-row-combined"><div>0963H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results: If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0965H</div><div>POP HL</div><div>Put the ROUTINE RETURN ADDRESS (held at the top of the STACK) into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0966H</div><div><a href="#0394H" class="memory-link">JP Z,0394H</a></div><div>If we had a <span class="code">CARRIAGE RETURN</span>, then the Z FLAG (Zero) will have been set, JUMP to the top of EXECUTE NEXT LINE routine at 0394H.</div></div>
											<div class="assembly-row-combined"><div>0969H<br>096AH</div><div>INC HL<br>INC HL</div><div>Advance HL 2 bytes to point 2 bytes after the prior routine return address.</div></div>
											<div class="assembly-row-combined"><div>096BH</div><div>JP (HL)</div><div>JUMP to (HL).</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="096CH">096CH - Exit out of the prior routine based on the RST 08H call not matching a <span class="code">"</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>096CH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="096DH">096DH - Display the contents of Register Pair HL as a decimal number.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>096DH</div><div><a href="#0C59H" class="memory-link">CALL 0C59H</a></div><div>GOSUB to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
											<div class="assembly-row-combined" id="0970H"><div>0970H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0971H</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0972H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0973H</div><div>LD A,(IX+FEH)</div><div>IX+FEH
 is the same as IX-02H, which is the EXPONENT of NUMBER 1 in the 
FLOATING POINT STACK.  Fetch the EXPONENT of the number in the FLOATING 
POINT STACK (held at IX-2) into Register A.</div></div>
											<div class="assembly-row-combined"><div>0976H</div><div>CP 80H</div><div>Compare
 the EXPONENT (held in Register A) against 80H (Decimal: 128), which is 
to test if the negative sign is set.  If Register A is NOT 128, the NZ 
FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0978H</div><div><a href="#0983H" class="memory-link">JR NZ,0983H</a></div><div>If the NZ FLAG (Not Zero) has been set, meaning the number is NOT ZERO, JUMP to the next routine at 0983H.</div></div>
											<p class="debug-note">If we are here, then we need to print a zero value.</p>
											<div class="assembly-row-combined"><div>097AH</div><div>LD A,20H</div><div>Let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
											<div class="assembly-row-combined"><div>097CH</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 0CH) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>097DH</div><div>LD A,30H</div><div>Let Register A equal 30H (ASCII: <span class="code">0</span>).</div></div>
											<div class="assembly-row-combined"><div>097FH</div><div>RST 10H</div><div>Send the character held in Register A (i.e., 0CH) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0980H</div><div><a href="#0A41H" class="memory-link">JP 0A41H</a></div><div>JUMP
 to 0A41H to exit by first displaying a SPACE, POPing HL/BC/DE from the 
STACK, POPing the FLOATING POINT STACK, and then RETurning to the caller
 of this routine.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0983H">0983H - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number; jumped here to print a NEGATIVE number.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0983H</div><div>LD A,(IX+FFH)</div><div>IX+FFH
 is the same as IX-01H, which is the SIGN of NUMBER 1 in the FLOATING 
POINT STACK.Fetch the SIGN of the number in the FLOATING POINT STACK 
(held at IX-1) into Register A.</div></div>
											<div class="assembly-row-combined"><div>0986H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>0987H</div><div>LD A,20H</div><div>Let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
											<div class="assembly-row-combined"><div>0989H</div><div><a href="#098DH" class="memory-link">JR Z,098DH</a></div><div>If
 the Z FLAG (Zero) has been set, meaning a POSITIVE NUMBER, skip the 
next instruction and JUMP to 098DH to display the leading <span class="code">SPACE</span>.</div></div>
											<div class="assembly-row-combined"><div>098BH</div><div>LD A,2DH</div><div>If we are here, then NZ was set, meaning a NEGATIVE number, so replace the character we are about to display with a <span class="code">-</span>.</div></div>
											<div class="assembly-row-combined"><div>098DH</div><div>RST 10H</div><div>Send
 the character held in Register A (i.e., either a SPACE if the sign is 
POSITIVE or a "-" if the sign is NEGATIVE) to the cassette or screen via
 a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>098EH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
											<div class="assembly-row-combined"><div>098FH</div><div>LD (IX+FFH),A</div><div>IX+FFH
 is the same as IX-01H, which is the SIGN of NUMBER 1 in the FLOATING 
POINT STACK.  Store a ZERO over the SIGN BIT of the number in the 
FLOATING POINT STACK (held at IX-1).</div></div>
											<div class="assembly-row-combined"><div>0992H</div><div>LD A,FFH</div><div>Let Register A equal FFH (Decimal: -1).</div></div>
											<div class="assembly-row-combined" id="0994H"><div>0994H</div><div>PUSH AF</div><div>Top of a loop.  Save the contents of Register Pair AF to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0995H</div><div>LD HL,0EB9H</div><div>Let Register Pair HL equal 0EB9H, which is a pointer to a constant in ROM holding CCH CCH CCH 7EH</div></div>
											<div class="assembly-row-combined"><div>0998H</div><div><a href="#0CA6H" class="memory-link">CALL 0CA6H</a></div><div>GOSUB
 to 0CA6H which is part of the FLOATING POINT DIVIDE routine.  This 
routine pushes that constant to the FLOATING POINT STACK, converts the 
top two numbers in the FLOATING POINT STACK to to B/D/B'/D'/E' and 
C/L/C'/H'/L', and then replaces BC with -5 before JUMPing to 0CB7H.</div></div>
											<div class="assembly-row-combined"><div>099BH</div><div><a href="#09A4H" class="memory-link">JR NC,09A4H</a></div><div>If
 the NC FLAG (No Carry) has been set, JUMP to 09A4H to continue, 
skipping the multiplication of the FLOATING POINT STACK number by 10.</div></div>
											<div class="assembly-row-combined"><div>099DH</div><div><a href="#0C84H" class="memory-link">CALL 0C84H</a></div><div>GOSUB to 0C84H to multiply the floating point stack by 10.</div></div>
											<div class="assembly-row-combined"><div>09A0H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>09A1H</div><div>DEC A</div><div>DECrement the value stored in Register A by 1.</div></div>
											<div class="assembly-row-combined"><div>09A2H</div><div><a href="#0994H" class="memory-link">JR 0994H</a></div><div>LOOP BACK to 0994H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="09A4H">09A4H - Continuation of the routine to display the contents of Register Pair HL as a decimal number.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>09A4H</div><div>LD HL,0EB5H</div><div>Let Register Pair HL equal 0EB5H, which is a location in ROM holding 00H 00H 80H 80H.</div></div>
											<div class="assembly-row-combined"><div>09A7H</div><div><a href="#0CA6H" class="memory-link">CALL 0CA6H</a></div><div>GOSUB
 to 0CA6H which is part of the FLOATING POINT DIVIDE routine.  This 
routine pushes HL to the FLOATING POINT STACK, converts the top two 
numbers in the FLOATING POINT STACK to to B/D/B'/D'/E' and C/L/C'/H'/L',
 and then replaces BC with -5 before JUMPing to 0CB7H.</div></div>
											<div class="assembly-row-combined"><div>09AAH</div><div><a href="#09B4H" class="memory-link">JR C,09B4H</a></div><div>If the C FLAG (Carry) has been set, JUMP to 09B4H to continue, skipping the division of the FLOATING POINT STACK number by 10.</div></div>
											<div class="assembly-row-combined"><div>09ACH</div><div><a href="#0C95H" class="memory-link">CALL 0C95H</a></div><div>GOSUB to 0C95H to divide the floating point stack by 10.</div></div>
											<div class="assembly-row-combined"><div>09AFH</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>09B0H</div><div>INC A</div><div>INCrement the value stored in Register A by 1.</div></div>
											<div class="assembly-row-combined"><div>09B1H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>09B2H</div><div><a href="#09A4H" class="memory-link">JR 09A4H</a></div><div>LOOP BACK to the top of this routine at 09A4H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="09B4H">09B4H - Continuation of the routine to display the contents of Register Pair HL as a decimal number.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>09B4H</div><div>LD A,(IX+FEH)</div><div>IX+FEH
 is the same as IX-02H, which is the EXPONENT of NUMBER 1 in the 
FLOATING POINT STACK.  Fetch the EXPONENT of the number in the FLOATING 
POINT STACK (held at IX-2) into Register A.</div></div>
											<div class="assembly-row-combined"><div>09B7H</div><div>NEG</div><div>Negate
 the contents of Register A (which is the same as -A).  This will now be
 a counter to the number of times we are going to rotate the bits NUMBER
 2.</div></div>
											<div class="assembly-row-combined" id="09B9H"><div>09B9H</div><div><a href="#09C6H" class="memory-link">JR Z,09C6H</a></div><div>Top of a loop.  If the Z FLAG (Zero) has been set, stop rotating and JUMP to the next routine at 09C6H.</div></div>
											<div class="assembly-row-combined"><div>09BBH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL' so we can access the value of NUMBER 2.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>09BCH</div><div>SRL C</div><div>Shift
 the bits of the MSB of NUMBER 2 (held in Register C') right one bit 
position, with Bit 0 being copied to the CARRY FLAG and Bit 7 set to 
zero.</div></div>
											<div class="assembly-row-combined"><div>09BEH</div><div>RR H</div><div>Rotate
 the bits of the NMSB of NUMBER 2 (held in Register H') right one bit 
position, with bit 0 copied to the CARRY FLAG and the previous contents 
of the CARRY FLAG copied to bit 7.</div></div>
											<div class="assembly-row-combined"><div>09C0H</div><div>RR L</div><div>Rotate
 the bits of the LSB of NUMBER 2 (held in Register L') right one bit 
position, with bit 0 copied to the CARRY FLAG and the previous contents 
of the CARRY FLAG copied to bit 7.</div></div>
											<div class="assembly-row-combined"><div>09C2H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>09C3H</div><div>DEC A</div><div>DECrement the value stored in Register A by 1.</div></div>
											<div class="assembly-row-combined"><div>09C4H</div><div><a href="#09B9H" class="memory-link">JR 09B9H</a></div><div>JUMP to 09B9H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="09C6H">09C6H - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  I will not make believe I know what is going on.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>09C6H</div><div>LD B,07H</div><div>Let Register B equal 07H, for a DJNZ loop of 7.</div></div>
											<div class="assembly-row-combined"><div>09C8H<br>09CAH</div><div>PUSH IX<br>POP HL</div><div>Let Register Pair HL = Special Index Register IX (i.e., the pointer to the FLOATING POINT STACK).</div></div>
											<div class="assembly-row-combined"><div>09CBH</div><div>LD (HL),00H</div><div>IX+00H is the LSB of NUMBER 2 in the FLOATING POINT STACK.  Store the value 00H as the LSB of NUMBER 2.</div></div>
											<div class="assembly-row-combined"><div>09CDH</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1 to now point to IX+01H.</div></div>
											<div class="assembly-row-combined" id="09CEH"><div>09CEH</div><div>LD A,00H</div><div>Top of a DJNZ loop of 7.  Let Register A equal 00H.</div></div>
											<div class="assembly-row-combined"><div>09D0H</div><div><a href="#015EH" class="memory-link">CALL 015EH</a></div><div>GOSUB
 to 015EH to to accumulate the digit by multiplying the accumulator by 
10 and then adding in A to the newly vacant one's spot.  Routine will 
return a NZ SET if an overflow occurs from the accumulation.</div></div>
											<div class="assembly-row-combined"><div>09D3H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>09D4H</div><div>LD A,B</div><div>Copy the contents of Register B' into Register A.</div></div>
											<div class="assembly-row-combined"><div>09D5H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>09D6H</div><div>LD (HL),A</div><div>Store
 the value held in Register A into the memory location pointed to by 
Register Pair HL (which will be a number between IX+01H and IX+08H).</div></div>
											<div class="assembly-row-combined"><div>09D7H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
											<div class="assembly-row-combined"><div>09D8H</div><div><a href="#09CEH" class="memory-link">DJNZ 09CEH</a></div><div>LOOP
 back to 09CEH, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
											<div class="assembly-row-combined"><div>09DAH</div><div>LD B,06H</div><div>Let Register B equal 06H in preparation for a 6 interation DJNZ LOOP of 09E2H-09F7H.</div></div>
											<div class="assembly-row-combined"><div>09DCH</div><div>LD C,00H</div><div>Let Register C equal 00H.</div></div>
											<div class="assembly-row-combined"><div>09DEH</div><div>DEC HL</div><div>DECrement the value stored in Register Pair HL by 1.  HL is pointing to the FLOATING POINT STACK.</div></div>
											<div class="assembly-row-combined"><div>09DFH</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>09E0H</div><div>CP 05H</div><div>Compare the value held in Register A against 05H (Decimal: 5).  Results:<ul><li>If Register A equals 05H, the Z FLAG is set.</li><li>If A &lt; 05H, the CARRY FLAG will be set.</li><li>if A &gt;= 05H, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined" id="09E2H"><div>09E2H</div><div>CCF</div><div>Top
 of a 6 iteration DJNZ loop if passing down, or a 1 iteration if this 
routine was about to end.  Invert the state of the CARRY FLAG so that A 
&lt; 05H will produce a NO CARRY, and A &gt;= 05H will produce a CARRY.</div></div>
											<div class="assembly-row-combined"><div>09E3H</div><div>LD A,00H</div><div>Let Register A equal 00H as an accumulator.</div></div>
											<div class="assembly-row-combined"><div>09E5H</div><div>DEC HL</div><div>DECrement the value stored in Register Pair HL by 1.  HL is pointing to the FLOATING POINT STACK.</div></div>
											<div class="assembly-row-combined"><div>09E6H</div><div>ADC A,(HL)</div><div>Add, with CARRY, A and the value stored in the FLOATING POINT STACK pointed to by HL.</div></div>
											<div class="assembly-row-combined"><div>09E7H</div><div>SLA C</div><div>Shift
 the bits of Register C left one position, with the contents of bit 7 
copied to the CARRY FLAG and a zero is put into bit 0.</div></div>
											<div class="assembly-row-combined"><div>09E9H</div><div>CP 0AH</div><div>Compare the value held in Register A against 0AH (Decimal: 10).  If A &lt; 10, the CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>09EBH</div><div><a href="#09EFH" class="memory-link">JR C,09EFH</a></div><div>If the C FLAG (Carry) has been set, SKIP the next instruction and then continue at 09EFH.</div></div>
											<div class="assembly-row-combined"><div>09EDH</div><div>LD A,00H</div><div>If A was =&gt; 10, the reset Register A back to 0.</div></div>
											<div class="assembly-row-combined"><div>09EFH</div><div>LD (HL),A</div><div>Store the value held in Register A into the FLOATING POINT STACK location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>09F0H</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>09F1H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>09F2H</div><div><a href="#09F6H" class="memory-link">JR Z,09F6H</a></div><div>If the Z FLAG (Zero) has been set, SKIP the next instruction and then continue at 09F6H.</div></div>
											<div class="assembly-row-combined"><div>09F4H</div><div>SET 0,C</div><div>If the Z flag wasn't set, SET (i.e., set as 1) BIT 0 of Register  C.</div></div>
											<div class="assembly-row-combined" id="09F6H"><div>09F6H</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>09F7H</div><div><a href="#09E2H" class="memory-link">DJNZ 09E2H</a></div><div>LOOP
 back to 09E2H, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
											<div class="assembly-row-combined"><div>09F9H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
											<div class="assembly-row-combined"><div>09FAH</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
											<div class="assembly-row-combined"><div>09FBH</div><div><a href="#0A03H" class="memory-link">JR C,0A03H</a></div><div>If the C FLAG (Carry) has been set, JUMP to 0A03H.</div></div>
											<div class="assembly-row-combined"><div>09FDH</div><div>INC B</div><div>INCrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>09FEH</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>09FFH</div><div>LD B,01H</div><div>Let Register B equal 01H for a 1-iteration DJNZ Loop.</div></div>
											<div class="assembly-row-combined"><div>0A01H</div><div><a href="#09E2H" class="memory-link">JR 09E2H</a></div><div>JUMP to 09E2H for that loop.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A03H">0A03H - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  I will not make believe I know what is going on.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A03H</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
											<div class="assembly-row-combined"><div>0A04H</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A05H</div><div>INC A</div><div>INCrement the value stored in Register A by 1.</div></div>
											<div class="assembly-row-combined"><div>0A06H</div><div><a href="#0A13H" class="memory-link">JP M,0A13H</a></div><div>If the S FLAG has been SET, JUMP to the next routine at 0A13H.</div></div>
											<div class="assembly-row-combined"><div>0A09H</div><div>CP 07H</div><div>Compare the value held in Register A against 07H.  If A &gt;= 07H, the NO CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0A0BH</div><div><a href="#0A13H" class="memory-link">JR NC,0A13H</a></div><div>If A &gt;= 07H, then the NC FLAG will have been set, JUMP to the next routine at 0A13H.</div></div>
											<div class="assembly-row-combined"><div>0A0DH</div><div>LD B,A</div><div>Copy the contents of Register A into Register B.</div></div>
											<div class="assembly-row-combined"><div>0A0EH</div><div><a href="#0A4DH" class="memory-link">CALL 0A4DH</a></div><div>GOSUB
 to 0A4DH to decrement B, displays a "." if B didn't hit zero, and then 
display a number.  Then, if a shifted C isn't zero, loops back to the 
top and if it is zero, Decrements B twice, exiting if the sign changes, 
or redoing the routine otherwise.</div></div>
											<div class="assembly-row-combined"><div>0A11H</div><div><a href="#0A41H" class="memory-link">JR 0A41H</a></div><div>JUMP
 to 0A41H to exit by first displaying a SPACE, POPing HL/BC/DE from the 
STACK, POPing the FLOATING POINT STACK, and then RETurning to the caller
 of this routine.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A13H">0A13H - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  This will process the exponent display by first 
displaying the "E" if needed, set up to display the sign after the "E", 
and load Register A with the number (negated if it was negative).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A13H</div><div>PUSH BC</div><div>Temporarily
 save the contents of Register Pair BC to the top of the stack so that 
Register B can be used over the next 4 instructions.</div></div>
											<div class="assembly-row-combined"><div>0A14H</div><div>LD B,01H</div><div>Let Register B equal 01H, which will be the parameter passed in the next CALL.</div></div>
											<div class="assembly-row-combined"><div>0A16H</div><div><a href="#0A4DH" class="memory-link">CALL 0A4DH</a></div><div>GOSUB to 0A4DH with B=01H.  This will display a "." and then more numbers.</div></div>
											<div class="assembly-row-combined"><div>0A19H</div><div>LD A,45H</div><div>Let Register A equal 45H (ASCII: <span class="code">E</span>).</div></div>
											<div class="assembly-row-combined"><div>0A1BH</div><div>RST 10H</div><div>Send the character held in Register A (i.e., <span class="code">E</span>) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A1CH</div><div>POP BC</div><div>Restore Registers B and C from the stack.</div></div>
											<div class="assembly-row-combined"><div>0A1DH</div><div>BIT 7,B</div><div>Test Bit Number 7 of Register B.  Z FLAG will be set if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
											<div class="assembly-row-combined"><div>0A1FH</div><div>LD A,2BH</div><div>Set up Register A so that it will display a <span class="code">+</span>.</div></div>
											<div class="assembly-row-combined"><div>0A21H</div><div><a href="#0A2BH" class="memory-link">JR Z,0A2BH</a></div><div>If
 the Z FLAG (Zero) has been set, then the SIGN was positive, so JUMP to 
the next routine at 0A2BH (which starts by displaying the <span class="code">+</span> held in Register A).</div></div>
											<div class="assembly-row-combined"><div>0A23H</div><div>LD A,2DH</div><div>If Bit 7 of Register B was 1, then the number is negative, so set Register A to a <span class="code">-</span>.</div></div>
											<div class="assembly-row-combined"><div>0A25H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., <span class="code">-</span>) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A26H</div><div>LD A,B</div><div>Since you can't negate Register B, copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A27H</div><div>NEG</div><div>Negate the contents of Register A (which is the same as -A) so that the number is represented as a negative number.</div></div>
											<div class="assembly-row-combined"><div>0A29H</div><div><a href="#0A2DH" class="memory-link">JR 0A2DH</a></div><div>Skip
 over the next 2 instructions (which would have applied if the number 
was positive - showing the "+" and then setting A = B instead of A=-B) 
via a JUMP to 0A2DH.</div></div>
										</div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0A2BH">0A2BH - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  Display the sign, and put the number from Register
 B into Register A.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A2BH</div><div>RST 10H</div><div>Send the character held in Register A (i.e., <span class="code">+</span>) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A2CH</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined" id="0A2DH"><div>0A2DH</div><div>LD B,00H</div><div>Let Register B equal 00H, which will be the accumulator of the next higher digit.</div></div>
											<div class="assembly-row-combined" id="0A2FH"><div>0A2FH</div><div>CP 0AH</div><div>Top of a loop.  Compare the value held in Register A against 0AH (Decimal: 10).  If A &lt; 10, the CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0A31H</div><div><a href="#0A38H" class="memory-link">JR C,0A38H</a></div><div>This
 is the exit point of the loop.  So long as the number we to display is 
less than 10 (i.e., the C FLAG has been set), JUMP to 0A38H to display 
the number held in Register B and then the number held in Register A, 
followed by a <span class="code">SPACE</span>.  It will then POP all the registers, including the FLOATING POINT STACK, and RETurn.</div></div>
											<div class="assembly-row-combined"><div>0A33H</div><div>ADD F6H</div><div>If
 we are heree then the number was higher than 10, so we need to reduce 
it by 10 by LETing Register A = Register A + F6H (Decimal: -10).</div></div>
											<div class="assembly-row-combined"><div>0A35H</div><div>INC B</div><div>INCrement the accumulator (tracked by Register B) by 1 for each time we reduced by 10.</div></div>
											<div class="assembly-row-combined"><div>0A36H</div><div><a href="#0A2FH" class="memory-link">JR 0A2FH</a></div><div>LOOP
 BACK to to 0A2FH to either display the number if it is less than 10, or
 keep reducing by 10 and incremementing B until that happens.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A38H">0A38H - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  This will display the number held in Register B 
(which was tracking how many times 10 had to be removed from Registter 
A) and then the number held in Register A, followed by a <span class="code">SPACE</span>.  It will then POP all the registers, including the FLOATING POINT STACK, and RETurn<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A38H</div><div>OR 30H</div><div>OR Register A against 30H to convert Register A into the ASCII equivalent of a number.</div></div>
											<div class="assembly-row-combined"><div>0A3AH</div><div>LD C,A</div><div>Copy the ASCII equivalent of the number (held in Register A) into Register C.</div></div>
											<div class="assembly-row-combined"><div>0A3BH</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A3CH</div><div>OR 30H</div><div>OR Register A against 30H to convert Register A into the ASCII equivalent of a number.</div></div>
											<div class="assembly-row-combined"><div>0A3EH</div><div>RST 10H</div><div>Send
 the character held in Register A (i.e., the ASCII equivalent of the 
number which was heeld in Register B) to the cassette or screen via a 
RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A3FH</div><div>LD A,C</div><div>Restore the ASCII equivalent of the original Register A back into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A40H</div><div>RST 10H</div><div>Send
 the character held in Register A (i.e., the ASCII equivalent of the 
number which was held in Register A on Entry of this Routine) to the 
cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined" id="0A41H"><div>0A41H</div><div>LD A,20H</div><div>Let Register A equal 20H (ASCII: <span class="code">SPACE</span>).</div></div>
											<div class="assembly-row-combined"><div>0A43H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., <span class="code">SPACE</span>) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A44H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A45H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
											<div class="assembly-row-combined"><div>0A46H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0A47H</div><div>LD BC,FFFBH</div><div>Let Register Pair BC equal FFFBH, which is -5.</div></div>
											<div class="assembly-row-combined"><div>0A4AH</div><div>ADD IX,BC</div><div>"POP"
 the FLOATING POINT STACK by resetting Special Index Register IX back 5 
bytes (the amount of bytes for a single floating point entry).</div></div>
											<div class="assembly-row-combined"><div>0A4CH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A4DH">0A4DH - 
Continuation of the routine to display the contents of Register Pair HL 
as a decimal number.  Decrements B, and so long as that's not a zero, 
displays a "." and a number.  Then, if a shifted C isn't zero, loops 
back to the top and if it is zero, Decrements B twice, exiting if the 
sign changes, or redoing the routine otherwise.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A4DH</div><div>INC B</div><div>INCrement the value stored in Register B by 1 so that it is ready for the DEC B that starts the loop on the next line.</div></div>
											<div class="assembly-row-combined" id="0A4EH"><div>0A4EH</div><div>DEC B</div><div>Top of a Loop.  DECrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>0A4FH</div><div><a href="#0A54H" class="memory-link">JR NZ,0A54H</a></div><div>If the NZ FLAG (Not Zero) has been set, skip the display of a "." via a JUMP to 0A54H.</div></div>
											<div class="assembly-row-combined"><div>0A51H</div><div>LD A,2EH</div><div>Let Register A equal 2EH (ASCII: <span class="code">.</span>).</div></div>
											<div class="assembly-row-combined"><div>0A53H</div><div>RST 10H</div><div>Send the character held in Register A (i.e., "<span class="code">.</span>") to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined" id="0A54H"><div>0A54H</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A55H</div><div>OR 30H</div><div>OR Register A against 30H to convert Register A into the ASCII equivalent of a number.</div></div>
											<div class="assembly-row-combined"><div>0A57H</div><div>RST 10H</div><div>Send
 the character held in Register A (i.e., the ASCII code for the number 
held in Register A) to the cassette or screen via a RST 10 call.</div></div>
											<div class="assembly-row-combined"><div>0A58H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
											<div class="assembly-row-combined"><div>0A59H</div><div>SRL C</div><div>Shift the bits of Register C right one bit position, with Bit 0 being copied to the CARRY FLAG and Bit 7 set to zero.</div></div>
											<div class="assembly-row-combined"><div>0A5BH</div><div><a href="#0A4EH" class="memory-link">JR NZ,0A4EH</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0A4EH.</div></div>
											<div class="assembly-row-combined"><div>0A5DH</div><div>DEC B</div><div>DECrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>0A5EH</div><div>DEC B</div><div>DECrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>0A5FH</div><div>RET M</div><div>If the S FLAG has been SET, RETurn to the caller.</div></div>
											<div class="assembly-row-combined"><div>0A60H</div><div>INC B</div><div>INCrement the value stored in Register B by 1, which, on top of the INC B at the top of the routine, undoes the two DEC B's.</div></div>
											<div class="assembly-row-combined"><div>0A61H</div><div><a href="#0A4DH" class="memory-link">JR 0A4DH</a></div><div>LOOP BACK to the top of this routine at 0A4DH.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A63H">0A63H - Display the line number pointed to by Register Pair DE.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A63H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
											<div class="assembly-row-combined"><div>0A64H</div><div>LD L,A</div><div>Copy the contents of Register A (which is the LSB of the line number) into Register L.</div></div>
											<div class="assembly-row-combined"><div>0A65H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
											<div class="assembly-row-combined"><div>0A66H</div><div>LD A,(DE)</div><div>Fetch
 the next character on the BASIC line being processed (held in the 
memory location pointed to by Register Pair DE) and store it into 
Register A.</div></div>
											<div class="assembly-row-combined"><div>0A67H</div><div>LD H,A</div><div>Copy
 the contents of Register A into Register H; now HL contains the line 
number that had been in RAM pointed to by Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0A68H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
											<div class="assembly-row-combined"><div>0A69H</div><div><a href="#096DH" class="memory-link">CALL 096DH</a></div><div>GOSUB to 096DH to display the contents of Register Pair HL as a decimal number.</div></div>
											<div class="assembly-row-combined"><div>0A6CH</div><div><a href="#094FH" class="memory-link">JP 094FH</a></div><div>JUMP
 to 094FH to display the message pointed to by Register Pair DE, 
returning once a 00H is found. That RETurn will return from this 
routine.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A6FH">0A6FH - Copy the bytes held at (DE) to (BC), backwards, until DE = HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A6FH</div><div>RST 20H</div><div>Compare
 HL and DE via a call to RST 20H.  Results:  NZ means no match, Z means 
match, and if H=D but L &lt; E, then the C flag will be set.</div></div>
											<div class="assembly-row-combined"><div>0A70H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
											<div class="assembly-row-combined"><div>0A71H</div><div>LD A,(DE)</div><div>Fetch the value held in the memory location pointed to by Register Pair (DE) and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A72H</div><div>LD (BC),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair BC.</div></div>
											<div class="assembly-row-combined"><div>0A73H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
											<div class="assembly-row-combined"><div>0A74H</div><div>INC BC</div><div>INCrement the value stored in Register Pair BC by 1.</div></div>
											<div class="assembly-row-combined"><div>0A75H</div><div><a href="#0A6FH" class="memory-link">JR 0A6FH</a></div><div>LOOP back to the top of this routine at 0A6FH.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A77H">0A77H - COPY the bytes, backwards, from BC through DE to HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A77H</div><div>LD A,B</div><div>Copy the MSB of the number of bytes to copy from Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A78H</div><div>SUB D</div><div>LET Register A = Register A - Register D to make sure that DE is greater than BC.</div></div>
											<div class="assembly-row-combined"><div>0A79H</div><div><a href="#0A7EH" class="memory-link">JR NZ,0A7EH</a></div><div>If
 the NZ FLAG (Not Zero) has been set, JUMP to 0A7EH to decrement both 
pointers (DE and HL), and to move the character held in (DE) into (HL), 
and continue at the top of this routine.</div></div>
											<div class="assembly-row-combined"><div>0A7BH</div><div>LD A,C</div><div>Copy the LSB of the number of bytes to copy from Register C into Register A.</div></div>
											<div class="assembly-row-combined"><div>0A7CH</div><div>SUB E</div><div>LET Register A = Register A - Register  E to make sure that DE is greater than BC.</div></div>
											<div class="assembly-row-combined"><div>0A7DH</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set then we have reached the end of the move, RETurn to the caller.</div></div>
											<div class="assembly-row-combined" id="0A7EH"><div>0A7EH</div><div>DEC DE</div><div>We
 have the RAM so do the actual copying of the byte.  First, DECrement 
the pointer to the SOURCE byte (held in Register Pair DE) by 1.</div></div>
											<div class="assembly-row-combined"><div>0A7FH</div><div>DEC HL</div><div>DECrement the pointer to the DESTINATION byte (held in Register Pair HL) by 1.</div></div>
											<div class="assembly-row-combined"><div>0A80H</div><div>LD A,(DE)</div><div>Fetch the value held in the memory location pointed to by Register Pair (DE) and store it into Register A and ...</div></div>
											<div class="assembly-row-combined"><div>0A81H</div><div>LD (HL),A</div><div>... put it into the memory location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A82H</div><div><a href="#0A77H" class="memory-link">JR 0A77H</a></div><div>LOOP back to the top of this routine at 0A77H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A84H">0A84H - This 
Subroutine is the opposite of 0A9FH  This routine puts the contents from
 the BASIC stack pointer into the various RAM locations.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A84H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
											<div class="assembly-row-combined"><div>0A85H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A86H</div><div>LD (40A5H),HL</div><div>Store the value held in Register Pair HL into memory location 40A5H (which is the pointer to the current FOR LOOP variable).</div></div>
											<div class="assembly-row-combined"><div>0A89H<br>0A89H</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L.  Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
											<div class="assembly-row-combined"><div>0A8BH</div><div><a href="#0A9DH" class="memory-link">JR Z,0A9DH</a></div><div>If the Z FLAG (Zero) has been set, JUMP to 0A9DH.</div></div>
											<div class="assembly-row-combined"><div>0A8DH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A8EH</div><div>LD (4091H),HL</div><div>Store the value held in Register Pair HL into the FOR LOOP STEP (held in memory location 4091H).</div></div>
											<div class="assembly-row-combined"><div>0A91H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A92H</div><div>LD (406EH),HL</div><div>Store the value held in Register Pair HL into memory location 406EH (which holds current FOR LOOP END (i.e., the TO) value).</div></div>
											<div class="assembly-row-combined"><div>0A95H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A96H</div><div>LD (4093H),HL</div><div>Store the value held in Register Pair HL into address of the top of the current FOR LOOP (held in memory location 4093H).</div></div>
											<div class="assembly-row-combined"><div>0A99H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0A9AH</div><div>LD (4095H),HL</div><div>Store the value held in Register Pair HL into memory location 4095H (which holds the pointer to the current FOR LOOP).</div></div>
											<div class="assembly-row-combined"><div>0A9DH</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0A9EH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0A9FH">0A9FH - This 
Subroutine will move BASIC's stack to make room for an additional stack 
item (like GOSUB, FOR-LOOP) and then put those values into that BASIC 
stack.  If it runs out of space, it will end in an error.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0A9FH</div><div>LD HL,4180H</div><div>Let Register Pair HL equal 4180H, which is the bottom of the Level 1 stack pointer.</div></div>
											<div class="assembly-row-combined"><div>0AA2H<br>0AA3H<br>0AA4H</div><div>LD A,H<br>CPL<br>LD H,A</div><div>Invert the bits in Register H.  If H started as 41H, which is 01000001, then the CPL would be 10111110, or 0BEH</div></div>
											<div class="assembly-row-combined"><div>0AA5H<br>0AA6H<br>0AA7H</div><div>LD A,L<br>CPL<br>LD L,A</div><div>Invert
 the bits in Register L.  If L started as 80H, which is 10000000, then 
the CPL would be 01111111, or 7FH.  HL would then be BE7FH or 48767 or 
-16000.</div></div>
											<div class="assembly-row-combined"><div>0AA8H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1, to back up one byte.</div></div>
											<div class="assembly-row-combined"><div>0AA9H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.  This will get put back at the top at the end of the routine.</div></div>
											<div class="assembly-row-combined"><div>0AAAH</div><div>ADD HL,SP</div><div>LET Register Pair HL = Register Pair HL + Register SP to check to see how much room there is in the stack.</div></div>
											<div class="assembly-row-combined"><div>0AABH</div><div><a href="#08F4H" class="memory-link">JP NC,08F4H</a></div><div>If
 the NC FLAG (No Carry) has been set then there is not enough room, JUMP
 to 08F4H to display the "SORRY" error (which is "OUT OF MEMORY").</div></div>
											<p class="debug-note">If we are here, then there is room to 
move the stack.  A LOT of variables deal with a FOR LOOP so check to see
 if we even have one at this point.</p>
											<div class="assembly-row-combined"><div>0AAEH</div><div>LD HL,(40A5H)</div><div>Fetch
 the value held in memory location 40A5H (which is the pointer to the 
current FOR LOOP variable) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AB1H<br>0AB1H</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L.  Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
											<div class="assembly-row-combined"><div>0AB3H</div><div><a href="#0AC8H" class="memory-link">JR Z,0AC8H</a></div><div>If the Z FLAG (Zero) has been set, then we are not in a FOR LOOP, so skip over the FOR LOOP stuff and JUMP to 0AC8H.</div></div>
											<div class="assembly-row-combined"><div>0AB5H</div><div>LD HL,(4095H)</div><div>Fetch the value of the current location in a FOR LOOP (held in memory location 4095H) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AB8H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0AB9H</div><div>LD HL,(4093H)</div><div>Fetch the address of the top of the current FOR LOOP (held in memory location 4093H) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0ABCH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0ABDH</div><div>LD HL,(406EH)</div><div>Fetch the current FOR LOOP END (i.e., the TO) value (held in memory location 406EH) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AC0H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0AC1H</div><div>LD HL,(4091H)</div><div>Fetch the FOR LOOP STEP (held in memory location 4091H) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AC4H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0AC5H</div><div>LD HL,(40A5H)</div><div>Fetch
 the value held in memory location 40A5H (which is the pointer to the 
current FOR LOOP variable) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AC8H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0AC9H</div><div>PUSH BC</div><div>Save the original contents of Register Pair BC and put it back to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0ACAH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0ACBH">0ACBH - 
Continuation of the RST 10H routine, to output a character.  On entry 
the flags are set based on BIT 2 of the status of the Cassette port.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0ACBH</div><div><a href="#0AE6H" class="memory-link">JR Z,0AE6H</a></div><div>If
 the Z FLAG (Zero) has been set then we are sending the character held 
in Register A to the screen instead of the cassette, so JUMP to 0AE6H.</div></div>
											<p class="debug-note">If we are here then the character is to be sent to cassette and not the screen.</p>
											<div class="assembly-row-combined"><div>0ACDH</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>0ACEH</div><div>LD DE,(4099H)</div><div>Fetch the address of the print buffer in RAM (held in memory location 4099H) and store it into Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0AD2H</div><div>LD (DE),A</div><div>Store
 the character to display (held in Register A) into the print buffer (at
 the memory location pointed to by Register Pair DE).</div></div>
											<div class="assembly-row-combined"><div>0AD3H</div><div>INC DE</div><div>Bump DE to point to the next character on the BASIC line being processed.</div></div>
											<div class="assembly-row-combined"><div>0AD4H</div><div>LD (4099H),DE</div><div>Store
 the the first available byte of the print buffer (held held in Register
 Pair DE) into memory location 4099H (which is the address of the 
printer buffer in RAM).</div></div>
											<div class="assembly-row-combined"><div>0AD8H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  Results:<ul><li>If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set.</li><li>If A &lt; <span class="code">CARRIAGE RETURN</span>, the CARRY FLAG will be set.</li><li>if A &gt;= <span class="code">CARRIAGE RETURN</span>, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined"><div>0ADAH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0ADBH</div><div>RET NZ</div><div>If the character to display was not a <span class="code">CARRIAGE RETURN</span>, the NZ FLAG will have been set, so RETurn to the caller.</div></div>
											<p class="debug-note">If the character to display was a <span class="code">CARRIAGE RETURN</span> then we are here.</p>
											<div class="assembly-row-combined"><div>0ADCH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0ADDH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0ADEH</div><div>LD HL,40ACH</div><div>Let Register Pair HL equal 40ACH, which is the buffer for output.</div></div>
											<div class="assembly-row-combined"><div>0AE1H</div><div><a href="#0F4BH" class="memory-link">CALL 0F4BH</a></div><div>GOSUB to 0F4BH to write the header and then all data from HL to DE.</div></div>
											<div class="assembly-row-combined"><div>0AE4H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0AE5H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0AE6H">0AE6H - 
Continuation of the RST 10H routine.  Jumped here if BIT 2 of the status
 of the cassette port was ZERO, meaning that we are outputting to the 
screen and not the cassette.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0AE6H</div><div>LD HL,(4068H)</div><div>Fetch the cursor position on screen (held in memory location 4068H) and store it into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AE9H</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>0AEAH</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0AEBH</div><div>CP 20H</div><div>Compare the value held in Register A against 20H (ASCII: <span class="code">SPACE</span>).  Results:<ul><li>If Register A equals <span class="code">SPACE</span>, the Z FLAG is set.</li><li>If A &lt; <span class="code">SPACE</span>, the CARRY FLAG will be set.</li><li>if A &gt;= <span class="code">SPACE</span>, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined"><div>0AEDH</div><div><a href="#0B11H" class="memory-link">JP M,0B11H</a></div><div>If the S FLAG has been SET, JUMP to 0B11H to display a CONTROL CODE.</div></div>
											<div class="assembly-row-combined"><div>0AF0H</div><div>LD (HL),A</div><div>Store the character held in Register A into the screen location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0AF1H</div><div>INC HL</div><div>INCrement the location on the screen (stored in Register Pair HL) by 1.</div></div>
											<div class="assembly-row-combined" id="0AF2H"><div>0AF2H</div><div>LD A,H</div><div>Copy the contents of Register H into Register A.</div></div>
											<div class="assembly-row-combined"><div>0AF3H</div><div>CP 40H</div><div>Check
 to see if we have hit the end of a row by comparing the value held in 
Register A against 40H (Decimal: 64).  Results:  If Register A equals 
64, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0AF5H</div><div><a href="#0B09H" class="memory-link">JR NZ,0B09H</a></div><div>If
 the NZ FLAG (Not Zero) has been set, then we are not yet at the end of 
the line, so JUMP to 0B09H to display the cursor and exit the RST 10H 
routine.</div></div>
											<p class="debug-note">If we are here, then we are at the end of a screen line, and need to scroll the screen.</p>
											<div class="assembly-row-combined"><div>0AF7H</div><div>LD DE,3C00H</div><div>Let Register Pair DE equal 3C00H, which is the location of the beginning of the first line on the screen.</div></div>
											<div class="assembly-row-combined"><div>0AFAH</div><div>LD HL,3C40H</div><div>Let Register Pair HL equal 3C40H, which is the location of the beginning of the second line on the screen.</div></div>
											<div class="assembly-row-combined"><div>0AFDH</div><div>LD BC,03C0H</div><div>Let
 Register Pair BC equal 03C0H (Decimal: 960), which is the number of 
remaining characters on the screen (1024 characters total, minus one 
line of 64 characters = 960 remaining characters).</div></div>
											<div class="assembly-row-combined"><div>0B00H</div><div>LDIR</div><div>Move
 the lines up via a LDIR which transfers a byte of data from the memory 
location pointed to by HL to the memory location pointed to by DE. Then 
HL and DE are incremented and BC is decremented. If BC is not zero, this
 operation is repeated. Interrupts can trigger while this instruction is
 processing.</div></div>
											<div class="assembly-row-combined"><div>0B02H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0B03H</div><div><a href="#0B37H" class="memory-link">CALL 0B37H</a></div><div>GOSUB to 0B37H to clear the line on the screen at the location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0B06H</div><div>LD HL,3FC0H</div><div>Let Register Pair HL equal 3FC0H which is the start of the very last line of the screen.</div></div>
											<div class="assembly-row-combined" id="0B09H"><div>0B09H</div><div>LD (HL),5FH</div><div>Store the value 5FH (ASCII: <span class="code">_</span>) into the memory location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0B0BH</div><div>LD (4068H),HL</div><div>Store the value held in Register Pair HL into memory location 4068H (which is the cursor position on screen).</div></div>
											<div class="assembly-row-combined"><div>0B0EH</div><div>POP AF</div><div>Put the value held at the top of the STACK into Register Pair AF.</div></div>
											<div class="assembly-row-combined"><div>0B0FH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0B10H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>



					&lt;------------- BAD BEFORE THIS --------------&gt;










								<br><h2 class="assembly-section-title" id="0B11H">0B11H - Continuation of the RST 10H routine.  Jumped here from 0AEDH if the character is a control code.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B11H</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>).  If Register A is NOT <span class="code">CARRIAGE RETURN</span>, the NZ FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B13H</div><div><a href="#0B1AH" class="memory-link">JR NZ,0B1AH</a></div><div>If the character held in Register A is not a <span class="code">CARRIAGE RETURN</span>, then the NZ FLAG will have been set, so JUMP to 0B1AH.</div></div>
											<div class="assembly-row-combined"><div>0B15H</div><div><a href="#0B37H" class="memory-link">CALL 0B37H</a></div><div>GOSUB to 0B37H to clear the line on the screen at the location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0B18H</div><div><a href="#0AF2H" class="memory-link">JR 0AF2H</a></div><div>JUMP BACK to the middle of the prior routine at 0AF2H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B1AH">0B1AH - Continuation of the RST 10H routine.  Jumped here from 0B11H if the character is a control code which is not a <span class="code">CARRIAGE RETURN</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B1AH</div><div>CP 0CH</div><div>Compare the value held in Register A against 0CH (ASCII: <span class="code">FORM FEED</span>).  If the character held in Register A is NOT a <span class="code">FORM FEED</span>, the NZ FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B1CH</div><div><a href="#0B2EH" class="memory-link">JR NZ,0B2EH</a></div><div>If the character held in Register A is NOT a <span class="code">FORM FEED</span>, the NZ FLAG will have been set, so JUMP to 0B2EH.</div></div>
											<div class="assembly-row-combined"><div>0B1EH</div><div>LD HL,3C00H</div><div>Let Register Pair HL equal 3C00H, which is the location of the first character on the display.</div></div>
											<div class="assembly-row-combined" id="0B21H"><div>0B21H</div><div><a href="#0B37H" class="memory-link">CALL 0B37H</a></div><div>GOSUB
 to 0B37H to clear the line on the screen at the location pointed to by 
Register Pair HL.  On return HL points to the start of the next line.</div></div>
											<div class="assembly-row-combined"><div>0B24H</div><div>LD A,H</div><div>Copy the MSB of the current screen location (held in Register H) into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B25H</div><div>CP 40H</div><div>Compare
 the value held in Register A against 40H.  If the MSB of the current 
screen location is not 40H (meaning, it is still a valid screen ram 
address), the NZ FLAG will be set..</div></div>
											<div class="assembly-row-combined"><div>0B27H</div><div><a href="#0B21H" class="memory-link">JR NZ,0B21H</a></div><div>If
 the NZ FLAG (Not Zero) has been set, LOOP back to 0B21H to clear a line
 on the screen (and keep doing so until the entire screen has been 
cleared).</div></div>
											<div class="assembly-row-combined"><div>0B29H</div><div>LD HL,3C00H</div><div>If
 we are here then HL is now pointing beyond the screen RAM (ending in 
3FFF), so reset HL to the beginning of the screen by setting Register 
Pair HL equal to 3C00H.</div></div>
											<div class="assembly-row-combined"><div>0B2CH</div><div><a href="#0B09H" class="memory-link">JR 0B09H</a></div><div>JUMP to 0B09H to display the cursor, POP AF, swap out alternate registers and RETurn.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0B2EH">0B2EH - Continuation of the RST 10H routine.  Jumped here from 0B11H if the character is a control code which is not a <span class="code">CARRIAGE RETURN</span> or a <span class="code">FORM FEED</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B2EH</div><div>CP 1DH</div><div>Compare the value held in Register A against 1DH (ASCII: <span class="code">BACK SPACE</span>).  If Register A does NOT equal 1DH then the NZ FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B30H</div><div><a href="#0B09H" class="memory-link">JR NZ,0B09H</a></div><div>If we got a <span class="code">BACK SPACE</span>,
 then the NZ FLAG (Not Zero) will have been set, so JUMP to 0B09H to 
display the cursor, POP AF, swap out alternate registers and RETurn.</div></div>
											<div class="assembly-row-combined"><div>0B32H</div><div>LD (HL),20H</div><div>Erase the character at the current screen location by storing the value 20H (ASCII: <span class="code">SPACE</span>) into the memory location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0B34H</div><div>DEC HL</div><div>Back up HL by 1 to point to the prior character on the screen.</div></div>
											<div class="assembly-row-combined"><div>0B35H</div><div><a href="#0B09H" class="memory-link">JR 0B09H</a></div><div>JUMP to 0B09H to display the cursor, POP AF, swap out alternate registers and RETurn.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B37H">0B37H - VIDEO - Clear the line on the screen at the location pointed to by Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B37H</div><div>LD (HL),20H</div><div>Store the value 20H (ASCII: <span class="code">SPACE</span>) into the screen location pointed to by Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0B39H</div><div>INC HL</div><div>INCrement the Register Pair HL to point to the next location on the screen.</div></div>
											<div class="assembly-row-combined"><div>0B3AH</div><div>LD A,L</div><div>Copy the contents of Register L into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B3BH</div><div>AND 3FH</div><div>MASK
 the value of Register A against 3FH (0011 1111).  This has the effect 
of turning off bits 7, 6, leaving only values of 0-63 possible.</div></div>
											<div class="assembly-row-combined"><div>0B3DH</div><div><a href="#0B37H" class="memory-link">JR NZ,0B37H</a></div><div>If
 the masked Register L is NOT zero, then we have not reached the end of 
that line, so LOOP BACK to 0B37H to keep writing the spaces.</div></div>
											<div class="assembly-row-combined"><div>0B3FH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B40H">0B40H - 
KEYBOARD - Check the keyboard for a keypress - If found, display it and 
put it into Register A.  If no key, A=0 and Z FLAG is set.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B40H</div><div>LD A,(387FH)</div><div>Fetch the value held in the keyboard memory location of 387FH and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B43H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>0B44H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set them no key was pressed so RETurn to the caller.</div></div>
											<p class="debug-note">If we are here, then a key was pressed when we polled, and it is stored in Register A.</p>
											<div class="assembly-row-combined"><div>0B45H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0B46H</div><div><a href="#0B55H" class="memory-link">CALL 0B55H</a></div><div>GOSUB to 0B55H to decode the keystroke held in Register A (routine include a short delay for debounce).</div></div>
											<div class="assembly-row-combined"><div>0B49H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0B4AH</div><div>RST 10H</div><div>Send the character held in Register A to the cassette or screen via a RST 10 call.</div></div>
											<p class="debug-note">Let's make sure the key is released.</p>
											<div class="assembly-row-combined"><div>0B4BH</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>0B4CH</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0B4DH</div><div>LD A,(387FH)</div><div>Fetch the value held in the keyboard memory location of 387FH and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B50H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>0B51H</div><div><a href="#0B4DH" class="memory-link">JR NZ,0B4DH</a></div><div>If
 the NZ FLAG (Not Zero) has been set then the key is likely just being 
held down, so LOOP back 2 instructions to 0B4DH to keep checking.</div></div>
											<p class="debug-note">The key has been released!</p>
											<div class="assembly-row-combined"><div>0B53H</div><div>POP AF</div><div>Restore the original key into Register Pair A and restore the flags based on Register A.</div></div>
											<div class="assembly-row-combined"><div>0B54H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B55H">0B55H - KEYBOARD - Do a little debounce and then Decode the keystroke held in Register A.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<p class="debug-note">The keyboard matrix is:<br>3801H - @ABCDEFG<br>3802H - HIJKLMNO<br>3804H - PQRSTUVW<br>3808H - XYZ<br>3810H - 01234567<br>3820H - 89:;,-./<br>3840H - ENT CLR BRK ‚Üë ‚Üì ‚Üê ‚Üí SPC</p>
											<div class="assembly-row-combined"><div>0B55H</div><div>LD B,FFH</div><div>Let Register B equal FFH (Decimal: 255) for a debounce delay.</div></div>
											<div class="assembly-row-combined"><div>0B57H</div><div><a href="#0B57H" class="memory-link">DJNZ 0B57H</a></div><div>LOOP
 back to 0B57H, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
											<div class="assembly-row-combined"><div>0B59H</div><div>LD DE,0BACH</div><div>Let Register Pair DE equal 0BACH, which is the location in ROM with the Keyboard Decode Table.</div></div>
											<div class="assembly-row-combined"><div>0B5CH</div><div>LD HL,3801H</div><div>Let Register Pair HL equal 3801H (Decimal: 14337).<br> <b>NOTE:</b> 3801H is the value held at Keyboard Row 1, contaning the @ABCDEFG keys.</div></div>
											<div class="assembly-row-combined"><div>0B5FH</div><div>LD A,00H</div><div>Let Register A equal 00H.</div></div>
											<div class="assembly-row-combined" id="0B61H"><div>0B61H</div><div>OR (HL)</div><div>Top of a loop.  OR the value stored at (HL) against Register A.  The results are stored in Register A.</div></div>
											<div class="assembly-row-combined"><div>0B62H</div><div><a href="#0B6EH" class="memory-link">JR NZ,0B6EH</a></div><div>If
 combining the bits from keyboard keypress on the row pointed to by 
Register Pair HL and Register A results in NOT ZERO, JUMP to 0B6EH.</div></div>
											<div class="assembly-row-combined"><div>0B64H</div><div>INC E</div><div>INCrement the value stored in Register E by 1 so that DE points to the next entry in the Keyboard Decode Table.</div></div>
											<div class="assembly-row-combined"><div>0B65H</div><div>SLA L</div><div>Shift
 the bits in Register L left, but Bit 7 going to CARRY, and Bit 0 
remaining unchanged.  This moves to HL to the next keyboard row, as it 
is not otherwise as simple adding 1 (i.e., the keyboard rows are 3801, 
3802, 3804, 3808, 3810, and 3820).</div></div>
											<div class="assembly-row-combined"><div>0B67H</div><div><a href="#0B61H" class="memory-link">JP P,0B61H</a></div><div>If the S FLAG has been RESET, continue scanning the keyboard with the new HL via a JUMP to 0B61H.</div></div>
											<div class="assembly-row-combined"><div>0B6AH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0B6BH</div><div>POP AF</div><div>Discard the RETurn address at the top of thee stack.</div></div>
											<div class="assembly-row-combined"><div>0B6CH</div><div><a href="#0B40H" class="memory-link">JR 0B40H</a></div><div>JUMP
 to 0B40H to fetch a keystroke from the keyboard (note: does not wait 
for a keypress).  The RET in that routine will RETurn from this one.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B6EH">0B6EH - Continuation of the Keyboard Decode Routine; JUMPed here if we found a key pressed.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B6EH</div><div>EX DE,HL</div><div>EXchange
 the value stored in Register Pair HL (currently, the address of the 
keyboard row which had the keypress) with the value stored in Register 
Pair DE (currently, the position in the Keyboard Decode Table in ROM).</div></div>
											<div class="assembly-row-combined"><div>0B6FH</div><div>LD B,(HL)</div><div>Fetch the key (i.e, the value held in the memory location pointed to by Register Pair HL) and store it into Register B.</div></div>
											<div class="assembly-row-combined" id="0B70H"><div>0B70H</div><div>INC B</div><div>INCrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>0B71H</div><div>SRL A</div><div>Shift the bits in Register A shifted right position, with bit 0 being put into the CARRY FLAG.</div></div>
											<div class="assembly-row-combined"><div>0B73H</div><div><a href="#0B70H" class="memory-link">JR NZ,0B70H</a></div><div>Loop back to 0B70H until the Z FLAG is set.</div></div>
											<div class="assembly-row-combined"><div>0B75H</div><div>LD A,B</div><div>Since you can't COMPARE against Register B, copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B76H</div><div>CP 40H</div><div>Compare the value held in Register A against 40H (ASCII: <span class="code">@</span>).  If A &gt;= <span class="code">@</span>, the NO CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B78H</div><div><a href="#0B91H" class="memory-link">JR NC,0B91H</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0B91H.</div></div>
											<div class="assembly-row-combined"><div>0B7AH</div><div>CP 3CH</div><div>Compare the value held in Register A against 3CH (ASCII: "<span class="code">&lt;</span>").  If A &gt;= "<span class="code">&lt;</span>", the NO CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B7CH</div><div><a href="#0B9FH" class="memory-link">JR NC,0B9FH</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0B9FH.</div></div>
											<div class="assembly-row-combined"><div>0B7EH</div><div>CP 30H</div><div>Compare the value held in Register A against 30H (ASCII: <span class="code">0</span>).  if A &gt;= <span class="code">0</span>, the NO CARRY FLAG will be set.</div></div>
											<div class="assembly-row-combined"><div>0B80H</div><div><a href="#0B98H" class="memory-link">JR NC,0B98H</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0B98H.</div></div>
											<div class="assembly-row-combined"><div>0B82H</div><div>LD HL,0BB2H</div><div>Let
 Register Pair HL equal 0BB2H, which is the last entry in the KEYBOARD 
DECODE TABLE.  The next INC HL points HL to the CONTROL CHARACTER LOOKUP
 TABLE.</div></div>
											<div class="assembly-row-combined" id="0B85H"><div>0B85H</div><div>INC HL</div><div>This
 is the top of a loop which advances HL by B bytes.  INCrement the value
 stored in Register Pair HL by 1 to point to the next line of the 
CONTROL CHARACTER LOOKUP TABLE.</div></div>
											<div class="assembly-row-combined"><div>0B86H</div><div>DEC B</div><div>DECrement the value stored in Register B by 1.</div></div>
											<div class="assembly-row-combined"><div>0B87H</div><div><a href="#0B85H" class="memory-link">JR NZ,0B85H</a></div><div>If Register B has not yet hit ZERO, LOOP BACK to 0B85H to INC HL and keep going until B bytes.</div></div>
											<div class="assembly-row-combined"><div>0B89H</div><div>LD B,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register B.</div></div>
											<div class="assembly-row-combined"><div>0B8AH</div><div><a href="#0BA5H" class="memory-link">CALL 0BA5H</a></div><div>GOSUB to 0BA5H to check for a <kbd>SHIFT</kbd>, set the FLAGS, and put Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B8DH</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set (meaning, <kbd>SHIFT</kbd> was found), RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B8EH">0B8EH - Continuation of the Keyboard Decode Routine; passed through since the key was not greater than <span class="code">@</span>, "<span class="code">&lt;</span>", or <span class="code">0</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B8EH</div><div>AND 3FH</div><div>MASK the value of Register A against 3FH (0011 1111) to convert UP, DOWN, LEFT, and RIGHT into 01BH, 01CH, 01DH, and 01EH.</div></div>
											<div class="assembly-row-combined"><div>0B90H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B91H">0B91H -  Continuation of the Keyboard Decode Routine; JUMPed here from 0B76H if the key is &gt;= <span class="code">@</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B91H</div><div><a href="#0BA5H" class="memory-link">CALL 0BA5H</a></div><div>GOSUB to 0BA5H to check for a <kbd>SHIFT</kbd>, set the FLAGS, and put Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B94H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set (meaning, no <kbd>SHIFT</kbd>), RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B95H">0B95H - Continuation of the Keyboard Decode Routine; passed through if the key was &gt;= <span class="code">@</span>, but it was unshifted.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B95H</div><div>AND 3FH</div><div>MASK
 the value of Register A against 3FH (0011 1111) to turn A-Z into 01H to
 27H (noting that 1DH is converted again, so SHIFT-H will not produce a 
BACKSPACE).</div></div>
											<div class="assembly-row-combined"><div>0B97H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B98H">0B98H - Continuation of the Keyboard Decode Routine; JUMPed here from 0B80H if the key is &gt;= <span class="code">0</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B98H</div><div><a href="#0BA5H" class="memory-link">CALL 0BA5H</a></div><div>GOSUB to 0BA5H to check for a <kbd>SHIFT</kbd>, set the FLAGS, and put Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0B9BH</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set (meaning, no <kbd>SHIFT</kbd>), RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B9CH">0B9CH - Continuation of the Keyboard Decode Routine; passed through if the key was &gt;= <span class="code">0</span>, but it was unshifted.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B9CH</div><div>AND 2FH</div><div>MASK the value of Register A against 2FH to convert the numbers into their shifted counterparts (<kbd>1</kbd> to <kbd>!</kbd>, etc).</div></div>
											<div class="assembly-row-combined"><div>0B9EH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0B9FH">0B9FH - Continuation of the Keyboard Decode Routine; JUMPed here from 0B7CH if the key is &gt;= "<span class="code">&lt;</span>".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0B9FH</div><div><a href="#0BA5H" class="memory-link">CALL 0BA5H</a></div><div>GOSUB to 0BA5H to check for a <kbd>SHIFT</kbd>, set the FLAGS, and put Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0BA2H</div><div>RET NZ</div><div>If the NZ FLAG (Not Zero) has been set (meaning, <kbd>SHIFT</kbd> was found), RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BA3H">0BA3H - Continuation of the Keyboard Decode Routine; JUMPed here from 0B7CH if the key is &gt;= "<span class="code">&lt;</span>", but it was shifted.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BA3H</div><div><a href="#0B9CH" class="memory-link">JR 0B9CH</a></div><div>JUMP to 0B9CH which will convert <kbd>SHIFT</kbd>-<kbd>@</kbd> into <kbd>0</kbd>.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BA5H">0BA5H - Continuation of the Keyboard Decode Routine; this will check for a <kbd>SHIFT</kbd>, set the FLAGS (NZ if SHIFTED), and put Register B into Register A.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BA5H</div><div>LD A,(3880H)</div><div>Fetch the value held in memory location 3880H and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0BA8H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
											<div class="assembly-row-combined"><div>0BA9H</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0BAAH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BABH">0BABH - No idea what calls this!.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BABH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BACH">0BACH - Data Storage - Keyboard Decode Table.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BACH</div><div>DEFB 3FH</div><div>The <kbd>?</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BADH</div><div>DEFB 47H</div><div>The <kbd>G</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BAEH</div><div>DEFB 4FH</div><div>The <kbd>O</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BAFH</div><div>DEFB 57H</div><div>The <kbd>W</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB0H</div><div>DEFB 2FH</div><div>The <kbd>/</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB1H</div><div>DEFB 37H</div><div>The <kbd>7</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB2H</div><div>DEFB 00H</div><div>End of List Delimeter.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BB3H">0BB3H - Data Storage - Control Characters<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BB3H</div><div>DEFB 0DH</div><div>The <kbd>ENTER</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB4H</div><div>DEFB 0CH</div><div>The <kbd>CLEAR</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB5H</div><div>DEFB 03H</div><div>The <kbd>BREAK</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB6H</div><div>DEFB 6BH</div><div>The <kbd>‚Üë</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB7H</div><div>DEFB 5CH</div><div>The <kbd>‚Üì</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB8H</div><div>DEFB 5DH</div><div>The <kbd>‚Üê</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BB9H</div><div>DEFB 5EH</div><div>The <kbd>‚Üí</kbd> key.</div></div>
											<div class="assembly-row-combined"><div>0BBAH</div><div>DEFB 20H</div><div>The <kbd>SPACE</kbd> key.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0BBBH">0BBBH - Data Storage - Parse Table for DATA Statement<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BBBH</div><div>DEFM 'DATA'</div><div>The word DATA</div></div>
											<div class="assembly-row-combined"><div>0BBFH</div><div>DEFW 8749H</div><div>JUMP location if DATA is found (0749H).</div></div>
											<div class="assembly-row-combined"><div>0BC1H</div><div>DEFW 874BH</div><div>JUMP location if DATA is NO found (074BH).</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BC3H">0BC3H - This routine will copy the 4 bytes pointed to by Register Pair HL into the Floating Point Stack (which is 5 bytes).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BC3H<br>0BC4H<br>0BC5H</div><div>PUSH DE<br>PUSH HL<br>PUSH AF</div><div>Save DE, HL, and AF - Will be restored before RETurning.</div></div>
											<div class="assembly-row-combined"><div>0BC6H</div><div>LD BC,0004H</div><div>Set up for a move of 4 bytes via a LDIR by setting Register Pair BC equal 0004H.</div></div>
											<div class="assembly-row-combined"><div>0BC9H<br>0BCBH</div><div>PUSH IX<br>POP DE</div><div>Let Register Pair DE = Special Index Register IX, so now DE points to the current location in the Floating Point Stack.</div></div>
											<div class="assembly-row-combined"><div>0BCCH</div><div>LDIR</div><div>Transfer
 4 bytes fromthe memory location pointed to by HL to the memory location
 pointed to by DE. Then HL and DE are incremented and BC is decremented.
 If BC is not zero, this operation is repeated. Interrupts can trigger 
while this instruction is processing.</div></div>
											<div class="assembly-row-combined"><div>0BCEH</div><div>RL (IX+02H)</div><div>IX+02H
 is the MSB of NUMBER 2 in the FLOATING POINT STACK.  Rotates the bytes 
of IX+02H (the MSB of the NUMBER 2 in the Floating Point Stack at IX) to
 the left with the CARRY value moving to bit 0 and bit 7 moving to the 
CARRY.</div></div>
											<div class="assembly-row-combined"><div>0BD2H</div><div>RL (IX+03H)</div><div>IX+03H
 is the EXPONENT of NUMBER 2 in the FLOATING POINT STACK.  Rotates the 
bytes of IX+03H (the EXPONENT of NUMBER 2 in the Floating Point Stack at
 IX) to the left with the CARRY value moving to bit 0 and bit 7 moving 
to the CARRY.</div></div>
											<div class="assembly-row-combined"><div>0BD6H</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
											<div class="assembly-row-combined"><div>0BD7H</div><div>RRA</div><div>Rotates the bits in Register A to the right, with CARRY put into bit 7, and BIT 0 put into CARRY.</div></div>
											<div class="assembly-row-combined"><div>0BD8H</div><div>LD (IX+04H),A</div><div>IX+04H
 is the SIGN of NUMBER 2 in the FLOATING POINT STACK.  Store the 
modified Register B into IX+04H (the SIGN of NUMBER 2 in the Floating 
Point Stack at IX).</div></div>
											<div class="assembly-row-combined"><div>0BDBH</div><div>SCF</div><div>Since the CARRY FLAG is going to be important, turn the CARRY FLAG on.</div></div>
											<div class="assembly-row-combined"><div>0BDCH</div><div>RR (IX+02H)</div><div>IX+02H
 is the MSB of NUMBER 2 in the FLOATING POINT STACK.  With the CARRY 
freshly set, rotates the bytes of IX+02H (the MSB of NUMBER 2 in the 
Floating Point Stack at IX) to the left with the CARRY value moving to 
bit 0 and bit 7 moving to the CARRY.</div></div>
											<div class="assembly-row-combined"><div>0BE0H</div><div>LD C,05H</div><div>Let Register C equal 05H, which is the number of bytes in a Floating Point Stack representing a single number.</div></div>
											<div class="assembly-row-combined"><div>0BE2H</div><div>ADD IX,BC</div><div>Advance the Floating Point Stack pointer (Register Pair IX) to the nexy number in the Floating Point Stack.</div></div>
											<div class="assembly-row-combined"><div>0BE4H<br>0BE5H<br>0BE6H</div><div>POP AF<br>POP HL<br>POP DE</div><div>Restore AF, HL, and DE from the stack.</div></div>
											<div class="assembly-row-combined"><div>0BE7H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0BE8H">0BE8H - This 
routine will assign a value held at the top of the FLOATING POINT STACK 
to a variable in a FOUR BYTE FORMAT and the number is then removed from 
the FLOATING POINT STACK.  The top of the stack must hold the address of
 the variable being set.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0BE8H</div><div>POP HL</div><div>Put the memory location of the variable to be set (i.e., the value held at the top of the STACK) into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0BE9H</div><div>LD BC,FFFBH</div><div>Let Register Pair BC equal FFFBH, which is -5.</div></div>
											<div class="assembly-row-combined"><div>0BECH</div><div>ADD IX,BC</div><div>Position the FLOATING POINT STACK back 1 entry (i.e., -5 bytes) to point to the FLOATING POINT NUMBER we want to access.</div></div>
											<div class="assembly-row-combined"><div>0BEEH</div><div>LD BC,0004H</div><div>Let
 Register Pair BC equal 0004H (Decimal: 4) representing the number of 
bytes that will be used for the variable, which will be used for a LDIR 
of 4 bytes.</div></div>
											<div class="assembly-row-combined"><div>0BF1H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.  Will be restored from the stack before exiting this routine.</div></div>
											<div class="assembly-row-combined"><div>0BF2H</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.  Will be restored from the stack before exiting this routine.</div></div>
											<div class="assembly-row-combined"><div>0BF3H</div><div>EX DE,HL</div><div>EXchange
 the value stored in Register Pair HL (i.e., the location in RAM of the 
variable to be set) with the value stored in Register Pair DE (which 
will be discarded).</div></div>
											<div class="assembly-row-combined"><div>0BF4H<br>0BF6H</div><div>PUSH IX<br>POP HL</div><div>Let
 Register Pair HL = Special Index Register IX, which will be the source 
of the data; DE is still the location in RAM of the variable to be set.</div></div>
											<div class="assembly-row-combined"><div>0BF7H</div><div>LDIR</div><div>Transfers
 the 4 bytes of the FLOATING POINT STACK (pointed to by HL) into the 
variable (pointed to by DE). Then HL and DE are incremented and BC is 
decremented. If BC is not zero, this operation is repeated. Interrupts 
can trigger while this instruction is processing.</div></div>
											<div class="assembly-row-combined"><div>0BF9H</div><div>EX DE,HL</div><div>EXchange
 the value stored in Register Pair HL (i.e., the current pointer to the 
FLOATING POINT STACK after the 4 byte move) with the value stored in 
Register Pair DE (i.e., the pointer to the VARIABLE in RAM after the 
move).</div></div>
											<div class="assembly-row-combined"><div>0BFAH<br>0BFBH</div><div>DEC HL</div><div>Back up HL (i.e., the pointer to the variable in RAM) two bytes.</div></div>
											<div class="assembly-row-combined"><div>0BFCH</div><div>RL (HL)</div><div>Rotates the byte held at (HL) to the left with the CARRY value moving to bit 0 and bit 7 moving to the CARRY.</div></div>
											<div class="assembly-row-combined"><div>0BFEH</div><div>INC HL</div><div>Point to the next byte of the variable by INCrementing the value stored in Register Pair HL by 1.</div></div>
											<p class="debug-note">Now we move the SIGN BIT to the top bit of the exponent byte.</p>
											<div class="assembly-row-combined"><div>0BFFH</div><div>LD A,(IX+04H)</div><div>IX+04H
 is the SIGN of NUMBER 2 in the FLOATING POINT STACK.  Fetch the value 
held in the memory location pointed to by Special Index Register Pair 
(IX+04H) (i.e., the SIGN of the number in the Floating Point Stack at 
IX) into Register A.</div></div>
											<div class="assembly-row-combined"><div>0C02H</div><div>RLA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and the 
previous contents of the carry flag are copied to bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C03H</div><div>RR (HL)</div><div>With
 the CARRY freshly set, rotate the byte of the VARIABLE pointed to by 
Register Pair HL to the right one bit position with bit 0 copied to the 
CARRY FLAG and the previous contents of the CARRY FLAG copied to bit 7.</div></div>
											<div class="assembly-row-combined"><div>0C05H</div><div>DEC HL</div><div>Back up the pointer to the byte in the VARIABLE by 1.</div></div>
											<div class="assembly-row-combined"><div>0C06H</div><div>RR (HL)</div><div>Rotate
 the byte of the VARIABLE pointed to by Register Pair HL to the right 
one bit position with bit 0 copied to the CARRY FLAG and the previous 
contents of the CARRY FLAG copied to bit 7.</div></div>
											<div class="assembly-row-combined"><div>0C08H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0C09H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0C0AH</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0C0BH">0C0BH - Convert a FLOATING number to an INTEGER; results stored in Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0C0BH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0C0CH</div><div>LD BC,FFFBH</div><div>Let Register Pair BC' equal FFFBH, which is -5.</div></div>
											<div class="assembly-row-combined"><div>0C0FH</div><div>ADD IX,BC</div><div>Move the pointer of the FLOATING POINT STACK back 1 number's worth of bytes (i.e., 5 bytes).</div></div>
											<div class="assembly-row-combined"><div>0C11H</div><div>LD DE,0000H</div><div>Let Register Pair DE equal 0000H.</div></div>
											<div class="assembly-row-combined"><div>0C14H</div><div>LD A,(IX+03H)</div><div>IX+03H
 is the EXPONENT of NUMBER 2 in the FLOATING POINT STACK.  Fetch the 
EXPONENT OF NUMBER 2 from the current FLOATING POINT STACK (held at IX +
 03H) and store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0C17H</div><div>LD C,(IX+04H)</div><div>IX+04H
 is the SIGN of NUMBER 2 in the FLOATING POINT STACK.  Fetch the SIGN OF
 NUMBER 2 from the current FLOATING POINT STACK (held at IX + 04H) and 
store it into Register A.</div></div>
											<div class="assembly-row-combined"><div>0C1AH</div><div>CP 80H</div><div>Compare
 the EXPONENT (held in Register A) against 80H (Decimal: 128).  Results:
 If Register A equals 80H, the Z FLAG is set; otherwise the NZ FLAG is 
set.</div></div>
											<div class="assembly-row-combined"><div>0C1CH</div><div><a href="#0C52H" class="memory-link">JR Z,0C52H</a></div><div>If
 the EXPONENT was 80H, then the Z FLAG will have been set, JUMP to 0C52H
 to PUSH DE' to the top of the stack (for transfer to HL), swap back the
 alternate registers, RESTORE the top of the stack to HL, and RETurn.</div></div>
											<div class="assembly-row-combined"><div>0C1EH</div><div>CP 01H</div><div>Compare the EXPONENT (held in Register A) against 01H.  Results:<ul><li>If Register A equals 01H, the Z FLAG is set.</li><li>If A &lt; 01H, the CARRY FLAG will be set.</li><li>if A &gt;= 01H, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined"><div>0C20H</div><div><a href="#0C2CH" class="memory-link">JP M,0C2CH</a></div><div>If
 the EXPONENT was lower than 02 (and the M FLAG was set, meaning 
negative; meaning also that BIT 7 was set), JUMP to 0C2CH to shift.</div></div>
											<div class="assembly-row-combined"><div>0C23H</div><div>CP 10H</div><div>Compare the EXPONENT (held in Register A) against 10H (Decimal: 16).  Results:<ul><li>If Register A equals 10H, the Z FLAG is set.</li><li>If A &lt; 10H, the CARRY FLAG will be set.</li><li>if A &gt;= 10H, the NO CARRY FLAG will be set.</li></ul></div></div>
											<div class="assembly-row-combined"><div>0C25H</div><div><a href="#0C30H" class="memory-link">JP M,0C30H</a></div><div>If the EXPONENT was lower than 10H (Decimal: 16), the number is smaller than 2^16 so JUMP to 0C30H.</div></div>
											<div class="assembly-row-combined"><div>0C28H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0C29H</div><div><a href="#01A2H" class="memory-link">JP 01A2H</a></div><div>display the "HOW?" error via a JUMP to 01A2H.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0C2CH">0C2CH - Part of the CONVERT A FLOATING NUMBER TO AN INTEGER routine; JUMPed here from 0C20H if the EXPONENT was lower than 01H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0C2CH</div><div>LD A,FFH</div><div>Let Register A equal FFH (Decimal: 255).</div></div>
											<div class="assembly-row-combined"><div>0C2EH</div><div><a href="#0C46H" class="memory-link">JR 0C46H</a></div><div>JUMP to 0C46H to shift Register C left one position, round if needed, Put DE' into HL, and RETurn.</div></div>
										</div>
									</div>
								<br><h2 class="assembly-section-title" id="0C30H">0C30H - Part 
of the CONVERT A FLOATING NUMBER TO AN INTEGER routine; JUMPed here from
 0C25H if the EXPONENT was lower than 10H.  This routine will shift a 
small FLOATING POINT number into the correct position based on the 
EXPONENT.  Register A is a number less than 16.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0C30H</div><div>LD B,A</div><div>Copy the contents of Register A into Register B to act as the number of times the number needs to be rotated.</div></div>
											<div class="assembly-row-combined"><div>0C31H</div><div>LD A,(IX+00H)</div><div>IX+00H
 is the LSB of NUMBER 2 in the FLOATING POINT STACK.  Fetch the LSB of 
NUMBER 2 from the FLOATING POINT STACK (held at IX+00H) and store it 
into Register A.</div></div>
											<div class="assembly-row-combined"><div>0C34H</div><div>LD L,(IX+01H)</div><div>IX+01H
 is the NMSB of NUMBER 2 in the FLOATING POINT STACK.  Fetch the NMSB of
 NUMBER 2 from the FLOATING POINT STACK (held at IX+01H) and store it 
into Register L.</div></div>
											<div class="assembly-row-combined"><div>0C37H</div><div>LD H,(IX+02H)</div><div>IX+02H
 is the MSB of NUMBER 2 in the FLOATING POINT STACK.  Fetch the MSB of 
NUMBER 2 from the FLOATING POINT STACK (held at IX+02H) and store it 
into Register H.</div></div>
											<div class="assembly-row-combined" id="0C3AH"><div>0C3AH</div><div>SLA A</div><div>Top
 of a loop of Register B iterations.  The contents of the LSB (stored in
 Register A) are shifted left one bit position, with the contents of bit
 7 copied to the carry flag and a zero is put into bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C3CH</div><div>RL L</div><div>The
 contents of Register L are rotated left one bit position with the 
contents of bit 7 copied to the carry flag and the previous contents of 
the carry flag copied to bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C3EH</div><div>RL H</div><div>The
 contents of Register H are rotated left one bit position with the 
contents of bit 7 copied to the carry flag and the previous contents of 
the carry flag copied to bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C40H</div><div>RL E</div><div>The
 contents of Register E are rotated left one bit position with the 
contents of bit 7 copied to the carry flag and the previous contents of 
the carry flag copied to bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C42H</div><div>RL D</div><div>The
 contents of Register D are rotated left one bit position with the 
contents of bit 7 copied to the carry flag and the previous contents of 
the carry flag copied to bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C44H</div><div><a href="#0C3AH" class="memory-link">DJNZ 0C3AH</a></div><div>LOOP
 back to 0C3AH to keep rotating, reducing Register B each time, and 
continue to LOOP until Register B has been reduced to ZERO, in which 
case, continue with the next instruction.</div></div>
											<div class="assembly-row-combined" id="0C46H"><div>0C46H</div><div>SLA C</div><div>The
 contents of the Register C are shifted left one bit position, with the 
contents of bit 7 copied to the carry flag and a zero is put into bit 0.</div></div>
											<div class="assembly-row-combined"><div>0C48H</div><div><a href="#0C52H" class="memory-link">JR NC,0C52H</a></div><div>If the NC FLAG (No Carry) has been set, then we do not need to round up, so JUMP to 0C52H.</div></div>
											<div class="assembly-row-combined" id="0CA4H"><div>0C4AH</div><div>OR H</div><div>OR Register H against Register A.  The results are stored in Register A.</div></div>
											<div class="assembly-row-combined"><div>0C4BH</div><div>OR L</div><div>OR Register L against Register A.  The results are stored in Register A.</div></div>
											<div class="assembly-row-combined"><div>0C4CH</div><div><a href="#0C4FH" class="memory-link">JR Z,0C4FH</a></div><div>If
 the Z FLAG (Zero) has been set, then the value was have is zero, and we
 certainly don't need to round that up, so JUMP to 0C4FH.</div></div>
											<div class="assembly-row-combined"><div>0C4EH</div><div>INC DE</div><div>Bump DE.</div></div>
											<div class="assembly-row-combined"><div>0C4FH</div><div><a href="#0C78H" class="memory-link">CALL 0C78H</a></div><div>GOSUB to 0C78H to NEGate Register Pair DE.</div></div>
											<div class="assembly-row-combined" id="0C52H"><div>0C52H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0C53H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0C54H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
											<div class="assembly-row-combined"><div>0C55H</div><div>RET</div><div>RETurn to the caller.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0C56H">0C56H - Set HL
 to 10.0 and then, by passing through, convert the value stored in 
Register Pair HL to a floating point number in the Floating Point Stack.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0C56H</div><div>LD HL,000AH</div><div>Let Register Pair HL equal 000AH (Decimal: 10).</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0C59H">0C59H - 
Convert the value stored in Register Pair HL to a floating point number 
in the Floating Point Stack.  On Entry DE still points to the current 
character of the BASIC command line being examined.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
									<div class="card-item">
										<div class="assembly-table">
											<div class="assembly-row-combined"><div>0C59H</div><div>PUSH DE</div><div>Save the pointer current character of the BASIC command line being examined (i.e., Register Pair DE) to the top of the stack.</div></div>
											<div class="assembly-row-combined"><div>0C5AH</div><div>EX DE,HL</div><div>Let DE = the floating point number.</div></div>
											<div class="assembly-row-combined"><div>0C5BH</div><div>LD BC,000AH</div><div>Let Register Pair BC' equal 000AH (Decimal: 10), which would be two sets of 5-byte entries in the FLOATING POINT STACK.</div></div>
											<div class="assembly-row-combined"><div>0C5EH</div><div>ADD IX,BC</div><div>Advance the pointer to the FLOATING POINT STACK pointer (i.e., Special Index Register IX) forward 2 entries (i.e., 10 bytes).</div></div>
											<div class="assembly-row-combined"><div>0C60H</div><div><a href="#0C75H" class="memory-link">CALL 0C75H</a></div><div>GOSUB
 to 0C75H to process a number held in Register Pair DE (with negative 
numbers being turned upside down so -3 would gets turned into 0FFFD).</div></div>
											<div class="assembly-row-combined"><div>0C63H</div><div>PUSH DE</div><div>Save
 the resulting modified Register Pair DE' to the top of the stack so 
that it can be recalled into DE when DE is swapped with DE'.</div></div>
											<div class="assembly-row-combined"><div>0C64H</div><div>LD H,00H</div><div>Let Register H' equal 00H.</div></div>
											<div class="assembly-row-combined"><div>0C66H</div><div>RR H</div><div>Rotate
 Register H' right one bit position, with the contents of bit 0 copied 
to the carry flag, and the previous contents of the carry flag are 
copied to bit 7.</div></div>
											<div class="assembly-row-combined"><div>0C68H</div><div>LD L,10H</div><div>Let Register L' equal 10H (Decimal: 16).</div></div>
											<div class="assembly-row-combined"><div>0C6AH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'.  <b>Note:</b> AF is not handled via EXX.</div></div>
											<div class="assembly-row-combined"><div>0C6BH</div><div>POP DE</div><div>Put the value held at the top of the STACK (i.e., DE') into Register Pair DE.</div></div>
											<div class="assembly-row-combined"><div>0C6CH</div><div>LD L,00H</div><div>Let Register L equal 00H.</div></div>
											<div class="assembly-row-combined"><div>0C6EH</div><div>LD H,E</div><div>Copy the contents of Register E into Register H.</div></div>
											<div class="assembly-row-combined"><div>0C6FH</div><div>LD C,D</div><div>Copy the contents of Register D into Register C.</div></div>
											<div class="assembly-row-combined"><div>0C70H</div><div><a href="#0E00H" class="memory-link">CALL 0E00H</a></div><div>GOSUB to 0E00H to normalize C, H, and L.</div></div>
											<div class="assembly-row-combined"><div>0C73H</div><div><a href="#0CA4H" class="memory-link">JR 0CA4H</a></div><div>JUMP to 0CA4H to check to see if H, combined with L, equals A (and if so, JUMP to 0C4FH) and if not, increase and negate DE.</div></div>
										</div>
									</div>

								<br><h2 class="assembly-section-title" id="0C75H">0C75H - This 
subroutine is called from 0C60H and processes the sign. If DE is 
negative, then DE = -DE and CARRY will be set. On entry the REGULAR 
REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<p>If we are here, then a negative number was passed. Will give some examples.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0C75H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
										<div class="assembly-row-combined"><div>0C76H</div><div>ADD A,D</div><div>LET Register A = Register A + the SIGN of NUMBER 1 (Stored in D).</div></div>
										<div class="assembly-row-combined"><div>0C77H</div><div>RET P</div><div>If the number is POSITIVE (S FLAG has been RESET), RETurn to the caller.</div></div>
										<div class="assembly-row-combined" id="0C78H"><div>0C78H</div><div>LD A,E</div><div>Copy
 the contents of the LSB of the number held in Register Pair DE into 
Register A. (If -3 was given then DE is 0003, so A is now 03H)</div></div>
										<div class="assembly-row-combined"><div>0C79H</div><div>NEG</div><div>Negate the contents of Register A (which is the same as -A). (If -3 was given then DE is 0003, so A is now FDH)</div></div>
										<div class="assembly-row-combined"><div>0C7BH</div><div>LD E,A</div><div>Put the negated value of Register E into Register E. (If -3 was given then DE is 00FD)</div></div>
										<div class="assembly-row-combined"><div>0C7CH</div><div>LD A,D</div><div>Copy the the MSB of the number held in Register Pair DE into Register A. (If -3 was given then DE is 00FD, so A is now 00H)</div></div>
										<div class="assembly-row-combined"><div>0C7DH</div><div>CPL</div><div>Reverse
 each bit in Register A (which is the same as NOT). (If -3 was given 
then DE is 00FD, so A is now FFH and the CARRY FLAG is SET). Note that 
CPL does not affect the CARRY FLAG.</div></div>
										<div class="assembly-row-combined"><div>0C7EH</div><div>CCF</div><div>Invert the state of the CARRY FLAG. (If -3 was given then DE is 00FD, so A is now FFH and the CARRY FLAG is RESET).</div></div>
										<div class="assembly-row-combined"><div>0C7FH</div><div>ADC 00H</div><div>LET
 Register A = Register A + 00H to incorporate the CARRY FLAG into 
Register A. (If -3 was given then DE is 00FD and A was now FFH and the 
CARRY FLAG didn't change).</div></div>
										<div class="assembly-row-combined"><div>0C81H</div><div>LD D,A</div><div>Copy
 the modified NOT'd Register D back into Register D. (If -3 was given 
then DE is FFFD, so A is FFH and the CARRY FLAG is still RESET).</div></div>
										<div class="assembly-row-combined"><div>0C82H</div><div>SCF</div><div>Turn the CARRY FLAG on. (If -3 was given then DE is FFFD, so A is FFH and the CARRY FLAG is now SET).</div></div>
										<div class="assembly-row-combined"><div>0C83H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0C84H">0C84H - Part of the math routines. This is MULTIPLY. If 0C84H is called, it first moves the ONES to TENS, TENS TO HUNDREDS, etc.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0C84H</div><div><a href="#0C56H" class="memory-link">CALL 0C56H</a></div><div>GOSUB to 0C56H to multiply the number at the top of the FLOATING POINT STACK by 10.</div></div>
										<div class="assembly-row-combined" id="0C87H"><div>0C87H</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB
 to 0E1EH which puts the various parts of two floating point numbers 
into the registers. On exit, the original DE is in the stack, the Z FLAG
 is set if the exponent NUMBER 2 is 80H, NUMBER 1 is stored in B', D', 
and E', with the sign in D and the exponent in E, and NUMBER 2 is stored
 in C', H', and L', with the sign in H and the exponent in L. A returns 
with 80H.</div></div>
										<div class="assembly-row-combined"><div>0C8AH</div><div><a href="#0CCAH" class="memory-link">JR Z,0CCAH</a></div><div>If
 the Z FLAG (Zero) has been set (meaning that the exponent of the NUMBER
 2 is 80H), JUMP to 0CCAH which will then JUMP to 0D20H to will move the
 Floating Point Stack tracker index IX back to the prior Floating Point 
Stack entry (i.e., back 5 bytes), RESTORE DE from the Stack, and RETurn 
out of this routine (since this is a JUMP).</div></div>
										<div class="assembly-row-combined"><div>0C8CH</div><div>CP E</div><div>If
 we are here, then the exponent of NUMBER 2 was not 80H, so we now 
compare the exponent of NUMBER 1 (held in E) against 80H (held in A). If
 they are equal ...</div></div>
										<div class="assembly-row-combined"><div>0C8DH</div><div><a href="#0D0DH" class="memory-link">JP Z,0D0DH</a></div><div>...
 JUMP to 0D0DH to set Register L to 80H, store the H (Sign), L 
(Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
										<div class="assembly-row-combined"><div>0C90H</div><div><a href="#0D27H" class="memory-link">CALL 0D27H</a></div><div>If they were NOT equal, GOSUB to 0D27H to multiply the numbers in the Floating Point Stack.</div></div>
										<div class="assembly-row-combined"><div>0C93H</div><div><a href="#0CA4H" class="memory-link">JR 0CA4H</a></div><div>JUMP
 to 0CA4H to JUMP to 0D0FH leave Register L unchanged but otherwise 
store the H (Sign), L (Exponent), C' (MSB), H' (NLSB), L' (LSB) 
registers into the Floating Point Stack at one set earlier than the 
location pointed to by Special Index Register IX, adust IX to point to 
that entry (i.e., -5 bytes from where it started)and POP DE. Since this 
is a JUMP, the RETurn in that routine will actually RETurn to this 
routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0C95H">0C95H - Part 
of the math routines. This is FLOATING POINT DIVIDE. It first moves the 
ONES to TENS, TENS TO HUNDREDS, etc. and then divides the two numbers at
 the top of the FLOATING POINT STACK.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0C95H</div><div><a href="#0C56H" class="memory-link">CALL 0C56H</a></div><div>GOSUB to 0C56H to multiply the number at the top of the FLOATING POINT STACK by 10.</div></div>
										<div class="assembly-row-combined" id="0C98H"><div>0C98H</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB
 to 0E1EH which puts the various parts of two floating point numbers 
into the registers. On exit, the original DE is in the stack, the Z FLAG
 is set if the exponent NUMBER 2 is 80H, NUMBER 1 is stored in B', D', 
and E', with the sign in D and the exponent in E, and NUMBER 2 is stored
 in C', H', and L', with the sign in H and the exponent in L. A returns 
with 80H.</div></div>
										<div class="assembly-row-combined"><div>0C9BH</div><div><a href="#0CCAH" class="memory-link">JR Z,0CCAH</a></div><div>If
 the Z FLAG (Zero) has been set (meaning that the exponent of the NUMBER
 2 is 80H), JUMP to 0CCAH which will then JUMP to 0D20H to will move the
 Floating Point Stack tracker index IX back to the prior Floating Point 
Stack entry (i.e., back 5 bytes), RESTORE DE from the Stack, and RETurn 
out of this routine (since this is a JUMP).</div></div>
										<div class="assembly-row-combined"><div>0C9DH</div><div>CP E</div><div>If
 we are here, then the exponent of NUMBER 2 was not 80H, so we now 
compare the exponent of NUMBER 1 (held in E) against 80H (held in A). If
 they are equal ...</div></div>
										<div class="assembly-row-combined"><div>0C9EH</div><div><a href="#01A3H" class="memory-link">JP Z,01A3H</a></div><div>If
 the Z FLAG (Zero) has been set, meaning the exponent to NUMBER 1 was 
80H, we then have a problem, so JUMP to 01A3H to display the "HOW?" 
error.</div></div>
										<div class="assembly-row-combined"><div>0CA1H</div><div><a href="#0D5CH" class="memory-link">CALL 0D5CH</a></div><div>GOSUB to 0D5CH to handle the floating point division.</div></div>
										<div class="assembly-row-combined" id="0CA4H"><div>0CA4H</div><div><a href="#0D0FH" class="memory-link">JR 0D0FH</a></div><div>JUMP
 to 0D0FH leave Register L unchanged but otherwise store the H (Sign), L
 (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CA6H">0CA6H - Part 
of the FLOATING POINT DIVIDE routine. This routine pushes HL to the 
FLOATING POINT STACK, converts the top two numbers in the FLOATING POINT
 STACK to to B/D/B'/D'/E' and C/L/C'/H'/L', and then replaces BC with -5
 before JUMPing to 0CB7H.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CA6H</div><div><a href="#0BC3H" class="memory-link">CALL 0BC3H</a></div><div>GOSUB to 0BC3H to push the variable held in Register Pair HL into the FLOATING POINT STACK.</div></div>
										<div class="assembly-row-combined"><div>0CA9H</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB
 to 0E1EH to put the various parts of two floating point numbers into 
the registers. On exit, the original DE is in the stack, the Z FLAG is 
set if the exponent NUMBER 2 is 80H, NUMBER 1 is stored in B', D', and 
E', with the sign in D and the exponent in E, and NUMBER 2 is stored in 
C', H', and L', with the sign in H and the exponent in L.</div></div>
										<div class="assembly-row-combined"><div>0CACH</div><div>LD BC,FFFBH</div><div>Let Register Pair BC equal FFFBH, which is -5.</div></div>
										<div class="assembly-row-combined"><div>0CAFH</div><div><a href="#0CB7H" class="memory-link">JR 0CB7H</a></div><div>Skip
 the next 2 instructions (which would also affect the FLOATING POINT 
STACK and BC) and JUMP to 0CB7H to move the FLOATING POINT STACK POINTER
 by BC and continue processing.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CB1H">0CB1H - Math 
Routine. Fetch the top 2 entries from the Floating Point Stack into 
their register sets, remove them from the Floating Point Stack, and do a
 bunch of comparisons between the two.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CB1H</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB to 0E1EH</div></div>
										<div class="assembly-row-combined"><div>0CB4H</div><div>LD BC,FFF6H</div><div>Let
 Register Pair BC equal FFF6H, which will be -10 so as to back up IX two
 Floating Point Stack entries, thus treating those 2 numbers as if they 
were POP'd off of the Floating Point Stack.</div></div>
										<div class="assembly-row-combined" id="0CB7H"><div>0CB7H</div><div>ADD IX,BC</div><div>LET Register Pair IX = Register Pair IX + Register BC. This will move IX back 10 bytes to a different FP set of numbers.</div></div>
										<div class="assembly-row-combined"><div>0CB9H</div><div>CP L</div><div>Compare the value held in Register A against the EXPONENT of NUMBER 2 (held in Register L). Results:<ul><li>If Register A equals the value held in Register L, the Z FLAG is set.</li><li>If A &lt; L, the CARRY FLAG will be set.</li><li>if A &gt;= L, the NO CARRY FLAG will be set.</li></ul></div></div>
										<div class="assembly-row-combined"><div>0CBAH</div><div><a href="#0D94H" class="memory-link">CALL 0D94H</a></div><div>GOSUB
 to 0D94H which will JUMP to 0DA0 if they were the same, compare A to 
the EXPONENT of NUMBER 1 (if different) and if THOSE are the same JUMP 
to 0DA8H, otherwise XOR the sign of NUMBER 2 against the sign of NUMBER 
1, and JUMP to 0DB3 if THOSE are the same, and JUMP to 0DA7H otherwise. 
0DA7H will either RETurn if the Z Flag is set OR test the sign and, if 
positive, rotate A right, turn on the carry, rotate A left, and RETurn.</div></div>
										<div class="assembly-row-combined"><div>0CBDH</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0CBEH</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CBFH">0CBFH - Math Routine. Floating Point Subtraction.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CBFH</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB to 0E1EH</div></div>
										<div class="assembly-row-combined"><div>0CC2H</div><div><a href="#0CC9H" class="memory-link">JR NZ,0CC9H</a></div><div>If the NZ FLAG (Not Zero) has been set, then there are actually TWO numbers to work with, so JUMP to 0CC9H.</div></div>
										<div class="assembly-row-combined"><div>0CC4H</div><div><a href="#0D03H" class="memory-link">CALL 0D03H</a></div><div>GOSUB
 to 0D03H to set the FLOATING POINT STACK registers for NUMBER 2 = 
NUMBER 1. Returns with both sets equal to NUMBER 1 and DE at the top of 
the stack.</div></div>
										<div class="assembly-row-combined"><div>0CC7H</div><div><a href="#0CF9H" class="memory-link">JR 0CF9H</a></div><div>JUMP
 to 0CF9H to flip the sign of the Floating Point number just below the 
Floating Point Stack pointer, POP DE, and RETurn to the caller routine 
(since this is a JUMP, not a CALL).</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CC9H">0CC9H - Math 
Routine. Continuation of the Floating Point Subtraction routine. Jumped 
here from 0CC2H if there are 2 numbers to work with.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CC9H</div><div>CP E</div><div>Compare the value held in Register A against the Exponent (the value held in Register E). If they match, the Z FLAG will be set.</div></div>
										<div class="assembly-row-combined" id="0CCAH"><div>0CCAH</div><div><a href="#0D20H" class="memory-link">JR Z,0D20H</a></div><div>If
 the Z FLAG (Zero) has been set, JUMP to 0D20H which will move the 
Floating Point Stack tracker index IX back to the prior Floating Point 
Stack entry (i.e., back 5 bytes), RESTORE DE from the Stack, and RETurn 
out of this routine (since this is a JUMP).</div></div>
										<div class="assembly-row-combined"><div>0CCCH</div><div>XOR D</div><div>eXclusive OR the SIGN byte (held in Register D) against Register A. The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0CCDH</div><div>LD D,A</div><div>Put the results of that XOR back into Register D.</div></div>
										<div class="assembly-row-combined"><div>0CCEH</div><div><a href="#0CDBH" class="memory-link">JR 0CDBH</a></div><div>JUMP BACK to 0CDBH to POP DE, and RETurn to the caller routine (since this is a JUMP, not a CALL).</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CD0H">0CD0H - Math Routine. Entry point to add the value held in Register Pair HL.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CD0H</div><div><a href="#0BC3H" class="memory-link">CALL 0BC3H</a></div><div>GOSUB to 0BC3H to push the variable held in Register Pair HL into the FLOATING POINT STACK.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CD3H">0CD3H - Math Routine - Floating Point Addition. On entry the ALTERNATE REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CD3H</div><div><a href="#0E1EH" class="memory-link">CALL 0E1EH</a></div><div>GOSUB
 to 0E1EH which puts the various parts of two floating point numbers 
into the registers. On exit, the original DE is in the stack, the Z FLAG
 is set if the exponent NUMBER 2 is 80H, NUMBER 1 is stored in B', D', 
and E', with the sign in D and the exponent in E, and NUMBER 2 is stored
 in C', H', and L', with the sign in H and the exponent in L.</div></div>
										<div class="assembly-row-combined"><div>0CD6H</div><div><a href="#0D04H" class="memory-link">JR Z,0D04H</a></div><div>If
 the Z FLAG (Zero) has been set, then there was no second number, JUMP 
to 0D04H to set the second number to match the first number.</div></div>
										<div class="assembly-row-combined"><div>0CD8H</div><div>CP E</div><div>Compare
 the EXPONENT (held in Register E) against 80H (which is held in A upon 
exit from 0E1EH). If Register A equals the value held in Register E, the
 Z FLAG is set.</div></div>
										<div class="assembly-row-combined"><div>0CD9H</div><div><a href="#0D20H" class="memory-link">JR Z,0D20H</a></div><div>If
 the Z FLAG (Zero) has been set, then the number was ZERO, so just JUMP 
to 0D20H which will move the Floating Point Stack tracker index IX back 
to the prior Floating Point Stack entry (i.e., back 5 bytes), RESTORE DE
 from the Stack, and RETurn out of this routine (since this is a JUMP).</div></div>
										<div class="assembly-row-combined"><div>0CDBH</div><div><a href="#0DB3H" class="memory-link">CALL 0DB3H</a></div><div>Since
 its not zero, we need to process. First, GOSUB to 0DB3H to compare the 
exponents of two numbers and, if equal, the mantissas.</div></div>
										<div class="assembly-row-combined"><div>0CDEH</div><div><a href="#0CEEH" class="memory-link">JR Z,0CEEH</a></div><div>If
 the Z FLAG (Zero) has been set, meaning that they are the same, JUMP to
 0CEEH to check the signs of the two numbers, and if they are the same, 
add the two exponents together and put the numbers back into the 
FLOATING POINT STACK and exit the routine.</div></div>
										<div class="assembly-row-combined"><div>0CE0H</div><div><a href="#0CE9H" class="memory-link">JR NC,0CE9H</a></div><div>If
 the NC FLAG (No Carry) has been set, JUMP to 0CE9H to CALL 0DCBH to do 
floating point addition, returning with NC if the precision will be lost
 and putting the register back in the FLOATING POINT STACK.</div></div>
										<div class="assembly-row-combined"><div>0CE2H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0CE3H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0CE4H</div><div>EX DE,HL</div><div>EXchange the value stored in Register Pair HL with the value stored in Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0CE5H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0CE6H</div><div>LD C,B</div><div>Copy the contents of Register B into Register C.</div></div>
										<div class="assembly-row-combined"><div>0CE7H</div><div>LD B,A</div><div>Copy the contents of Register A into Register B.</div></div>
										<div class="assembly-row-combined"><div>0CE8H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined" id="0CE9H"><div>0CE9H</div><div><a href="#0DCBH" class="memory-link">CALL 0DCBH</a></div><div>GOSUB to 0DCBH to do floating point addition, returning with NC if the precision will be lost.</div></div>
										<div class="assembly-row-combined"><div>0CECH</div><div><a href="#0D0FH" class="memory-link">JR 0D0FH</a></div><div>JUMP
 to 0D0FH leave Register L unchanged but otherwise store the H (Sign), L
 (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CEEH">0CEEH - Part 
of the Floating Point Addition routine; will check the signs of the two 
numbers, and if they are the same, add the two exponents together and 
put the numbers back into the FLOATING POINT STACK. On entry, the 
REGULAR REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CEEH</div><div>LD A,H</div><div>Copy the SIGN of NUMBER 2 (Stored in H) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0CEFH</div><div>XOR D</div><div>eXclusive
 OR the SIGN of NUMBER 1 (Stored in D) against SIGN of NUMBER 1 (from 
Register H). The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0CF0H</div><div><a href="#0D0DH" class="memory-link">JR NZ,0D0DH</a></div><div>If
 the SIGNs of NUMBER 1 and NUMBER 2 are not the same (i.e., the NZ FLAG 
has been set), JUMP to 0D0DH to set Register L to 80H, store the H 
(Sign), L (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the 
Floating Point Stack at one set earlier than the location pointed to by 
Special Index Register IX, adust IX to point to that entry (i.e., -5 
bytes from where it started)and POP DE. Since this is a JUMP, the RETurn
 in that routine will actually RETurn to this routine's caller.</div></div>
										<div class="assembly-row-combined"><div>0CF2H</div><div>LD E,01H</div><div>If the signs ARE the same, then set Register E (which is the EXPONENT) equal to 01H.</div></div>
										<div class="assembly-row-combined"><div>0CF4H</div><div><a href="#0DF3H" class="memory-link">CALL 0DF3H</a></div><div>GOSUB to 0DF3H which will add the two sets of EXPONENTS together (i.e., L = L + E with Carry) and a test for overflow.</div></div>
										<div class="assembly-row-combined"><div>0CF7H</div><div><a href="#0D0FH" class="memory-link">JR 0D0FH</a></div><div>JUMP
 to 0D0FH leave Register L unchanged but otherwise store the H (Sign), L
 (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0CF9H">0CF9H - Math 
Routine. Flip the sign of the Floating Point number just below the 
Floating Point Stack pointer, POP DE, and RETurn.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0CF9H</div><div>LD A,(IX+FFH)</div><div>IX+FFH
 is the same as IX-01H, which is the SIGN of NUMBER 1 in the FLOATING 
POINT STACK. Fetch the value held in the memory location pointed to by 
Special Index Register Pair (IX - 1) and store it into Register A.</div></div>
										<div class="assembly-row-combined"><div>0CFCH</div><div>XOR 80H</div><div>eXclusive
 OR 80H (Binary:1000 0000) against Register A to flip Bit 7 (the SIGN 
bit). If it was on then its now off and vice versa. The results are 
stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0CFEH</div><div>LD (IX+FFH),A</div><div>IX+FFH
 is the same as IX-01H, which is the SIGN of NUMBER 1 in the FLOATING 
POINT STACK. Put the modified byte back into the Floating Point Stack.</div></div>
										<div class="assembly-row-combined"><div>0D01H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0D02H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D03H">0D03H - Math 
Routine. This routine sets the FLOATING POINT STACK registers for NUMBER
 2 = the FLOATING POINT STACK registers for NUMBER 1 and with DE at the 
top of the stack. On entry the REGULAR REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<p>As a reminder, NUMBER 1 is stored in B' (MSB), D' (NMSB), and
 E' (LSB), with the SIGN in D and the EXPONENT in E,. NUMBER 2 is stored
 in C' (MSB), H' (NMSB), and L' (LSB), with the SIGN in H and the 
EXPONENT in L.</p>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D03H</div><div>PUSH DE</div><div>Save the SIGN and EXPONENT of NUMBER 1 (held in Register Pair DE) to the top of the stack.</div></div>
										<div class="assembly-row-combined" id="0D04H"><div>0D04H</div><div>LD H,D</div><div>Copy the SIGN of NUMBER 1 (Stored in D) into Register H (i.e., the SIGN of NUMBER 2).</div></div>
										<div class="assembly-row-combined"><div>0D05H</div><div>LD L,E</div><div>Copy the EXPONENT of NUMBER 1 (Stored in E) into Register L (i.e., the EXPONENT of NUMBER 2)</div></div>
										<div class="assembly-row-combined"><div>0D06H</div><div>EXX</div><div>Set the ALTERNATE REGISTER SET to ACTIVE and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D07H</div><div>LD L,E</div><div>Copy the LSB of NUMBER 1 (stored in E') into Register L' (i.e., the LSB of NUMBER 2).</div></div>
										<div class="assembly-row-combined"><div>0D08H</div><div>LD H,D</div><div>Copy the NMSB of NUMBER 1 (stored in D') into Register H (i.e., the NMSB of NUMBER 2).</div></div>
										<div class="assembly-row-combined"><div>0D09H</div><div>LD C,B</div><div>Copy the MSB of NUMBER 1 (stored in B') into Register C (i.e., the MSB of NUMBER 2).</div></div>
										<div class="assembly-row-combined"><div>0D0AH</div><div>EXX</div><div>Set the REGULAR REGISTER SET to ACTIVE and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D0BH</div><div><a href="#0D0FH" class="memory-link">JR 0D0FH</a></div><div>JUMP
 to 0D0FH leave Register L unchanged but otherwise store the H (Sign), L
 (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D0DH">0D0DH - Set L 
to 80H and store the H (Sign), L (Exponent), C' (MSB), H' (NLSB), L' 
(LSB) registers into the Floating Point Stack at one set earlier than 
the location pointed to by Special Index Register IX, adust IX to point 
to that entry (i.e., -5 bytes from where it started), POP DE, and 
RETurn.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D0DH</div><div>LD L,80H</div><div>Let Register L equal 80H (Decimal: 128) to indicate a negative exponent.</div></div>
										<div class="assembly-row-combined" id="0D0FH"><div>0D0FH</div><div>LD (IX-06H),H</div><div>This
 is a common jump point, with the purpose to store the registers into 
the Floating Point Stack. First, store the SIGN BIT (held in Register H)
 into the memory location pointed to by Special Index Register Pair 
IX-06H.</div></div>
										<div class="assembly-row-combined"><div>0D12H</div><div>LD (IX-07H),L</div><div>Store the EXPONENT (held in Register L) into the memory location pointed to by Special Index Register Pair IX-07H.</div></div>
										<div class="assembly-row-combined"><div>0D15H</div><div>EXX</div><div>Exchange the REGULAR registers OUT and the ALTERNATE registers IN.. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D16H</div><div>LD (IX-10H),L</div><div>Store the LSB of the MANTISSA (held in Register L') into the memory location pointed to by Special Index Register Pair IX-10H.</div></div>
										<div class="assembly-row-combined"><div>0D19H</div><div>LD (IX-09H),H</div><div>Store the NMSB of the MANTISSA (held in Register H') into the memory location pointed to by Special Index Register Pair IX-09H.</div></div>
										<div class="assembly-row-combined"><div>0D1CH</div><div>LD (IX-08H),C</div><div>Store the MSB of the MANTISSA (held in Register C') into the memory location pointed to by Special Index Register Pair IX-08H.</div></div>
										<div class="assembly-row-combined"><div>0D1FH</div><div>EXX</div><div>Exchange the ALTERNATE registers OUT and the REGULAR registers IN.. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined" id="0D20H"><div>0D20H</div><div>LD BC,FFFBH</div><div>This
 is a common jump point for any routine that wants to POP the floating 
point stack as it backs up IX 5 bytes and restores DE. First, let 
Register Pair BC equal FFFBH, which is -5.</div></div>
										<div class="assembly-row-combined"><div>0D23H</div><div>ADD IX,BC</div><div>Reset Special Index Register IX back 5 bytes (the amount of bytes for a single floating point entry).</div></div>
										<div class="assembly-row-combined"><div>0D25H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0D26H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D27H">0D27H - 
Multiply Floating Point Numbers - Number 1 is D (Sign), E (Exponent), 
B', D:' E', and Number 2 is H (Sign), L (Exponent), C' (MSB), H' (NLSB),
 L' (LSB).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D27H</div><div>LD A,H</div><div>Copy the SIGN of NUMBER 2 (Register H) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0D28H</div><div>XOR D</div><div>eXclusive OR the SIGN of NUMBER 1 (Register D) against SIGN of NUMBER 2 (Register A). The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0D29H</div><div>LD H,A</div><div>Since
 this will be the sign of the ultimate product of the two numbers, let's
 keep that! Copy the results of that XOR into into Register H (the SIGN 
of NUMBER 2).</div></div>
										<div class="assembly-row-combined"><div>0D2AH</div><div>DEC E</div><div>DECrement the  EXPONENT of NUMBER 1 (Register E) by 1.</div></div>
										<div class="assembly-row-combined"><div>0D2BH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL (SIGN and EXPONENT of NUMBER 2) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D2CH</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D2DH</div><div>LD B,18H</div><div>Let Register B equal 18H (Decimal: 24) to represent the maximum number of bits we can shift and maintain accuracy.</div></div>
										<div class="assembly-row-combined"><div>0D2FH</div><div>LD L,(IX+F6H)</div><div>Fetch
 the value held in the memory location pointed to by Special Index 
Register Pair (IX-10), which is the LSB of NUMBER 2, and store it into 
Register L.</div></div>
										<div class="assembly-row-combined"><div>0D32H</div><div>LD H,(IX+F7H)</div><div>Fetch
 the value held in the memory location pointed to by Special Index 
Register Pair (IX-09), which is the NMSB of NUMBER 2, and store it into 
Register H.</div></div>
										<div class="assembly-row-combined"><div>0D35H</div><div>LD C,(IX+F8H)</div><div>Fetch
 the value held in the memory location pointed to by Special Index 
Register Pair (IX-08), which is the MSB of NUMBER 2, and store it into 
Register C.</div></div>
										<div class="assembly-row-combined"><div>0D38H</div><div>EXX</div><div>EXchanges REGULAR registers out and the ALTERNATE registers in. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D39H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
										<div class="assembly-row-combined"><div>0D3AH</div><div>LD L,A</div><div>Copy the contents of Register A into Register L'.</div></div>
										<div class="assembly-row-combined"><div>0D3BH</div><div>LD H,A</div><div>Copy the contents of Register A into Register H'.</div></div>
										<div class="assembly-row-combined"><div>0D3CH</div><div>LD C,A</div><div>Copy the contents of Register A into Register C'.</div></div>
										<div class="assembly-row-combined" id="0D3DH"><div>0D3DH</div><div>EXX</div><div>EXchanges ALTERNATE registers out and the REGULAR registers in. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D3EH</div><div>SRL C</div><div>Shift the bits of Register C right, with bit 0 put into the carry flag.</div></div>
										<div class="assembly-row-combined"><div>0D40H</div><div>RR H</div><div>Rotate
 the bits of Register H right one bit position, with bit 0 copied to the
 CARRY FLAG and the previous CARRY FLAG copied to bit 7.</div></div>
										<div class="assembly-row-combined"><div>0D42H</div><div>RR L</div><div>Rotate
 the bits of Register L right one bit position, with bit 0 copied to the
 CARRY FLAG and the previous CARRY FLAG copied to bit 7.</div></div>
										<div class="assembly-row-combined"><div>0D44H</div><div>EXX</div><div>EXchanges REGULAR registers out and the ALTERNATE registers in. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D45H</div><div><a href="#0D4BH" class="memory-link">JR NC,0D4BH</a></div><div>If the NC FLAG (No Carry) has been set, then there is no need to do addition JUMP to 0D4BH.</div></div>
										<p class="debug-note">The next instructions are C':H':L' = C':H':L' + A:D:E</p>
										<div class="assembly-row-combined"><div>0D47H</div><div>ADD HL,DE</div><div>LET Register Pair HL = Register Pair HL + Register DE.</div></div>
										<div class="assembly-row-combined"><div>0D48H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0D49H</div><div>ADC A,B</div><div>LET Register A = Register A + Register B.</div></div>
										<div class="assembly-row-combined"><div>0D4AH</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
										<div class="assembly-row-combined"><div>0D4BH</div><div>EXX</div><div>EXchanges ALTERNATE registers out and the REGULAR registers in. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D4CH</div><div><a href="#0D53H" class="memory-link">DJNZ 0D53H</a></div><div>Jump
 to 0D53H, reducing Register B each time, and continue to LOOP until 
Register B has been reduced to ZERO, in which case, continue with the 
next instruction.</div></div>
										<p class="debug-note">We have finished, so prepare to exit.</p>
										<div class="assembly-row-combined"><div>0D4EH</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0D4FH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0D50H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D51H</div><div><a href="#0D83H" class="memory-link">JR 0D83H</a></div><div>JUMP to 0D83H which will JUMP to 0DE9H.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D53H">0D53H - Part 
of the Multiply Floating Point Number Routine. This handles the SHIFTING
 of C, H, and L right one bit. On entry the REGULAR REGISTER SET is 
active, but on exit the ALTERNATE REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D53H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D54H</div><div>RR C</div><div>Rotate the MSB of NUMBER 2 (stored in C')</div></div>
										<div class="assembly-row-combined"><div>0D56H</div><div>RR H</div><div>Rotate the NMSB of NUMBER 2 (stored in H')</div></div>
										<div class="assembly-row-combined"><div>0D58H</div><div>RR L</div><div>Rotate the LSB of NUMBER 2 (stored in L')</div></div>
										<div class="assembly-row-combined"><div>0D5AH</div><div><a href="#0D3DH" class="memory-link">JR 0D3DH</a></div><div>JUMP BACK into the multiply routine at 0D3DH.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D5CH">0D5CH - 
Floating Point Number Division Routine. On entry the REGULAR registers 
are in effect, although DE and HL have been swapped with DE' and HL'. No
 real clue what is happening.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D5CH<br>0D5DH<br>0D5FH</div><div>LD A,E<br>NEG<br>LD E,A</div><div>Let E = -E (since Division is a bunch of subtractions). This turns the EXPONENT of NUMBER 1 negative.</div></div>
										<div class="assembly-row-combined"><div>0D60H<br>0D61H<br>0D62H</div><div>LD A,H<br>XOR D<br>LD H,A</div><div>Let H = H XOR D. H and D are the signs of the numbers being worked on.</div></div>
										<div class="assembly-row-combined"><div>0D63H</div><div>PUSH HL</div><div>Save the SIGN and EXPONENT of NUMBER 2 (held in Register Pair HL) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D64H</div><div>PUSH BC</div><div>Save the pointer to the memory location of the line being interpreted (held in Register Pair BC) to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D65H</div><div>LD B,19H</div><div>Let Register B equal 19H (Decimal: 25) for a DJNZ loop 0D85H-0D78H of 25 iterations.</div></div>
										<div class="assembly-row-combined"><div>0D67H</div><div>EXX</div><div>Make the ALTERNATE REGISTER SET active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined" id="0D68H"><div>0D68H</div><div>SBC HL,DE</div><div>Subtracts the value stored in Register Pair DE and the carry flag from the value stored in Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0D6AH</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0D6BH</div><div>SBC A,B</div><div>Subtracts the value stored in Register Pair B and the carry flag from the value stored in Register Pair A.</div></div>
										<div class="assembly-row-combined"><div>0D6CH</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
										<div class="assembly-row-combined"><div>0D6DH</div><div><a href="#0D72H" class="memory-link">JR NC,0D72H</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0D72H.</div></div>
										<div class="assembly-row-combined"><div>0D6FH</div><div>ADD HL,DE</div><div>LET Register Pair HL = Register Pair HL + Register DE.</div></div>
										<div class="assembly-row-combined"><div>0D70H</div><div>ADC A,B</div><div>LET Register A = Register A + Register B.</div></div>
										<div class="assembly-row-combined"><div>0D71H</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
										<div class="assembly-row-combined" id="0D72H"><div>0D72H</div><div>EXX</div><div>Make the REGULAR REGISTER SET active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D73H</div><div>CCF</div><div>Invert the state of the CARRY FLAG.</div></div>
										<div class="assembly-row-combined"><div>0D74H</div><div>ADC HL,HL</div><div>LET Register Pair HL = Register Pair HL + Register HL.</div></div>
										<div class="assembly-row-combined"><div>0D76H</div><div>RL C</div><div>Rotate
 the bits of Register C left 1 position, with 7 going to CARRY and CARRY
 going to 0. This effectively multiplies Register C by 2.</div></div>
										<div class="assembly-row-combined"><div>0D78H</div><div><a href="#0D85H" class="memory-link">DJNZ 0D85H</a></div><div>LOOP
 back to 0D85H, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
										<div class="assembly-row-combined"><div>0D7AH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D7BH</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0D7CH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D7DH</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0D7EH</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0D7FH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D80H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
										<div class="assembly-row-combined"><div>0D81H</div><div>POP HL</div><div>Put the value held at the top of the STACK into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0D82H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D83H</div><div><a href="#0DE9H" class="memory-link">JR 0DE9H</a></div><div>JUMP to 0DE9H.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D85H">0D85H - Part of the Floating Point Number Division Routine. On entry the REGULAR registers are in effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D85H</div><div>EXX</div><div>Make the ALTERNATE REGISTER SET active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0D86H</div><div>ADD HL,HL</div><div>Double the NMSB + LSB of NUMBER 2.</div></div>
										<div class="assembly-row-combined"><div>0D87H</div><div>RL C</div><div>Rotate
 the bits of the MSB of NUMBER 2 (Register C') left 1 position, with 7 
going to CARRY and CARRY going to 0. This effectively doubles MSB of 
NUMBER 2.</div></div>
										<div class="assembly-row-combined"><div>0D89H</div><div><a href="#0D68H" class="memory-link">JR NC,0D68H</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0D68H in the prior routine to do some subtraction.</div></div>
										<div class="assembly-row-combined"><div>0D8BH</div><div>CCF</div><div>Reset the CARRY FLAG in preparation for the next intructions.</div></div>
										<div class="assembly-row-combined"><div>0D8CH</div><div>SBC HL,DE</div><div>Subtracts
 the NMSB and LSB of NUMBER 2 (Register Pair DE') and the carry flag 
from the NMSB and LSB of NUMBER 1 (Register Pair HL').</div></div>
										<div class="assembly-row-combined"><div>0D8EH</div><div>LD A,C</div><div>Copy the MSB of NUMBER 2 (Register C') into Register A.</div></div>
										<div class="assembly-row-combined"><div>0D8FH</div><div>SBC A,B</div><div>Subtract the MSB of NUMBER 1 (Register B') and the carry flag from the MSB of NUMBER 2 (Register A/C').</div></div>
										<div class="assembly-row-combined"><div>0D90H</div><div>LD C,A</div><div>Copy MSB of NUMBER 1 - MSB of NUMBER 2 into Register C'.</div></div>
										<div class="assembly-row-combined"><div>0D91H</div><div>OR A</div><div>Set FLAGS based on the contents of Register A (and, in all events, clear the CARRY FLAG).</div></div>
										<div class="assembly-row-combined"><div>0D92H</div><div><a href="#0D72H" class="memory-link">JR 0D72H</a></div><div>JUMP to 0D72H in the prior routine.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0D94H">0D94H - Part 
of the Floating Point Division routine. On entry the REGULAR registers 
are in effect. If the EXPONENTS were the same between the 2 numbers (on 
entry) the Z FLAG will be set.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0D94H</div><div><a href="#0DA0H" class="memory-link">JR Z,0DA0H</a></div><div>If
 the Z FLAG (Zero) has been set, JUMP to 0DA0H which will compare A 
against the exponent, returning with Z FLAG if they match. If not, 
continuing to 0DAAH with NC if Register A &lt; Register E, C if Register
 A &gt;= Register E, Z if the sign bit is 0, and NZ if the sign bit is 
1.</div></div>
										<div class="assembly-row-combined"><div>0D96H</div><div>CP E</div><div>Compare the value held in Register A against the EXPONENT of NUMBER 1 (held in Register E). If they are the same ...</div></div>
										<div class="assembly-row-combined"><div>0D97H</div><div><a href="#0DA8H" class="memory-link">JR Z,0DA8H</a></div><div>... JUMP to 0DA8H.</div></div>
										<div class="assembly-row-combined"><div>0D99H</div><div>LD A,H</div><div>Copy the SIGN of one number into Register A.</div></div>
										<div class="assembly-row-combined"><div>0D9AH</div><div>XOR D</div><div>eXclusive OR against the SIGN of the other. The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0D9BH</div><div><a href="#0DB3H">CALL Z,0DB3H</a></div><div>If the SIGNs match, GOSUB to 0DB3H to compare the exponents of two numbers and, if equal, the mantissas.</div></div>
										<div class="assembly-row-combined"><div>0D9EH</div><div><a href="#0DA7H" class="memory-link">JR 0DA7H</a></div><div>JUMP
 to 0DA7H to either RETurn if the Z Flag is set OR test the sign and, if
 positive, rotate A right, turn on the carry, rotate A left, and RETurn.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DA0H">0DA0H - Part of the Floating Point Division routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DA0H</div><div>CP E</div><div>Compare the value held in Register A against the value held in Register E (which holds an exponent). Results:<ul><li>If Register A equals the value held in Register E, the Z FLAG is set.</li><li>If A &lt; Register E, the CARRY FLAG will be set.</li><li>if A &gt;= Register E, the NO CARRY FLAG will be set.</li></ul></div></div>
										<div class="assembly-row-combined"><div>0DA1H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller.</div></div>
										<div class="assembly-row-combined"><div>0DA2H</div><div>SCF</div><div>Set the CARRY FLAG to ON</div></div>
										<div class="assembly-row-combined"><div>0DA3H</div><div>BIT 7,D</div><div>Test
 Bit Number 7 of Register D (which holds the sign). Z FLAG will be set 
if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
										<div class="assembly-row-combined"><div>0DA5H</div><div><a href="#0DAAH" class="memory-link">JR 0DAAH</a></div><div>JUMP down two instructions to 0DAAH.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DA7H">0DA7H - Part 
of the Floating Point Division routine. RETurn if the Z Flag is set OR 
test the sign and, if positive, rotate A right, turn on the carry, 
rotate A left, and RETurn.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DA7H</div><div>RET Z</div><div>If the Z FLAG (Zero) has been set, RETurn to the caller. Otherwise, pass through ...</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DA8H">0DA8H - Part 
of the Floating Point Division routine. Will test the sign and, if 
positive, rotate A right, turn on the carry, rotate A left, and RETurn. 
On entry the REGULAR registers are in effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DA8H</div><div>BIT 7,H</div><div>Test
 the SIGN of NUMBER 2 (Bit Number 7 of Register H). Z FLAG will be set 
if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
										<div class="assembly-row-combined" id="0DAAH"><div>0DAAH</div><div><a href="#0DB1H" class="memory-link">JR NZ,0DB1H</a></div><div>Whether
 via pass through or jump, the Z/NZ flag is holding the sign bit. If the
 NZ FLAG (Not Zero) has been set, JUMP to 0DB1H to flip the state of the
 CARRY FLAG and RETurn.</div></div>
										<div class="assembly-row-combined"><div>0DACH</div><div>RRA</div><div>If
 the Z FLAG was 0, meaning the SIGN of NUMBER 2 (Register H) was 
positive, then rotate the contents of A are rotated right one bit 
position, with the the contents of bit 0 being copied to BOTH the carry 
flag AND bit 7.</div></div>
										<div class="assembly-row-combined"><div>0DADH</div><div>SCF</div><div>Set the CARRY FLAG to ON</div></div>
										<div class="assembly-row-combined"><div>0DAEH</div><div>RL A</div><div>Rotate
 Register A left one bit position, with the contents of bit 7 being 
copied to the carry flag and the previous contents of the CARRY FLAG 
(which is now ON) copied to bit 0.</div></div>
										<div class="assembly-row-combined"><div>0DB0H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DB1H">0DB1H - Part of the Math Routine. Flip the state of the CARRY FLAG and RETurn.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DB1H</div><div>CCF</div><div>Invert the state of the CARRY FLAG.</div></div>
										<div class="assembly-row-combined"><div>0DB2H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DB3H">0DB3H - Part 
of the Floating Point math routines. This will compare the exponents of 
two numbers and, if equal, the mantissas. On entry the REGULAR registers
 are in effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DB3H</div><div>LD A,L</div><div>Copy the EXPONENT of NUMBER 2 (Register L) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DB4H</div><div>SUB E</div><div>LET Register A = Register A - the EXPONENT of NUMBER 1 (Register E).</div></div>
										<div class="assembly-row-combined"><div>0DB5H</div><div><a href="#0DBEH" class="memory-link">JR Z,0DBEH</a></div><div>If
 the EXPONENTs were the same (i..e, Register L = Register E), JUMP to 
0DBEH to compare the mantiassas (returning witH Z if equal, and NZ 
otherwise).</div></div>
										<div class="assembly-row-combined"><div>0DB7H</div><div><a href="#0DBCH" class="memory-link">JP PO,0DBCH</a></div><div>If the PARITY/OVERFLOW FLAG has been RESET, JUMP to 0DBCH to handle Floating Point Addition.</div></div>
										<div class="assembly-row-combined"><div>0DBAH</div><div>NEG</div><div>Negate the difference in the EXPONENTs (Register A) (which is the same as -A).</div></div>
										<div class="assembly-row-combined"><div>0DBCH</div><div>RLCA</div><div>Rotate
 the bits of Register left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and to bit 
0.</div></div>
										<div class="assembly-row-combined"><div>0DBDH</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DBEH">0DBEH - Part 
of the Floating Point math routines. This will compare the mantissas of 
the numbers returning with NZ set if they don't match and Z set if they 
do. On entry the REGULAR registers are in effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DBEH</div><div>EXX</div><div>Make the ALTERNATE register set active by EXchanging the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0DBFH</div><div>LD A,C</div><div>Copy the contents of Register C' (MSB of NUMBER 2) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DC0H</div><div>CP B</div><div>Compare
 the value held in Register A against the value held in Register B' (MSB
 of NUMBER 1). If they are NOT the same, the NZ FLAG will be set.</div></div>
										<div class="assembly-row-combined"><div>0DC1H</div><div><a href="#0DC9H" class="memory-link">JR NZ,0DC9H</a></div><div>If they are NOT the same, JUMP to 0DC9H to swap back the register sets and RETurn out of this routine with the NZ FLAG set.</div></div>
										<div class="assembly-row-combined"><div>0DC3H</div><div>LD A,H</div><div>Copy the contents of Register H' (NMSB of the NUMBER 2) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DC4H</div><div>CP D</div><div>Compare
 the value held in Register A against the value held in Register D' 
(NMSB of the NUMBER 1). If they are NOT the same, the NZ FLAG will be 
set.</div></div>
										<div class="assembly-row-combined"><div>0DC5H</div><div><a href="#0DC9H" class="memory-link">JR NZ,0DC9H</a></div><div>If they are NOT the same, JUMP to 0DC9H to swap back the register sets and RETurn out of this routine with the NZ FLAG set.</div></div>
										<div class="assembly-row-combined"><div>0DC7H</div><div>LD A,L</div><div>Copy the contents of Register L' (LSB of the NUMBER 2) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DC8H</div><div>CP E</div><div>Compare the value held in Register A against the value held in Register E' (LSB of the NUMBER 1).</div></div>
										<div class="assembly-row-combined" id="0DC9H"><div>0DC9H</div><div>EXX</div><div>Make the REGULAR register set active by EXchanging the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0DCAH</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DCBH">0DCBH - Floating Point Math Routine - Addition. On entry the REGULAR registers are in effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DCBH</div><div>LD A,L</div><div>Since we can't do math on Register L, Copy the contents of EXPONENT of NUMBER 2 (Register L) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DCCH</div><div>SUB E</div><div>Subtract the EXPONENT of NUMBER 1 (Stored in E) from the EXPONENT of NUMBER 2 (Register L).</div></div>
										<div class="assembly-row-combined"><div>0DCDH</div><div><a href="#0DDDH" class="memory-link">JR Z,0DDDH</a></div><div>If the two EXPONENTs were the same (Z FLAG has been set), JUMP to 0DDDH.</div></div>
										<div class="assembly-row-combined"><div>0DCFH</div><div>CP 18H</div><div>Compare
 the value held in Register A (i.e., the difference in the exponents) 
against 18H (Decimal: 24) to check for precision. If the difference in 
the exponents is &gt;= 18H, the NO CARRY FLAG will be set.</div></div>
										<div class="assembly-row-combined"><div>0DD1H</div><div>RET NC</div><div>If
 the NC FLAG (No Carry) has been set then the exponents are just too far
 apart for Level 1 to handle the math, so abort the procedure and RETurn
 to the caller.</div></div>
										<div class="assembly-row-combined"><div>0DD2H</div><div>EXX</div><div>Othwerwise, let's get to work. First, EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0DD3H<br>0DD5H<br>0DD7H</div><div>SRL B<br>RR D<br>RR E</div><div>Start
 by processing the exponent --- Shift the B'/D'/E' combination 
(representing the MSB, NSBN, and LSB of the second digit) 1 bit to the 
right each.</div></div>
										<div class="assembly-row-combined"><div>0DD9H</div><div>DEC A</div><div>DECrement the difference between the exponents (stored in Register A) by 1.</div></div>
										<div class="assembly-row-combined"><div>0DDAH</div><div><a href="#0DD3H" class="memory-link">JR NZ,0DD3H</a></div><div>If A hasn't hit zero yet, then LOOP BACK to 0DD3H to keep shifting.</div></div>
										<div class="assembly-row-combined"><div>0DDCH</div><div>EXX</div><div>Swap out the Floating Point Stack (alt) registers for the regular registers.</div></div>
										<div class="assembly-row-combined"><div>0DDDH</div><div>LD E,00H</div><div>Let Register E equal 00H.</div></div>
										<div class="assembly-row-combined"><div>0DDFH</div><div>LD A,H</div><div>Copy the SIGN of NUMBER 2 (Register H) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DE0H</div><div>XOR D</div><div>eXclusive
 OR the SIGN of NUMBER 1 (Register D) against the SIGN of NUMBER 2 
(Register H a/k/a Register A). The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0DE1H</div><div><a href="#0DFAH" class="memory-link">JP M,0DFAH</a></div><div>If
 the S FLAG has been SET, JUMP to 0DFAH to use subtraction for an 
addition noting that on exit, the ALTERNATE registers are in effect.</div></div>
										<div class="assembly-row-combined"><div>0DE4H</div><div>EXX</div><div>Make the ALTERNATE REGISTER SET active (noting that AF remains as the REGULAR set).</div></div>
										<div class="assembly-row-combined"><div>0DE5H</div><div>ADD HL,DE</div><div>LET Register Pair HL = the sum of the NMSB and LSB of the two floating point numbers.</div></div>
										<div class="assembly-row-combined"><div>0DE6H</div><div>LD A,C</div><div>Copy the contents of Register C' (the MSB of NUMBER 2) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DE7H</div><div>ADC A,B</div><div>LET Register A = the sum of the MSB of the two floating point numbers.</div></div>
										<div class="assembly-row-combined"><div>0DE8H</div><div>LD C,A</div><div>Copy that sum into Register C' (the MSB of the first floating point number).</div></div>
										<div class="assembly-row-combined" id="0DE9H"><div>0DE9H</div><div><a href="#0DF2H" class="memory-link">JR NC,0DF2H</a></div><div>If
 the NC FLAG (No Carry) has been set then we don't have to worry about 
shifting the numbers, so skip all that and JUMP to 0DF2H.</div></div>
										<div class="assembly-row-combined"><div>0DEBH<br>0DEDH<br>0DEFH</div><div>RR C<br>RR H<br>RR L</div><div>If the addition of the two MSB's triggered a carry, then we need to shift the 3 bytes representing NUMBER 2 to the right.</div></div>
										<div class="assembly-row-combined"><div>0DF1H</div><div>SCF</div><div>Turn the CARRY FLAG on to indicate that we had to do a shift.</div></div>
										<div class="assembly-row-combined" id="0DF2H"><div>0DF2H</div><div>EXX</div><div>Swap out the Floating Point Stack (alt) registers for the regular registers.</div></div>
										<div class="assembly-row-combined" id="0DF3H"><div>0DF3H</div><div>LD A,L</div><div>Copy the EXPONENT of NUMBER 2 (Register L) into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DF4H</div><div>ADC A,E</div><div>LET Register A = the sum of the EXPONENTS of the two numbers (including that CARRY bit!).</div></div>
										<div class="assembly-row-combined" id="0DF5H"><div>0DF5H</div><div><a href="#0E15H" class="memory-link">JP PE,0E15H</a></div><div>If
 the PARITY/OVERFLOW FLAG has been SET, JUMP to 0E15H which tests the 
sign of Register H, if NEGATIVE then JUMP to 0E0EH and otherwise clear 
the return address from the stack and error out with "HOW?".</div></div>
										<div class="assembly-row-combined"><div>0DF8H</div><div>LD L,A</div><div>Copy the sum of the EXPONENTS of the two numbers (including that CARRY bit) into Register L.</div></div>
										<div class="assembly-row-combined"><div>0DF9H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0DFAH">0DFAH - 
Floating Point Math Routine - Subtraction. On entry the REGULAR 
registers are in effect, but on exit the ALTERNATE registers are in 
effect.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0DFAH</div><div>EXX</div><div>Swap out the regular registers out and the Floating Point Stack (alt) registers in. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0DFBH</div><div>SBC HL,DE</div><div>Subtract
 the NMSB and LSB of NUMBER 1 (stored in DE') from the NMSB and LSB of 
NUMBER 2 (stored in HL'), and the carry flag, with the result in HL'.</div></div>
										<div class="assembly-row-combined"><div>0DFDH</div><div>LD A,C</div><div>Copy the MSB of NUMBER 2 (stored in C') into Register A.</div></div>
										<div class="assembly-row-combined"><div>0DFEH</div><div>SBC A,B</div><div>Subtracts the MSB of NUMBER 1 (held in Register B') and the carry flag from the MSB of NUMBER 2 (stored in Register Pair A).</div></div>
										<div class="assembly-row-combined"><div>0DFFH</div><div>LD C,A</div><div>Copy MSB of NUMBER 2 - MSB of NUMBER 1 into Register C'.</div></div>
										<p class="debug-note">This is a common jump point ... On Entry the ALTERNATE REGISTERS are in effect.</p>
										<div class="assembly-row-combined"><div>0E00H</div><div>LD B,18H</div><div>Let Register B equal 18H (Decimal: 24) for a DJNC loop at 0E05H-0E0CH so as to shift no more than 24 times.</div></div>
										<div class="assembly-row-combined"><div>0E02H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags as Register A will count those shifts.</div></div>
										<div class="assembly-row-combined"><div>0E03H</div><div>INC C</div><div>INCrement the MSB of NUMBER 2 (stored in C') by 1.</div></div>
										<div class="assembly-row-combined"><div>0E04H</div><div>DEC C</div><div>DECrement MSB of NUMBER 2 (stored in C') by 1.</div></div>
										<div class="assembly-row-combined"><div>0E05H</div><div><a href="#0E11H" class="memory-link">JP M,0E11H</a></div><div>If
 the S FLAG (i.e., the high bit) has been SET, JUMP to 0E11H which swaps
 the alternate registers, adds Register L to Register A, and JUMPs to 
0DF5H which JUMPs to 0E15H (which tests the sign of Register H, if 
NEGATIVE then JUMP to 0E0EH and otherwise clear the return address from 
the stack and error out with "HOW?") if the PE FLAG is set, and if not 
Let Register L = Register A and RETurn.</div></div>
										<div class="assembly-row-combined"><div>0E08H</div><div>DEC A</div><div>OTHERWISE, bump Register A by 1 to keep count of the number of times we shift.</div></div>
										<div class="assembly-row-combined"><div>0E09H</div><div>ADD HL,HL</div><div>LET Register Pair HL = the NMSB and LSB of NUMBER 2 (stored in HL') * 2, which shifts HL' left one bit.</div></div>
										<div class="assembly-row-combined"><div>0E0AH</div><div>RL C</div><div>Rotate
 the bits of the MSB of NUMBER 2 (stored in C') left 1 position, with 7 
going to CARRY and CARRY going to 0. This effectively multiplies 
Register C by 2.</div></div>
										<div class="assembly-row-combined"><div>0E0CH</div><div><a href="#0E05H" class="memory-link">DJNZ 0E05H</a></div><div>LOOP
 back to 0E05H, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E0EH">0E0EH<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E0EH</div><div>LD L,80H</div><div>Let thhe EXPONENT of NUMBER 2 (Stored in L) equal 80H (Decimal: 128).</div></div>
										<div class="assembly-row-combined"><div>0E10H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E11H">0E11H - Part 
of the MATH ROUTINE. JUMPed here from 0E05H if the SIGN flag was set 
based on Register C. On entry the ALTERNATE REGISTER SET is active, on 
EXIT the REGULAR REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E11H</div><div>EXX</div><div>Set the REGULAR REGISTER SET as active by EXchanging the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E12H</div><div>ADD A,L</div><div>LET Register A = Register A + EXPONENT of NUMBER 2 (Stored in L).</div></div>
										<div class="assembly-row-combined"><div>0E13H</div><div><a href="#0DF5H" class="memory-link">JR 0DF5H</a></div><div>JUMP
 to 0DF5H which JUMPs to 0E15H (which tests the sign of Register H, if 
NEGATIVE then JUMP to 0E0EH and otherwise clear the return address from 
the stack and error out with "HOW?") if the PE FLAG is set, and if not 
Let Register L = Register A and RETurn.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E15H">0E15H - MATH 
ROUTINE. Test the sign of Register H, if NEGATIVE then JUMP to 0E0EH and
 otherwise clear the return address from the stack and error out with 
"HOW?".<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E15H</div><div>LD A,H</div><div>Copy the contents of Register H into Register A.</div></div>
										<div class="assembly-row-combined"><div>0E16H</div><div>OR A</div><div>Since
 a LD command does not set any FLAGS, Set FLAGS based on the contents of
 Register A (and, in all events, clear the CARRY FLAG).</div></div>
										<div class="assembly-row-combined"><div>0E17H</div><div><a href="#0E0EH" class="memory-link">JP M,0E0EH</a></div><div>If the S FLAG has been SET, JUMP to 0E0EH to set Register L to 80H and RETurn.</div></div>
										<div class="assembly-row-combined"><div>0E1AH</div><div>POP AF</div><div>Clear the RETurn address from the stack.</div></div>
										<div class="assembly-row-combined"><div>0E1BH</div><div><a href="#01A3H" class="memory-link">JP 01A3H</a></div><div>JUMP to 01A3H to display the "HOW?" error.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E1EH">0E1EH - Math 
Subroutine. This routine will fill all the registers with various parts 
of two floating point numbers. On entry, the REGULAR REGISTER SET is 
active. On exit, the original DE is in the stack, the Z FLAG is set if 
the exponent NUMBER 2 is 80H, NUMBER 1 is stored in B', D', and E', with
 the sign in D and the exponent in E, and NUMBER 2 is stored in C', H', 
and L', with the sign in H and the exponent in L.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E1EH</div><div>POP HL</div><div>Put
 the value held at the top of the STACK, which is the RETurn address 
from the CALL, into Register Pair HL so we can put something one level 
below it in the stack and then put it back on top.</div></div>
										<div class="assembly-row-combined"><div>0E1FH</div><div>PUSH DE</div><div>Save the contents of Register Pair DE to the top of the stack. This will NOT be POP'ed back in this routine.</div></div>
										<div class="assembly-row-combined"><div>0E20H</div><div>PUSH HL</div><div>Save the RETurn address from the CALL (held in Register Pair HL) so it is at the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0E21H</div><div>LD D,(IX+FFH)</div><div>IX+FFH
 is the same as IX-01H, which is the SIGN of NUMBER 1 in the FLOATING 
POINT STACK. Put the sign of NUMBER 1, pointed to in the Floating Point 
Stack at location (IX-1), into Register D.</div></div>
										<div class="assembly-row-combined"><div>0E24H</div><div>LD E,(IX+FEH)</div><div>IX+FEH
 is the same as IX-02H, which is the EXPONENT of NUMBER 1 in the 
FLOATING POINT STACK. Put the exponent of NUMBER 1, pointed to in the 
Floating Point Stack at location (IX-2), into Register E.</div></div>
										<div class="assembly-row-combined"><div>0E27H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E28H</div><div>LD E,(IX+FBH)</div><div>IX+FBH
 is the same as IX-05H, which is the LSB of NUMBER 1 in the FLOATING 
POINT STACK. Put the LSB of NUMBER 1, pointed to in the Floating Point 
Stack at location (IX-5), into Register E'.</div></div>
										<div class="assembly-row-combined"><div>0E2BH</div><div>LD D,(IX+FCH)</div><div>IX+FCH
 is the same as IX-04H, which is the NMSB of NUMBER 1 in the FLOATING 
POINT STACK. Put the NMSB of NUMBER 1, pointed to in the Floating Point 
Stack at location (IX-4), into Register D'.</div></div>
										<div class="assembly-row-combined"><div>0E2EH</div><div>LD B,(IX+FDH)</div><div>IX+FDH
 is the same as IX-03H, which is the MSB of NUMBER 1 in the FLOATING 
POINT STACK. Put the MSB of NUMBER 1, pointed to in the Floating Point 
Stack at location (IX-3), into Register B'.</div></div>
										<div class="assembly-row-combined"><div>0E31H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E32H</div><div>LD H,(IX+FAH)</div><div>Put the sign of NUMBER 2, pointed to in the Floating Point Stack at location (IX-6), into Register H.</div></div>
										<div class="assembly-row-combined"><div>0E35H</div><div>LD L,(IX+F9H)</div><div>Put the exponent of NUMBER 2, pointed to in the Floating Point Stack at location (IX-7), into Register L.</div></div>
										<div class="assembly-row-combined"><div>0E38H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E39H</div><div>LD L,(IX+F6H)</div><div>Put the LSB of NUMBER 2, pointed to in the Floating Point Stack at location (IX-10), into Register L'.</div></div>
										<div class="assembly-row-combined"><div>0E3CH</div><div>LD H,(IX+F7H)</div><div>Put the NMSB of NUMBER 2, pointed to in the Floating Point Stack at location (IX-9), into Register H'.</div></div>
										<div class="assembly-row-combined"><div>0E3FH</div><div>LD C,(IX+F8H)</div><div>Put the MSB of NUMBER 2, pointed to in the Floating Point Stack at location (IX-8), into Register C'.</div></div>
										<div class="assembly-row-combined"><div>0E42H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E43H</div><div>LD A,80H</div><div>Let Register A equal 80H (Decimal: 128).</div></div>
										<div class="assembly-row-combined"><div>0E45H</div><div>CP L</div><div>Compare the value held in Register A against the value held in Register L. Results:<ul><li>If Register A equals the value held in Register L, the Z FLAG is set.</li><li>If A &lt; L/128/, the CARRY FLAG will be set.</li><li>if A &gt;= L/128/, the NO CARRY FLAG will be set.</li></ul></div></div>
										<div class="assembly-row-combined"><div>0E46H</div><div>RET</div><div>RETurn to the caller with Z set of the EXPONENT of NUMBER 2 = 80H (128) and NZ set otherwise.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E47H">0E47H - Entry point <span class="code">RND()</span>.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E47H</div><div><a href="#0814H" class="memory-link">CALL 0814H</a></div><div>GOSUB
 to 0814H to verify that an integer is within parenthesis, and calculate
 the integer expression with the result in Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0E4AH<br>0E4AH</div><div>LD A,H<br>OR L</div><div>Since
 the Z-80 cannot test Register Pair HL against zero, the common trick is
 to set Register A to equal to Register H, and then OR A against 
Register L. Only if both Register H and Register L were zero can the Z 
FLAG be set.</div></div>
										<div class="assembly-row-combined"><div>0E4CH</div><div><a href="#0E64H" class="memory-link">JP Z,0E64H</a></div><div>If the seed provided within the RND() command was zero, the Z FLAG (Zero) will have been set, JUMP to 0E64H.</div></div>
										<div class="assembly-row-combined"><div>0E4FH</div><div>BIT 7,H</div><div>Test the sign (bit 7) of Register H. Z FLAG will be set if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
										<div class="assembly-row-combined"><div>0E51H</div><div><a href="#01A2H" class="memory-link">JP NZ,01A2H</a></div><div>If
 a negative number was passed, the NZ FLAG will have been set which is a
 bad thing, so display the "HOW?" error via a JUMP to 01A2H.</div></div>
										<div class="assembly-row-combined"><div>0E54H</div><div><a href="#0C59H" class="memory-link">CALL 0C59H</a></div><div>GOSUB to 0C59H to convert the value stored in Register Pair HL to a floating point number in the Floating Point Stack.</div></div>
										<div class="assembly-row-combined"><div>0E57H</div><div><a href="#0E64H" class="memory-link">CALL 0E64H</a></div><div>GOSUB to 0E64H to process a RND(0) command.</div></div>
										<div class="assembly-row-combined"><div>0E5AH</div><div><a href="#0C87H" class="memory-link">CALL 0C87H</a></div><div>GOSUB to 0C87H to multiply that RND(0) result into an appropriate number based on DE and not just RND(0).</div></div>
										<div class="assembly-row-combined"><div>0E5DH</div><div><a href="#0C0BH" class="memory-link">CALL 0C0BH</a></div><div>GOSUB to 0C0BH to convert the number in the FLOATING POINT STACK into an INTEGER to be stored in Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0E60H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
										<div class="assembly-row-combined"><div>0E61H</div><div><a href="#0C59H" class="memory-link">JP 0C59H</a></div><div>JUMP
 to 0C59H to convert the value stored in Register Pair HL to a floating 
point number in the Floating Point Stack, but with the RET in that 
routine RETurning out of THIS one.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0E64H">0E64H - Continuation of the <span class="code">RND()</span> routine; JUMPed here to calculate RND(0).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0E64H</div><div>PUSH DE</div><div>Save the contents of Register Pair DE (i.e., the n of RND[n]).</div></div>
										<div class="assembly-row-combined"><div>0E65H</div><div>EXX</div><div>Swap out the regular registers for the ALT set. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E66H</div><div>LD HL,40A7H</div><div>Let Register Pair HL equal 40A7H, which points to the Random Number Generator state.</div></div>
										<div class="assembly-row-combined"><div>0E69H</div><div>LD E,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register E'.</div></div>
										<div class="assembly-row-combined"><div>0E6AH</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1 to point to the next byte of the Random Number Generator state.</div></div>
										<div class="assembly-row-combined"><div>0E6BH</div><div>LD D,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register D'.</div></div>
										<div class="assembly-row-combined"><div>0E6CH</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1 to point to the next byte of the Random Number Generator state.</div></div>
										<div class="assembly-row-combined"><div>0E6DH</div><div>LD B,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register B'.</div></div>
										<div class="assembly-row-combined"><div>0E6EH</div><div>EXX</div><div>Swap out the ALTernate Registers and use the regular registers. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E6FH</div><div><a href="#0155H" class="memory-link">CALL 0155H</a></div><div>Zero
 out C', H', and L' via a GOSUB to 0155H which resets Bit 6 of Register 
B, swaps register sets, sets H, L, and C to 00H, swaps register sets, 
and RETurns.</div></div>
										<div class="assembly-row-combined"><div>0E72H</div><div>LD HL,0EB2H</div><div>Let Register Pair HL equal 0EB2H which is the Random Number Generator Multiplier value table in this ROM.</div></div>
										<div class="assembly-row-combined"><div>0E75H</div><div>LD C,03H</div><div>Let Register C equal 03H for the 3 bytes of the Random Number Generator Multiplier value table, as a big loop.</div></div>
										<div class="assembly-row-combined" id="0E77H"><div>0E77H</div><div>LD B,08H</div><div>Let Register B equal 08H for a DJNZ LOOP (at 0E89H) of 8.</div></div>
										<div class="assembly-row-combined"><div>0E79H</div><div>LD D,(HL)</div><div>Fetch a value from the Random Number Generator Multiplier table and store it into Register D.</div></div>
										<div class="assembly-row-combined" id="0E7AH"><div>0E7AH</div><div>EXX</div><div>Top of the DJNZ loop from 0E7AH-0E89H. Swap out the regular registers for the ALT set. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E7BH</div><div>ADD HL,HL</div><div>Shift C', H', and L' each one bit to the left ... first LET Register Pair HL = Register Pair HL + Register HL.</div></div>
										<div class="assembly-row-combined"><div>0E7CH</div><div>RL C</div><div>That leaves C' ... so shift C' as well.</div></div>
										<div class="assembly-row-combined"><div>0E7EH</div><div>EXX</div><div>Swap out the ALTernate Registers and use the regular registers. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E7FH</div><div>RL D</div><div>Rotate Register D (which is a value from the Random Number Generator Multiplier table) one bit to the left</div></div>
										<div class="assembly-row-combined"><div>0E81H</div><div><a href="#0E89H" class="memory-link">JR NC,0E89H</a></div><div>If the NC FLAG (No Carry) has been set, JUMP to 0E89H.</div></div>
										<div class="assembly-row-combined"><div>0E83H</div><div>EXX</div><div>Swap out the regular registers for the ALT set. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E84H</div><div>ADD HL,DE</div><div>The next 3 instructions perform C'/H'/L' = C'/H'/L' + B'/D'/E'. First, LET Register Pair HL = Register Pair HL + Register DE.</div></div>
										<div class="assembly-row-combined"><div>0E85H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0E86H</div><div>ADC A,B</div><div>LET Register A = Register A + Register B.</div></div>
										<div class="assembly-row-combined"><div>0E87H</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
										<div class="assembly-row-combined"><div>0E88H</div><div>EXX</div><div>Swap out the ALTernate Registers and use the regular registers. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined" id="0E89H"><div>0E89H</div><div><a href="#0E7AH" class="memory-link">DJNZ 0E7AH</a></div><div>LOOP
 back to 0E7AH, reducing Register B each time, and continue to LOOP 
until Register B has been reduced to ZERO, in which case, continue with 
the next instruction.</div></div>
										<div class="assembly-row-combined"><div>0E8BH</div><div>INC HL</div><div>INCrement
 the value stored in Register Pair HL by 1 to point to the next of the 3
 bytes of the Random Number Generator Multiplier value table.</div></div>
										<div class="assembly-row-combined"><div>0E8CH</div><div>DEC C</div><div>DECrement the value stored in Register C by 1 to keep track of the loop of 3.</div></div>
										<div class="assembly-row-combined"><div>0E8DH</div><div><a href="#0E77H" class="memory-link">JR NZ,0E77H</a></div><div>If
 the NZ FLAG (Not Zero) has been set, meaning we have not processed all 3
 bytes of the Random Number Generator Multiplier value table, JUMP to 
0E77H.</div></div>
										<p class="debug-note">If we are here, we have processed all 3 
bytes of the Random Number Generator Multiplier value table and have 
rotated 8 times per.</p>
										<div class="assembly-row-combined"><div>0E8FH</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>0E92H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0E93H</div><div>LD DE,40A7H</div><div>Let Register Pair DE equal 40A7H, which points to the Random Number Generator state.</div></div>
										<div class="assembly-row-combined"><div>0E96H</div><div>LD A,L</div><div>Copy the contents of Register L into Register A.</div></div>
										<div class="assembly-row-combined"><div>0E97H</div><div>ADD 65H</div><div>LET Register A = Register A + 65H.</div></div>
										<div class="assembly-row-combined"><div>0E99H</div><div>LD (DE),A</div><div>Store the value held in Register A into the byte of the Random Number Generator state pointed to by Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0E9AH</div><div>INC DE</div><div>Bump DE to point to the next byte of the Random Number Generator state</div></div>
										<div class="assembly-row-combined"><div>0E9BH</div><div>LD L,A</div><div>Copy the contents of Register A into Register L.</div></div>
										<div class="assembly-row-combined"><div>0E9CH</div><div>LD A,H</div><div>Copy the contents of Register H into Register A.</div></div>
										<div class="assembly-row-combined"><div>0E9DH</div><div>ADC B0H</div><div>LET Register A = Register A + B0H.</div></div>
										<div class="assembly-row-combined"><div>0E9FH</div><div>LD (DE),A</div><div>Store the value held in Register A into the byte of the Random Number Generator state pointed to by Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0EA0H</div><div>INC DE</div><div>Bump DE to point to the next byte of the Random Number Generator state</div></div>
										<div class="assembly-row-combined"><div>0EA1H</div><div>LD H,A</div><div>Copy the contents of Register A into Register H.</div></div>
										<div class="assembly-row-combined"><div>0EA2H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0EA3H</div><div>ADC 05H</div><div>LET Register A = Register A + 05H.</div></div>
										<div class="assembly-row-combined"><div>0EA5H</div><div>LD (DE),A</div><div>Store the value held in Register A into the byte of the Random Number Generator state pointed to by Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0EA6H</div><div>LD C,A</div><div>Copy the contents of Register A into Register C.</div></div>
										<div class="assembly-row-combined"><div>0EA7H</div><div><a href="#0E00H" class="memory-link">CALL 0E00H</a></div><div>GOSUB to 0E00H to normalize C, H, and L (even though they aren't actually a float).</div></div>
										<div class="assembly-row-combined"><div>0EAAH</div><div>LD BC,000AH</div><div>Let
 Register Pair BC equal 000AH (Decimal: 10) which is the number of bytes
 for TWO floating numbers in the Floating Point Stack.</div></div>
										<div class="assembly-row-combined"><div>0EADH</div><div>ADD IX,BC</div><div>Advance the Floating Point Stack pointer (Register Pair IX) by TWO floating numbers (i.e., 10 bytes).</div></div>
										<div class="assembly-row-combined"><div>0EAFH</div><div><a href="#0D0FH" class="memory-link">JP 0D0FH</a></div><div>JUMP
 to 0D0FH leave Register L unchanged but otherwise store the H (Sign), L
 (Exponent), C' (MSB), H' (NLSB), L' (LSB) registers into the Floating 
Point Stack at one set earlier than the location pointed to by Special 
Index Register IX, adust IX to point to that entry (i.e., -5 bytes from 
where it started)and POP DE. Since this is a JUMP, the RETurn in that 
routine will actually RETurn to this routine's caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EB2H">0EB2H - Byte Storage Area - Random Number Generator Multiplier Values.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EB2H</div><div>DEFB 40H E7H 4DH</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EB5H">0EB5H - Byte Storage Area - Constants used to Display Floating Point Numbers.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EB5H</div><div>DEFB 00H 00H 80H 80H</div></div>
										<div class="assembly-row-combined" id="0EB9H"><div>0EB9H</div><div>DEFB CCH CCH CCH 7EH</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EC4H">0EC4H - Parse 
the instruction line to see if the next characters are integers and, if 
so, put them into Register Pair HL. On entry the REGULAR REGISTER SET is
 active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EC4H</div><div><a href="#0155H" class="memory-link">CALL 0155H</a></div><div>GOSUB
 to 0155H which resets Bit 6 of Register B, swaps to the ALTERNATE 
REGISTER SET, sets H', L', and C' to 00H, swaps back to the REGULAR 
REGISTER SET, and RETurns.</div></div>
										<div class="assembly-row-combined"><div>0EC7H</div><div>LD HL,0000H</div><div>Let Register Pair HL equal 0000H.</div></div>
										<div class="assembly-row-combined"><div>0ECAH</div><div>LD B,L</div><div>Copy the contents of Register L (which is now 00H thanks to the prior instruction) into Register B.</div></div>
										<div class="assembly-row-combined"><div>0ECBH</div><div>RST 28H</div><div>Call RST 28H to move DE to point to the next non-space character, with Register A holding that character.</div></div>
										<div class="assembly-row-combined"><div>0ECCH</div><div><a href="#008CH" class="memory-link">CALL 008CH</a></div><div>GOSUB
 to 008CH to check to see if the character pointed to by Register Pair 
DE is, or is not, a digit. Returns Register A contaning the digit, or 
the CARRY FLAG set otherwise.</div></div>
										<div class="assembly-row-combined"><div>0ECFH</div><div><a href="#0EDAH" class="memory-link">JR C,0EDAH</a></div><div>If the C FLAG (Carry) has been set then there was no digit to be found so JUMP to the next routine set at 0EDAH.</div></div>
										<div class="assembly-row-combined"><div>0ED1H</div><div>INC B</div><div>If we are here, then DE is pointing to a digit. INCrement the value stored in Register B by 1.</div></div>
										<div class="assembly-row-combined"><div>0ED2H</div><div><a href="#015EH" class="memory-link">CALL 015EH</a></div><div>GOSUB
 to 015EH to to accumulate the digit by multiplying the accumulator by 
10 and then adding in A to the newly vacant one's spot. Routine will 
return a NZ SET if an overflow occurs from the accumulation.</div></div>
										<div class="assembly-row-combined"><div>0ED5H</div><div><a href="#0ECCH" class="memory-link">JR NC,0ECCH</a></div><div>So
 long as no overlow occurred in that CALL (i.e., the NC FLAG has been 
set), LOOP back a couple of instructions to 0ECCH and keep processing.</div></div>
										<div class="assembly-row-combined" id="0ED7H"><div>0ED7H</div><div><a href="#01A2H" class="memory-link">JP 01A2H</a></div><div>If we are here, then we got an overflow, so display the "HOW?" error via a JUMP to 01A2H.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EDAH">0EDAH - Continuation of the above parsing routine. On entry the REGULAR REGISTER SET is active.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EDAH</div><div>EXX</div><div>Set the ALTERNATE REGISTER SET to active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0EDBH</div><div>PUSH HL</div><div>Save the contents of Register Pair HL' to the top of the stack.</div></div>
										<div class="assembly-row-combined"><div>0EDCH</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
										<div class="assembly-row-combined"><div>0EDDH</div><div>BIT 7,H</div><div>Test Bit Number 7 of Register H. Z FLAG will be set if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
										<div class="assembly-row-combined"><div>0EDFH</div><div>EXX</div><div>Set the REGULAR REGISTER SET to active and EXchange the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
										<div class="assembly-row-combined"><div>0EE0H</div><div>POP HL</div><div>Put the value held at the top of the STACK (which was HL') into Register Pair HL.</div></div>
										<div class="assembly-row-combined"><div>0EE1H</div><div><a href="#0ED7H" class="memory-link">JR NZ,0ED7H</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0ED7H which JUMPs to 01A2 to display the "HOW?" error.</div></div>
										<div class="assembly-row-combined"><div>0EE3H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
										<div class="assembly-row-combined"><div>0EE4H</div><div><a href="#0ED7H" class="memory-link">JR NZ,0ED7H</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0ED7H which JUMPs to 01A2 to display the "HOW?" error.</div></div>
										<div class="assembly-row-combined"><div>0EE6H</div><div>LD A,B</div><div>Copy the contents of Register B into Register A.</div></div>
										<div class="assembly-row-combined"><div>0EE7H</div><div>AND A</div><div>Reset
 the CARRY FLAG and set the Z/NZ FLAGS based on Register A via an AND A 
(which masks the value of Register A against itself).</div></div>
										<div class="assembly-row-combined"><div>0EE8H</div><div>RET</div><div>RETurn to the caller.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EE9H">0EE9H - Entry point for the <span class="code">CLOAD</span> Command.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EE9H</div><div><a href="#0EF4H" class="memory-link">CALL 0EF4H</a></div><div>GOSUB
 to 0EF4H which turns on the cassette motor, reads the data header and 
then read the number of bytes needed to fill RAM based on the block 
addresses. Routine exits with Register A holding the CRC and flags set 
based on Register A; DE is preserved.</div></div>
										<div class="assembly-row-combined"><div>0EECH</div><div>LD (406CH),HL</div><div>Store the value held in Register Pair HL into memory location 406CH (which points to the top of used RAM).</div></div>
										<div class="assembly-row-combined"><div>0EEFH</div><div><a href="#0EC1H" class="memory-link">JR NZ,0EC1H</a></div><div>If the NZ FLAG (Not Zero) has been set, JUMP to 0EC1H.</div></div>
										<div class="assembly-row-combined"><div>0EF1H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Enter they READY command line routine via a JUMP to 01C9H.</div></div>
									</div>
								</div>

								<br><h2 class="assembly-section-title" id="0EF4H">0EF4H - 
CASSETTE - Turn on the cassette motor, read the data header and then 
read the number of bytes needed to fill RAM based on the block 
addresses. Routine exits with Register A holding the CRC and flags set 
based on Register A; DE is preserved.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
								<div class="card-item">
									<div class="assembly-table">
										<div class="assembly-row-combined"><div>0EF4H</div><div><a href="#0FE9H" class="memory-link">CALL 0FE9H</a></div><div>GOSUB to 0FE9H to turn on the cassette motor.</div></div>
										<div class="assembly-row-combined"><div>0EF7H</div><div>PUSH DE</div><div>Save
 the contents of Register Pair DE to the top of the stack since this 
routine will use it. DE is restored once the appropriate number of bytes
 have been read from the cassette, at 0F37H.</div></div>
										<div class="assembly-row-combined"><div>0EF8H</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
										<div class="assembly-row-combined" id="0EF9H"><div>0EF9H</div><div><a href="#0F81H" class="memory-link">CALL 0F81H</a></div><div>GOSUB to 0F81H to READ a BYTE from the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0EFCH</div><div>CP A5H</div><div>Compare
 the value held in Register A against A5H, which is the SYNC byte. 
Results: If Register A equals A5H, the Z FLAG is set; otherwise the NZ 
FLAG is set.</div></div>
										<div class="assembly-row-combined"><div>0EFEH</div><div><a href="#0EF9H" class="memory-link">JR NZ,0EF9H</a></div><div>If the NZ FLAG (Not Zero) has been set, LOOP BACK 2 instructions to 0EF9H to read another byte from the cassette port.</div></div>
										<div class="assembly-row-combined"><div>0F00H</div><div>LD A,2AH</div><div>Let Register A equal 2AH (ASCII: <span class="code">*</span>).</div></div>
										<div class="assembly-row-combined"><div>0F02H</div><div>LD (3C00H),A</div><div>Store the value held in Register A into memory location 3C00H.<br><b>NOTE:</b> 3C00H is the location of the first character on the display.</div></div>
										<div class="assembly-row-combined"><div>0F05H</div><div>LD (3C01H),A</div><div>Store the value held in Register A into memory location 3C01H.</div></div>
										<p class="debug-note">When bytes are written, the header 
including the A5H is written, then Registers H, L, D, and E; so the 
below loads E, D, L, and H from the cassette. The bytes then get loaded 
into RAM starting at the memory location held in Register Pair DE.</p>
										<div class="assembly-row-combined"><div>0F08H</div><div><a href="#0FA1H" class="memory-link">CALL 0FA1H</a></div><div>GOSUB to 0FA1H to read a BYTE to the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0F0BH</div><div>LD D,A</div><div>Copy the byte held in Register A into Register D.</div></div>
										<div class="assembly-row-combined"><div>0F0CH</div><div><a href="#0FA1H" class="memory-link">CALL 0FA1H</a></div><div>GOSUB to 0FA1H to read a BYTE to the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0F0FH</div><div>LD E,A</div><div>Copy the byte held in Register A into Register E.</div></div>
										<div class="assembly-row-combined"><div>0F10H</div><div><a href="#0FA1H" class="memory-link">CALL 0FA1H</a></div><div>GOSUB to 0FA1H to read a BYTE to the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0F13H</div><div>LD H,A</div><div>Copy the byte held in Register A into Register H.</div></div>
										<div class="assembly-row-combined"><div>0F14H</div><div><a href="#0FA1H" class="memory-link">CALL 0FA1H</a></div><div>GOSUB to 0FA1H to read a BYTE to the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0F17H</div><div>LD L,A</div><div>Copy the byte held in Register A into Register L.</div></div>
										<div class="assembly-row-combined"><div>0F18H</div><div>LD C,00H</div><div>In preparation for Register C accumulating the CRC, let Register C equal 00H.</div></div>
										<div class="assembly-row-combined"><div>0F1AH</div><div><a href="#0FA1H" class="memory-link">CALL 0FA1H</a></div><div>GOSUB to 0FA1H to read a BYTE to the Cassette Port.</div></div>
										<div class="assembly-row-combined"><div>0F1DH</div><div>LD (DE),A</div><div>Store the value held in Register A into the memory location pointed to by Register Pair DE.</div></div>
										<div class="assembly-row-combined"><div>0F1EH</div><div>INC DE</div><div>INCrement the RAM pointer (stored in Register Pair DE) by 1.</div></div>
										<div class="assembly-row-combined"><div>0F1FH</div><div>CP 0DH</div><div>Compare the value held in Register A against 0DH (ASCII: <span class="code">CARRIAGE RETURN</span>). If Register A equals <span class="code">CARRIAGE RETURN</span>, the Z FLAG is set; otherwise the NZ FLAG is set.</div></div>
										<div class="assembly-row-combined"><div>0F21H</div><div><a href="#0F2DH" class="memory-link">JR NZ,0F2DH</a></div><div>If we did not read a <span class="code">CARRIAGE RETURN</span>
 then the the NZ FLAG will have been set, so JUMP to 0F2DH to add the 
character to the CRC and continue reading, otherwise continue by 
flipping the "<span class="code">-</span>" and " " and THEN adding the character to the CRC.</div></div>
										<div class="assembly-row-combined"><div>0F23H</div><div>PUSH AF</div><div>Preserve
 the contents of Register Pair AF to the top of the stack for the next 3
 instructions which use Register A to flip the "**" display.</div></div>
										<div class="assembly-row-combined"><div>0F24H</div><div>LD A,(3C01H)</div><div>Fetch the value held in the 2nd byte of screen memory location (3C01H) and store it into Register A.</div></div>
										<div class="assembly-row-combined"><div>0F27H</div><div>XOR 0AH</div><div>eXclusive OR 0AH (0000 1010) against Register A (which is either 00101010 if the "<span class="code">-</span>" is on or 00100000 if there is a space instead). The results are stored in Register A.</div></div>
										<div class="assembly-row-combined"><div>0F29H</div><div>LD (3C01H),A</div><div>Store the "<span class="code">-</span>" or " " held in Register A into the 2nd byte of screen memory location (3C01H).</div></div>
										<div class="assembly-row-combined"><div>0F2CH</div><div>POP AF</div><div>Restore Register A from the stack.</div></div>
										<div class="assembly-row-combined" id="0F2DH"><div>0F2DH</div><div>ADD A,C</div><div>Add the currentl read byte to Register C for purposes of tracking the CRC.</div></div>
										<div class="assembly-row-combined"><div>0F2EH</div><div>LD C,A</div><div>Copy the updated CRC from Register A back into Register C.</div></div>
										<div class="assembly-row-combined"><div>0F2FH</div><div>RST 20H</div><div>Compare
 HL (which is the END of the block being read) and DE (which is the 
current RAM location in the block being read) via a call to RST 20H. 
Results: NZ means no match, Z means match, and if H=D but L &lt; E, then
 the C flag will be set.</div></div>
										<div class="assembly-row-combined"><div>0F30H</div><div><a href="#0F1AH" class="memory-link">JR NC,0F1AH</a></div><div>If
 the NC FLAG (No Carry) has been set then we have not yet reached the 
END pointer, so LOOP BACK to 0F1AH to continue reading bytes.</div></div>
										<p class="debug-note">If we are here, then we have finished 
reading all the bytes which were to be placed within the read/designated
 RAM block of DE to HL.</p>
									</div>
							</div>

							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0F32H</div><div>PUSH HL</div><div>Temporarily save HL to the stack, for purposes of the next instruction..</div></div>
									<div class="assembly-row-combined"><div>0F33H</div><div><a href="#0FE4H" class="memory-link">CALL 0FE4H</a></div><div>GOSUB to 0FE4H to turn off the cassette motor.</div></div>
									<div class="assembly-row-combined"><div>0F36H</div><div>POP HL</div><div>Restore Register Pair HL from the stack.</div></div>
									<div class="assembly-row-combined"><div>0F37H</div><div>POP DE</div><div>Put the value held at the top of the STACK into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0F38H</div><div>LD A,C</div><div>Copy the CRC value (held in Register C) into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F39H</div><div>AND A</div><div>Set the flags based on Register A via an AND A.</div></div>
									<div class="assembly-row-combined"><div>0F3AH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0F3BH">0F3BH - Entry Point for the "CSAVE" Routine.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0F3BH</div><div><a href="#0FE9H" class="memory-link">CALL 0FE9H</a></div><div>GOSUB to 0FE9H to turn on the cassette motor.</div></div>
									<div class="assembly-row-combined"><div>0F3EH</div><div>LD HL,4200H</div><div>Let Register Pair HL equal 4200H, which is the top of system stack pointer in Level 1.</div></div>
									<div class="assembly-row-combined"><div>0F41H</div><div>LD DE,(406CH)</div><div>Fetch the pointer to top of used memory from memory location 406CH and store it into Register Pair DE.</div></div>
									<div class="assembly-row-combined"><div>0F45H</div><div><a href="#0F4BH" class="memory-link">CALL 0F4BH</a></div><div>GOSUB to 0F4BH to write the header and then all data from HL to DE.</div></div>
									<div class="assembly-row-combined"><div>0F48H</div><div><a href="#01C9H" class="memory-link">JP 01C9H</a></div><div>Enter they READY command line routine via a JUMP to 01C9H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0F4BH">0F4BH - 
CASSETTE - Write the cassette header (128 0's and then an A5 sync byte) 
and then H, L, D, E, then all the bytes from HL to DE, and then the 
checksum.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0F4BH</div><div>LD A,80H</div><div>Let Register A equal 80H (Decimal: 128) so as to prepare to write a header of 128 0's.</div></div>
									<div class="assembly-row-combined"><div>0F4DH</div><div>PUSH BC</div><div>Save the contents of Register Pair BC to the top of the stack.</div></div>
									<div class="assembly-row-combined"><div>0F4EH</div><div>EX AF,AF'</div><div>Save
 the 80H iteration counter because EVERYTHING needs to use Register A by
 EXchange the value stored in Register Pair AF' with the value stored in
 Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0F4FH</div><div>XOR A</div><div>Set Register A to ZERO and clear all Flags.</div></div>
									<div class="assembly-row-combined"><div>0F50H</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F53H</div><div>EX AF,AF'</div><div>Restore
 the 80H iteration counter because EVERYTHING needs to use Register A by
 EXchanging BACK the value stored in Register Pair AF' with the value 
stored in Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0F54H</div><div>DEC A</div><div>DECrement the number of 0 bytes to write (tracked by Register A) by 1.</div></div>
									<div class="assembly-row-combined"><div>0F55H</div><div><a href="#0F4EH" class="memory-link">JR NZ,0F4EH</a></div><div>If the NZ FLAG (Not Zero) has been set then we still have more 0's to write, so LOOP back to 0F4EH.</div></div>
									<p class="debug-note">The 80 "0" bytes have now been written, time to write the SYNC byte.</p>
									<div class="assembly-row-combined"><div>0F57H</div><div>LD A,A5H</div><div>Let Register A equal A5H which is the SYNC byte.</div></div>
									<div class="assembly-row-combined"><div>0F59H</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<p class="debug-note">Next send H, L, D, and E to the Cassette.</p>
									<div class="assembly-row-combined"><div>0F5CH</div><div>LD A,H</div><div>Copy the contents of Register H into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F5DH</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F60H</div><div>LD A,L</div><div>Copy the contents of Register L into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F61H</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F64H</div><div>POP BC</div><div>Put the value held at the top of the STACK into Register Pair BC.</div></div>
									<div class="assembly-row-combined"><div>0F65H</div><div>LD A,D</div><div>Copy the contents of Register D into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F66H</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F69H</div><div>LD A,E</div><div>Copy the contents of Register E into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F6AH</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<p class="debug-note">Next, send all the bytes from HL to DE to the Cassette.</p>
									<div class="assembly-row-combined"><div>0F6DH</div><div>LD C,00H</div><div>Let Register C equal 00H.</div></div>
									<div class="assembly-row-combined"><div>0F6FH</div><div>LD A,(HL)</div><div>Fetch the value held in the memory location pointed to by Register Pair (HL) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F70H</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F73H</div><div>INC HL</div><div>INCrement the value stored in Register Pair HL by 1.</div></div>
									<div class="assembly-row-combined"><div>0F74H</div><div>RST 20H</div><div>Compare HL and DE. Results: NZ means no match, Z means match, and if H=D but L &lt; E, then the C flag will be set.</div></div>
									<div class="assembly-row-combined"><div>0F75H</div><div><a href="#0F6FH" class="memory-link">JR NZ,0F6FH</a></div><div>If
 HL hasn't reached DE yet then the NZ FLAG (Not Zero) will have been 
set, so LOOP back to 0F6FH to keep writing out the byte at the current 
(HL) memory location.</div></div>
									<p class="debug-note">If we are here, then all of that has been written out.</p>
									<div class="assembly-row-combined"><div>0F77H</div><div>LD A,C</div><div>Copy the contents of Register C into Register A.</div></div>
									<div class="assembly-row-combined"><div>0F78H</div><div>NEG</div><div>Negate the contents of Register A (which is the same as -A).</div></div>
									<div class="assembly-row-combined"><div>0F7AH</div><div><a href="#0FA9H" class="memory-link">CALL 0FA9H</a></div><div>GOSUB to 0FA9H to write the BYTE held in Register A to the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0F7DH</div><div><a href="#0FE4H" class="memory-link">CALL 0FE4H</a></div><div>GOSUB to 0FE4H to turn off the Cassette Motor.</div></div>
									<div class="assembly-row-combined"><div>0F80H</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0F81H">0F81H - CASSETTE - READ a BYTE to the Cassette Port. Routine reads a bit and then rotates it into Register A.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0F81H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
									<p class="debug-note">Preserve Register A so we can do all the following operations without destroying it.</p>
									<div class="assembly-row-combined"><div>0F82H</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0F83H</div><div><a href="https://www.trs-80.com/main-internal-ports-and-i-o.htm#FFH" target="_blank">IN A,(FFH)</a></div><div>Fetch a byte from the cassette port.</div></div>
									<div class="assembly-row-combined"><div>0F85H</div><div>RLA</div><div>Rotate
 the bits of Register A left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and the 
previous contents of the carry flag are copied to bit 0.</div></div>
									<div class="assembly-row-combined"><div>0F86H</div><div><a href="#0F83H" class="memory-link">JR NC,0F83H</a></div><div>If
 the NC FLAG (No Carry) has been set, meaning that the current bit being
 examined is a ZERO, JUMP back two instructions to 0F83H to get the next
 bit.</div></div>
									<p class="debug-note">If we're here, then the bit was a 1.</p>
									<div class="assembly-row-combined"><div>0F88H</div><div>LD B,7CH</div><div>Let Register B equal 7CH (Decimal: 124) for a delay loop of 124 iterations.</div></div>
									<div class="assembly-row-combined"><div>0F8AH</div><div><a href="#0F8AH" class="memory-link">DJNZ 0F8AH</a></div><div>Delay
 by LOOPing back to this very instruction, reducing Register B each 
time, and continue to LOOP until Register B has been reduced to ZERO, in
 which case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0F8CH</div><div><a href="#0FF0H" class="memory-link">CALL 0FF0H</a></div><div>GOSUB to 0FF0H to check the state of cassette motor/input bit.</div></div>
									<div class="assembly-row-combined"><div>0F8FH</div><div>LD B,F8H</div><div>Let Register B equal F8H (Decimal: 248) for a delay loop of 248 iterations.</div></div>
									<div class="assembly-row-combined"><div>0F91H</div><div><a href="#0F91H" class="memory-link">DJNZ 0F91H</a></div><div>Delay
 by LOOPing back to this very instruction, reducing Register B each 
time, and continue to LOOP until Register B has been reduced to ZERO, in
 which case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0F93H</div><div><a href="https://www.trs-80.com/main-internal-ports-and-i-o.htm#FFH" target="_blank">IN A,(FFH)</a></div><div>Fetch a byte from the cassette port.</div></div>
									<div class="assembly-row-combined"><div>0F95H</div><div>LD B,A</div><div>Copy the fetched byte (held in Register A) into Register B since we are about to swap A and A'.</div></div>
									<p class="debug-note">Now let's restore the original Register A and proceed.</p>
									<div class="assembly-row-combined"><div>0F96H</div><div>EX AF,AF'</div><div>EXchange the value stored in Register Pair AF' with the value stored in Register Pair AF.</div></div>
									<div class="assembly-row-combined"><div>0F97H</div><div>RL B</div><div>Rotate
 the bits of Register B left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and the 
previous contents of the carry flag are copied to bit 0.</div></div>
									<div class="assembly-row-combined"><div>0F99H</div><div>RLA</div><div>Rotate
 the bits of Register A left (i.e., lower bit moves higher) one bit 
position. The contents of bit 7 are copied to the CARRY FLAG and the 
previous contents of the carry flag are copied to bit 0.</div></div>
									<div class="assembly-row-combined"><div>0F9AH</div><div>PUSH AF</div><div>Save the contents of Register Pair AF to the top of the stack so we don't lose A on the next command.</div></div>
									<div class="assembly-row-combined"><div>0F9BH</div><div><a href="#0FF0H" class="memory-link">CALL 0FF0H</a></div><div>GOSUB to 0FF0H to check the state of cassette motor/input bit.</div></div>
									<div class="assembly-row-combined"><div>0F9EH</div><div>POP AF</div><div>Restore Register AF from the STACK.</div></div>
									<div class="assembly-row-combined"><div>0F9FH</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0FA0H</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FA1H">0FA1H - CASSETTE - Read a BYTE to the Cassette Port by calling 0F81H eight times.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FA1H</div><div>LD B,08H</div><div>Let Register B equal 08H (Decimal: 8) for a loop to process the 8 bits in a byte.</div></div>
									<div class="assembly-row-combined"><div>0FA3H</div><div><a href="#0F81H" class="memory-link">CALL 0F81H</a></div><div>GOSUB to 0F81H to READ a BYTE from the Cassette Port.</div></div>
									<div class="assembly-row-combined"><div>0FA6H</div><div><a href="#0FA3H" class="memory-link">DJNZ 0FA3H</a></div><div>LOOP
 back to the prior instruction, reducing Register B each time, and 
continue to LOOP until Register B has been reduced to ZERO, in which 
case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0FA8H</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FA9H">0FA9H - 
CASSETTE - Write a BYTE to the Cassette Port. On entry Register A should
 hold the byte to output and Register C should be tracking the CRC.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FA9H</div><div>EXX</div><div>EXchanges the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0FAAH</div><div>LD C,08H</div><div>Let Register C equal 08H (Decimal: 8) for a loop to process the 8 bits in a byte.</div></div>
									<div class="assembly-row-combined"><div>0FACH</div><div>LD D,A</div><div>Copy the byte to be output (held in Register A) into Register D.</div></div>
									<div class="assembly-row-combined"><div>0FADH</div><div><a href="#0FC5H" class="memory-link">CALL 0FC5H</a></div><div>GOSUB to 0FC5H to write a bit to the cassette port.</div></div>
									<div class="assembly-row-combined"><div>0FB0H</div><div>RLC D</div><div>Since
 this routine is using the bit in the CARRY FLAG to be the one to 
output, rotate Register D left one bit position, with bit 7 being copied
 to both the CARRY FLAG and bit 0.</div></div>
									<div class="assembly-row-combined"><div>0FB2H</div><div><a href="#0FBFH" class="memory-link">JR NC,0FBFH</a></div><div>If
 the NC FLAG (No Carry) has been set, then the bit to be output is a 
zero. We don't output a 0, we just delay and let the tape run, so do 
that via a JUMP to 0FBFH.</div></div>
									<div class="assembly-row-combined"><div>0FB4H</div><div><a href="#0FC5H" class="memory-link">CALL 0FC5H</a></div><div>GOSUB to 0FC5H to write a bit to the cassette port.</div></div>
									<div class="assembly-row-combined"><div>0FB7H</div><div>DEC C</div><div>DECrement the value stored in Register C by 1 since we just wrote one of the 8 bits.</div></div>
									<div class="assembly-row-combined"><div>0FB8H</div><div><a href="#0FADH" class="memory-link">JR NZ,0FADH</a></div><div>If the counter in Register C has not yet hit ZERO, LOOP back to 0FADH to keep processing the bits in the byte.</div></div>
									<div class="assembly-row-combined"><div>0FBAH</div><div>LD A,D</div><div>Copy the contents of Register D into Register A, thus restoring the original byte to output into Register A.</div></div>
									<div class="assembly-row-combined"><div>0FBBH</div><div>EXX</div><div>EXchanges
 the 16-bit contents of BC, DE, and HL with BC', DE', and HL'. Among 
other things, this restores the CRC count to Register C. <b>Note:</b> AF is not handled via EXX.</div></div>
									<div class="assembly-row-combined"><div>0FBCH</div><div>ADD A,C</div><div>LET Register A = Register A + Register C so as to update the CRC counter held in Register C.</div></div>
									<div class="assembly-row-combined"><div>0FBDH</div><div>LD C,A</div><div>Copy the updated CRC count from Register A into Register C.</div></div>
									<div class="assembly-row-combined"><div>0FBEH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FBFH">0FBFH - CASSETTE - Delay Loop of 256 (which represents writing a 0 bit to the moving cassette).<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FBFH</div><div>LD B,00H</div><div>Let Register B equal 00H, which will mean a DJNZ loop of 256 iterations.</div></div>
									<div class="assembly-row-combined"><div>0FC1H</div><div><a href="#0FC1H" class="memory-link">DJNZ 0FC1H</a></div><div>LOOP
 back to this very instruction, reducing Register B each time, and 
continue to LOOP until Register B has been reduced to ZERO, in which 
case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0FC3H</div><div><a href="#0FB7H" class="memory-link">JR 0FB7H</a></div><div>JUMP to 0FB7H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FC5H">0FC5H - CASSETTE - Write a BIT to the Cassette Port.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FC5H</div><div>LD HL,FC01H</div><div>Let Register Pair HL equal FC01H, so Register H is 1111 1100 and Register L is 0000 0001.</div></div>
									<div class="assembly-row-combined"><div>0FC8H</div><div><a href="#0FF3H" class="memory-link">CALL 0FF3H</a></div><div>GOSUB
 to 0FF3H which will fetch a byte from the cassette port status cache 
(stored at 4090H), mask it against 1111 1100 (so its values can only be 
FC-252 to FF-255), OR that against 0000 0001 (so its values can only be 
FD-253 or FF-255), send that to the cassette port (Port FFH), test Bit 
2, and RETurn.</div></div>
									<div class="assembly-row-combined"><div>0FCBH</div><div>LD B,0AH</div><div>Let Register B equal 0AH (Decimal: 10), for a DJNZ delay loop of 10.</div></div>
									<div class="assembly-row-combined"><div>0FCDH</div><div><a href="#0FCDH" class="memory-link">DJNZ 0FCDH</a></div><div>LOOP
 back to this very instruction 10 times, reducing Register B each time, 
and continue to LOOP until Register B has been reduced to ZERO, in which
 case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0FCFH</div><div>LD HL,FC02H</div><div>Let Register Pair HL equal FC02H, so Register H is 1111 1100 and Register L is 0000 0010.</div></div>
									<div class="assembly-row-combined"><div>0FD2H</div><div><a href="#0FF3H" class="memory-link">CALL 0FF3H</a></div><div>GOSUB
 to 0FF3H which will fetch a byte from the cassette port status cache 
(stored at 4090H), mask it against 1111 1100 (so its values can only be 
FC-252 to FF-255), OR that against 0000 0010 (so its values can only be 
FE-254 or FF-255), send that to the cassette port (Port FFH), test Bit 
2, and RETurn.</div></div>
									<div class="assembly-row-combined"><div>0FD5H</div><div>LD B,0AH</div><div>Let Register B equal 0AH (Decimal: 10), for a DJNZ delay loop of 10.</div></div>
									<div class="assembly-row-combined"><div>0FD7H</div><div><a href="#0FD7H" class="memory-link">DJNZ 0FD7H</a></div><div>LOOP
 back to this very instruction 10 times, reducing Register B each time, 
and continue to LOOP until Register B has been reduced to ZERO, in which
 case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0FD9H</div><div>LD HL,FC00H</div><div>Let Register Pair HL equal FC00H, so Register H is 1111 1100 and Register L is 0000 0000.</div></div>
									<div class="assembly-row-combined"><div>0FDCH</div><div><a href="#0FF3H" class="memory-link">CALL 0FF3H</a></div><div>GOSUB
 to 0FF3H which will fetch a byte from the cassette port status cache 
(stored at 4090H), mask it against 1111 1100 (so its values can only be 
FC-252 to FF-255), OR that against 0000 0000 (leaving it unchanged), 
send that to the cassette port (Port FFH), test Bit 2, and RETurn.</div></div>
									<div class="assembly-row-combined"><div>0FDFH</div><div>LD B,DAH</div><div>Let Register B equal DAH (Decimal: 218).</div></div>
									<div class="assembly-row-combined"><div>0FE1H</div><div><a href="#0FE1H" class="memory-link">DJNZ 0FE1H</a></div><div>LOOP
 back to this very instruction 218 times, reducing Register B each time,
 and continue to LOOP until Register B has been reduced to ZERO, in 
which case, continue with the next instruction.</div></div>
									<div class="assembly-row-combined"><div>0FE3H</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FE4H">0FE4H - CASSETTE - Turn off the cassette motor.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FE4H</div><div>LD HL,FB00H</div><div>Let
 Register Pair HL equal FB00H. The FBH will be ANDed against the 
cassette port status byte and the 00H will be OR'd against the result. 
The result will be sent to the CASSETTE PORT of FFH.</div></div>
									<div class="assembly-row-combined"><div>0FE7H</div><div><a href="#0FF3H" class="memory-link">JR 0FF3H</a></div><div>JUMP to 0FF3H.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FE9H">0FE9H - CASSETTE - Turn on the cassette motor.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FE9H</div><div>LD HL,FF04H</div><div>Let
 Register Pair HL equal FF04H. The FFH will be ANDed against the 
cassette port status byte and the 04H will be OR'd against the result. 
The result will be sent to the CASSETTE PORT of FFH.</div></div>
									<div class="assembly-row-combined"><div>0FECH</div><div><a href="#0FF3H" class="memory-link">CALL 0FF3H</a></div><div>GOSUB to 0FF3H.</div></div>
									<div class="assembly-row-combined"><div>0FEFH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>

							<br><h2 class="assembly-section-title" id="0FF0H">0FF0H - CASSETTE - Check to see if the cassette motor is running.<button class="clipboard-copy-button" title="Copy link to this section">üìã</button></h2>
							<div class="card-item">
								<div class="assembly-table">
									<div class="assembly-row-combined"><div>0FF0H</div><div>LD HL,FF00H</div><div>Let Register Pair HL equal FF00H.</div></div>
									<div class="assembly-row-combined"><div>0FF3H</div><div>LD A,(4090H)</div><div>Fetch the cassette port status cache byte (held in memory location 4090H) and store it into Register A.</div></div>
									<div class="assembly-row-combined"><div>0FF6H</div><div>AND H</div><div>MASK the value of Register A against the value held in Register H.</div></div>
									<div class="assembly-row-combined"><div>0FF7H</div><div>OR L</div><div>OR Register L against Register A. The results are stored in Register A.</div></div>
									<div class="assembly-row-combined"><div>0FF8H</div><div><a href="https://www.trs-80.com/main-internal-ports-and-i-o.htm#H" target="_blank">OUT (FFH),A</a></div><div>Send the value held in Register A to the cassette port of 0FFH.</div></div>
									<div class="assembly-row-combined"><div>0FFAH</div><div>LD (4090H),A</div><div>Store the value held in Register A into the cassett port status cache (held in memory location 4090H).</div></div>
									<div class="assembly-row-combined"><div>0FFDH</div><div>BIT 2,A</div><div>Test Bit Number 2 of Register A. Z FLAG will be set if that bit is 0, and NZ FLAG will be set if that bit is 1.</div></div>
									<div class="assembly-row-combined"><div>0FFFH</div><div>RET</div><div>RETurn to the caller.</div></div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</main>
		</div>
	</div>
	<!-- Fancybox JavaScript -->
	<script src="TRS-80%20-%20Level%201%20ROM%20Disassembled_files/fancybox.umd.js"></script>
	<!-- Initialize Fancybox -->
	<script>
		Fancybox.bind("[data-fancybox]", {
			Toolbar: {
				display: {
					left: ["infobar"],
					middle: [],
					right: ["slideshow", "thumbs", "close"],
				},
			},
			Thumbs: {
				autoStart: false,
			},
		});
	</script>
	<!-- Last Modified Date -->
	<script>
		document.write("<p style='text-align:right; padding: 10px 20px; font-style: italic; font-size: 0.85em; color: #666;'>Last edited: " + document.lastModified + "</p>");
	</script><p style="text-align:right; padding: 10px 20px; font-style: italic; font-size: 0.85em; color: #666;">Last edited: 12/28/2025 21:28:12</p>

<div id="mobile-overlay" class="mobile-menu-overlay"></div></body></html>